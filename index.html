<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="正忙着优秀~~~"><meta name="keywords" content><meta name="author" content="YoungDream,undefined"><meta name="copyright" content="YoungDream"><title>小小搬砖工【YD Blog】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="icon" href="/favicon-16x16-user.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><!--link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")--><!--link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css")--><!--script(src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer)--><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"0BGAOITLJQ","apiKey":"2c864a8b4720c83c2ddfc7e53d4c1711","indexName":"article_NAME","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
}</script></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="author-info"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/user.jpg"></div><div class="author-info-name">YoungDream</div><div class="author-info-description">正忙着优秀~~~</div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/qq994300880" target="_blank">GitHub<i class="icon-dot bg-color9"></i></a><a class="links-button button-hover" href="http://wpa.qq.com/msgrd?v=3&amp;uin=994300880&amp;site=qq&amp;menu=yes" target="_blank">QQ<i class="icon-dot bg-color5"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">51</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">63</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">8</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i><span> 搜索</span></a><a class="title-name" href="/">YD Blog</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><div id="recent-posts"><!-- each post in page.posts.sort('date', -1).limit(10).toArray()--><!-- config中配置按照什么排序--><div class="recent-post-item"><a class="post-title" href="/2019/03/26/认识JWT/">认识JWT</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-26</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/security/">security</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/jwt/">jwt</a></div></div><div class="post-content"><div class="main-content content"><h1 id="JWT-JSON-Web-Token"><a href="#JWT-JSON-Web-Token" class="headerlink" title="JWT(JSON Web Token)"></a>JWT(JSON Web Token)</h1><p>​    JSON Web Token (JWT)是一个开放标准(RFC 7519)，它定义了一种紧凑的、自包含的方式，用于作为JSON对象在各方之间安全地传输信息。该信息可以被验证和信任，因为它是数字签名的。</p>
<h2 id="什么时候你应该用JSON-Web-Tokens"><a href="#什么时候你应该用JSON-Web-Tokens" class="headerlink" title="什么时候你应该用JSON Web Tokens"></a>什么时候你应该用JSON Web Tokens</h2><p>下列场景中使用JSON Web Token是很有用的：</p>
<ul>
<li><strong>Authorization</strong> (授权) : 这是使用JWT的最常见场景。一旦用户登录，后续每个请求都将包含JWT，允许用户访问该令牌允许的路由、服务和资源。单点登录是现在广泛使用的JWT的一个特性，因为它的开销很小，并且可以轻松地跨域使用。</li>
<li><strong>Information Exchange</strong> (信息交换) : 对于安全的在各方之间传输信息而言，JSON Web Tokens无疑是一种很好的方式。因为JWTs可以被签名，例如，用公钥/私钥对，你可以确定发送人就是它们所说的那个人。另外，由于签名是使用头和有效负载计算的，您还可以验证内容没有被篡改。</li>
</ul>
<h2 id="JSON-Web-Token的结构是什么样的"><a href="#JSON-Web-Token的结构是什么样的" class="headerlink" title="JSON Web Token的结构是什么样的"></a>JSON Web Token的结构是什么样的</h2><p>JSON Web Token由三部分组成，它们之间用圆点(.)连接。这三部分分别是：</p>
<ul>
<li>Header</li>
<li>Payload</li>
<li>Signature</li>
</ul>
<p>因此，一个典型的JWT看起来是这个样子的：</p>
<p>xxxxx.yyyyy.zzzzz</p>
<h3 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h3><p><code>header</code>典型的由两部分组成：<code>token</code>的类型（“JWT”）和算法名称（比如：<code>HMAC</code> <code>SHA256</code>或者<code>RSA</code>等等）。</p>
<p>例如：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"alg"</span>:<span class="string">"HS256"</span>,</span><br><span class="line">    <span class="attr">"typ"</span>:<span class="string">"JWT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Payload"><a href="#Payload" class="headerlink" title="Payload"></a>Payload</h3><p>JWT的第二部分是<code>payload</code>，它包含声明（要求）。声明是关于实体(通常是用户)和其他数据的声明。声明有三种类型: <code>registered</code>, <code>public</code> 和 <code>private</code>。</p>
<ul>
<li><code>Registered claims</code> : 这里有一组预定义的声明，它们不是强制的，但是推荐。比如：<code>iss (issuer)</code>, <code>exp (expiration time)</code>, <code>sub (subject)</code>, <code>aud (audience)</code>等。</li>
<li>Public claims : 可以随意定义。</li>
<li>Private claims : 用于在同意使用它们的各方之间共享信息，并且不是注册的或公开的声明。</li>
</ul>
<p>下面是一个例子：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"sub"</span>:<span class="string">"1234567890"</span>,</span><br><span class="line">    <span class="attr">"name"</span>:<span class="string">"Tom"</span>,</span><br><span class="line">    <span class="attr">"admin"</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对<code>payload</code>进行<code>Base64</code>编码就得到JWT的第二部分</p>
<blockquote>
<p>注意：不要在JWT的payload或者header中放置敏感信息，除非它们是加密的</p>
</blockquote>
<h3 id="Signature"><a href="#Signature" class="headerlink" title="Signature"></a>Signature</h3><p>为了得到签名部分，你必须有编码过的header、编码过的payload、一个秘钥，签名算法是header中指定的那个，然对它们签名即可。</p>
<p>例如：</p>
<p><code>HMACSHA256(base64UrlEncode(header) + &quot;.&quot; + base64UrlEncode(payload), secret)</code></p>
<p>签名是用于验证消息在传递过程中有没有被更改，并且，对于使用私钥签名的token，它还可以验证JWT的发送方是否为它所称的发送方。</p>
<p>看一张官网的图就明白了：</p>
<p><img src="/images/认识JWT-图1.png" alt="图1"></p>
<h2 id="JSON-Web-Tokens是如何工作的"><a href="#JSON-Web-Tokens是如何工作的" class="headerlink" title="JSON Web Tokens是如何工作的"></a>JSON Web Tokens是如何工作的</h2><p>在认证的时候，当用户用他们的凭证成功登录以后，一个JSON Web Token将会被返回。此后，token就是用户凭证了，你必须非常小心以防止出现安全问题。一般而言，你保存令牌的时候不应该超过你所需要它的时间。</p>
<p>无论何时用户想要访问受保护的路由或者资源的时候，用户代理（通常是浏览器）都应该带上JWT，典型的，通常放在Authorization header中，用Bearer schema。</p>
<p>header应该看起来是这样的：</p>
<p><code>Authorization: Bearer &lt;token&gt;</code></p>
<p>服务器上的受保护的路由将会检查Authorization header中的JWT是否有效，如果有效，则用户可以访问受保护的资源。如果JWT包含足够多的必需的数据，那么就可以减少对某些操作的数据库查询的需要，尽管可能并不总是如此。</p>
<p>如果token是在授权头（Authorization header）中发送的，那么跨源资源共享(CORS)将不会成为问题，因为它不使用cookie。</p>
<p>下面这张图显示了如何获取JWT以及使用它来访问APIs或者资源：</p>
<p><img src="/images/认识JWT-图2.png" alt="图2"></p>
<ol>
<li>应用（或者客户端）想授权服务器请求授权。例如，如果用授权码流程的话，就是/oauth/authorize</li>
<li>当授权被许可以后，授权服务器返回一个access token给应用</li>
<li>应用使用access token访问受保护的资源（比如：API）</li>
</ol>
<h2 id="基于Token的身份认证-与-基于服务器的身份认证"><a href="#基于Token的身份认证-与-基于服务器的身份认证" class="headerlink" title="基于Token的身份认证 与 基于服务器的身份认证"></a>基于Token的身份认证 与 基于服务器的身份认证</h2><h3 id="基于服务器的身份认证"><a href="#基于服务器的身份认证" class="headerlink" title="基于服务器的身份认证"></a>基于服务器的身份认证</h3><p>在讨论基于Token的身份认证是如何工作的以及它的好处之前，我们先来看一下以前我们是怎么做的：</p>
<blockquote>
<p>HTTP协议是无状态的，也就是说，如果我们已经认证了一个用户，那么他下一次请求的时候，服务器不知道我是谁，我们必须再次认证</p>
</blockquote>
<p>传统的做法是将已经认证过的用户信息存储在服务器上，比如Session。用户下次请求的时候带着Session ID，然后服务器以此检查用户是否认证过。</p>
<p>这种基于服务器的身份认证方式存在一些问题：</p>
<ul>
<li>Sessions : 每次用户认证通过以后，服务器需要创建一条记录保存用户信息，通常是在内存中，随着认证通过的用户越来越多，服务器的在这里的开销就会越来越大。</li>
<li>Scalability : 由于Session是在内存中的，这就带来一些扩展性的问题。</li>
<li>CORS : 当我们想要扩展我们的应用，让我们的数据被多个移动设备使用时，我们必须考虑跨资源共享问题。当使用AJAX调用从另一个域名下获取资源时，我们可能会遇到禁止请求的问题。</li>
<li>CSRF : 用户很容易受到CSRF攻击。</li>
</ul>
<h3 id="JWT与Session的差异"><a href="#JWT与Session的差异" class="headerlink" title="JWT与Session的差异"></a>JWT与Session的差异</h3><p>相同点是，它们都是存储用户信息；然而，Session是在服务器端的，而JWT是在客户端的。</p>
<p>Session方式存储用户信息的最大问题在于要占用大量服务器内存，增加服务器的开销。</p>
<p>而JWT方式将用户状态分散到了客户端中，可以明显减轻服务端的内存压力。</p>
<p>Session的状态是存储在服务器端，客户端只有session id；而Token的状态是存储在客户端。</p>
<p><img src="/images/认识JWT-图3.png" alt="图3"></p>
<h3 id="基于Token的身份认证是如何工作的"><a href="#基于Token的身份认证是如何工作的" class="headerlink" title="基于Token的身份认证是如何工作的"></a>基于Token的身份认证是如何工作的</h3><p>基于Token的身份认证是无状态的，服务器或者Session中不会存储任何用户信息。</p>
<blockquote>
<p>没有会话信息意味着应用程序可以根据需要扩展和添加更多的机器，而不必担心用户登录的位置。</p>
</blockquote>
<p>虽然这一实现可能会有所不同，但其主要流程如下：</p>
<ol>
<li>用户携带用户名和密码请求访问</li>
<li>服务器校验用户凭据</li>
<li>应用提供一个token给客户端</li>
<li>客户端存储token，并且在随后的每一次请求中都带着它</li>
<li>服务器校验token并返回数据</li>
</ol>
<p>注意：</p>
<ol>
<li>每一次请求都需要token</li>
<li>Token应该放在请求<code>header</code>中</li>
<li>我们还需要将服务器设置为接受来自所有域的请求，用<code>Access-Control-Allow-Origin: *</code></li>
</ol>
<h3 id="用Token的好处"><a href="#用Token的好处" class="headerlink" title="用Token的好处"></a>用Token的好处</h3><ul>
<li>无状态和可扩展性：Tokens存储在客户端。完全无状态，可扩展。我们的负载均衡器可以将用户传递到任意服务器，因为在任何地方都没有状态或会话信息。</li>
<li>安全：Token不是Cookie。（The token, not a cookie.）每次请求的时候Token都会被发送。而且，由于没有Cookie被发送，还有助于防止CSRF攻击。即使在你的实现中将token存储到客户端的Cookie中，这个Cookie也只是一种存储机制，而非身份认证机制。没有基于会话的信息可以操作，因为我们没有会话!</li>
</ul>
<p>还有一点，token在一段时间以后会过期，这个时候用户需要重新登录。这有助于我们保持安全。还有一个概念叫token撤销，它允许我们根据相同的授权许可使特定的token甚至一组token无效。</p>
<h3 id="JWT与OAuth的区别"><a href="#JWT与OAuth的区别" class="headerlink" title="JWT与OAuth的区别"></a>JWT与OAuth的区别</h3><ol>
<li>OAuth2是一种授权框架 ，JWT是一种认证协议</li>
<li>无论使用哪种方式切记用HTTPS来保证数据的安全性</li>
<li>OAuth2用在使用第三方账号登录的情况(比如使用weibo, qq, github登录某个app)，而<strong>JWT是用在前后端分离</strong>, 需要简单的对后台API进行保护时使用。</li>
</ol>
</div></div><a class="button-hover more" href="/2019/03/26/认识JWT/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/26/基于2.2.x的SpringCloudGateway/">基于2.2.x的SpringCloudGateway</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-26</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springcloud/">springcloud</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/routing/">routing</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/gateway/">gateway</a></div></div><div class="post-content"><div class="main-content content"><h1 id="Spring-Cloud-Gateway"><a href="#Spring-Cloud-Gateway" class="headerlink" title="Spring Cloud Gateway"></a>Spring Cloud Gateway</h1><p><strong>2.2.0.BUILD-快照</strong></p>
<p>该项目提供了一个建立在Spring Ecosystem之上的API网关，包括：Spring 5，Spring Boot 2和Project Reactor。Spring Cloud Gateway旨在提供一种简单而有效的方式来路由到API，并为他们提供横切关注点，例如：安全性，监控/指标和弹性。</p>
<h2 id="如何包含Spring-Cloud-Gateway"><a href="#如何包含Spring-Cloud-Gateway" class="headerlink" title="如何包含Spring Cloud Gateway"></a>如何包含Spring Cloud Gateway</h2><p>要在项目中包含Spring Cloud Gateway，请使用具有组<code>org.springframework.cloud</code> 和工件ID 的启动器<code>spring-cloud-starter-gateway</code>。有关 使用当前Spring Cloud Release Train设置构建系统的详细信息，请参阅<a href="https://projects.spring.io/spring-cloud/" target="_blank" rel="noopener">Spring Cloud Project页面</a>。</p>
<p>如果包含启动器，但由于某种原因，您不希望启用网关，请进行设置<code>spring.cloud.gateway.enabled=false</code>。</p>
<blockquote>
<p>Spring Cloud Gateway基于<a href="https://spring.io/projects/spring-boot#learn" target="_blank" rel="noopener">Spring Boot 2.0</a>， <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html" target="_blank" rel="noopener">Spring WebFlux</a>和<a href="https://projectreactor.io/docs" target="_blank" rel="noopener">Project Reactor </a><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html" target="_blank" rel="noopener">构建</a>。因此，许多熟悉的同步库（例如Spring Data和Spring Security）和模式在使用Spring Cloud Gateway时可能不适用。如果您不熟悉这些项目，我们建议您在使用Spring Cloud Gateway之前先阅读他们的文档以熟悉一些新概念。</p>
</blockquote>
<blockquote>
<p>Spring Cloud Gateway需要Spring Boot和Spring Webflux提供的Netty运行时。它不能在传统的Servlet容器中工作或构建为WAR。</p>
</blockquote>
<h2 id="词汇表"><a href="#词汇表" class="headerlink" title="词汇表"></a>词汇表</h2><ul>
<li><strong>Route</strong>: 路由网关的基本构建块。它由ID，目标URI，谓词集合和过滤器集合定义。如果聚合谓词为真，则匹配路由。</li>
<li><strong>Predicate</strong>: 这是一个<a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html" target="_blank" rel="noopener">Java 8函数谓词</a>。输入类型是<a href="https://docs.spring.io/spring/docs/5.0.x/javadoc-api/org/springframework/web/server/ServerWebExchange.html" target="_blank" rel="noopener">Spring Framework<code>ServerWebExchange</code></a>。这允许开发人员匹配来自HTTP请求的任何内容，例如标头或参数。</li>
<li><strong>Filter</strong>: 这是使用特定工厂构建的<a href="https://docs.spring.io/spring/docs/5.0.x/javadoc-api/org/springframework/web/server/GatewayFilter.html" target="_blank" rel="noopener">Spring Framework<code>GatewayFilter</code></a>实例。这里，可以在发送下游请求之前或之后修改请求和响应。</li>
</ul>
<h2 id="运行原理"><a href="#运行原理" class="headerlink" title="运行原理"></a>运行原理</h2><p><img src="/images/基于2.2.x的SpringCloudGateway-图1.png" alt="运行原理"></p>
<p>客户端向Spring Cloud Gateway发出请求。如果网关处理程序映射确定请求与路由匹配，则将其发送到网关Web处理程序。此处理程序运行通过特定于请求的过滤器链发送请求。滤波器被虚线划分的原因是滤波器可以在发送代理请求之前或之后执行逻辑。执行所有“预”过滤器逻辑，然后进行代理请求。在发出代理请求之后，执行“post”过滤器逻辑。</p>
<blockquote>
<p>在没有端口的路由中定义的URI将分别为HTTP和HTTPS URI获取默认端口设置为80和443。</p>
</blockquote>
<h2 id="Route-Predicate-Factories"><a href="#Route-Predicate-Factories" class="headerlink" title="Route Predicate Factories"></a>Route Predicate Factories</h2><p>Spring Cloud Gateway将路由作为Spring WebFlux <code>HandlerMapping</code>基础结构的一部分进行匹配。Spring Cloud Gateway包含许多内置的Route Predicate工厂。所有这些谓词都匹配HTTP请求的不同属性。多路线谓词工厂可以组合并通过逻辑组合<code>and</code>。</p>
<h3 id="After"><a href="#After" class="headerlink" title="After"></a>After</h3><p>After Route谓词工厂采用一个参数，一个日期时间。此谓词匹配在当前日期时间之后发生的请求。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">after_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">After=2017-01-20T17:42:47.789-07:00[America/Denver]</span></span><br></pre></td></tr></table></figure>
<p>此路由在2017年1月20日17:42 Mountain Time（Denver）之后的所有请求相匹配。</p>
<h3 id="Before"><a href="#Before" class="headerlink" title="Before"></a>Before</h3><p>Before Route Predicate Factory采用一个参数，一个日期时间。此谓词匹配在当前日期时间之前发生的请求。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">before_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Before=2017-01-20T17:42:47.789-07:00[America/Denver]</span></span><br></pre></td></tr></table></figure>
<p>此路由在2017年1月20日17:42 Mountain Time（Denver）之前的任何请求相匹配。</p>
<h3 id="Between"><a href="#Between" class="headerlink" title="Between"></a>Between</h3><p>Between Route Predicate Factory有两个参数，datetime1和datetime2。此谓词匹配datetime1之后和datetime2之前发生的请求。datetime2参数必须在datetime1之后。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">between_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Between=2017-01-20T17:42:47.789-07:00[America/Denver],</span> <span class="number">2017</span><span class="bullet">-01</span><span class="bullet">-21</span><span class="attr">T17:42:47.789-07:00[America/Denver]</span></span><br></pre></td></tr></table></figure>
<p>此路路由在2017年1月20日17:42山地时间（丹佛）之后和2017年1月21日17:42山区时间（丹佛）之前的任何请求相匹配。这对维护窗口很有用。</p>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Cookie Route Predicate Factory有两个参数，cookie名称和正则表达式。此谓词匹配具有给定名称且值与正则表达式匹配的cookie。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">cookie_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Cookie=chocolate,</span> <span class="string">ch.p</span></span><br></pre></td></tr></table></figure>
<p>此路由匹配请求具有名为<code>chocolate</code>who的值与<code>ch.p</code>正则表达式匹配的cookie 。</p>
<h3 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h3><p>Header Route谓词工厂采用两个参数，标题名称和正则表达式。此谓词与具有给定名称且值与正则表达式匹配的标头匹配。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">header_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Header=X-Request-Id,</span> <span class="string">\d+</span></span><br></pre></td></tr></table></figure>
<p>如果请求具有名称，<code>X-Request-Id</code>其值与<code>\d+</code>正则表达式匹配（具有一个或多个数字的值），则此路由匹配。</p>
<h3 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h3><p>Host Route Predicate Factory采用一个参数：主机名模式列表。该模式是一个Ant样式模式，<code>.</code>作为分隔符。此谓词匹配<code>Host</code>与模式匹配的标头。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">host_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Host=**.somehost.org,**.anotherhost.org</span></span><br></pre></td></tr></table></figure>
<p>如果请求的<code>Host</code>标头具有值<code>www.somehost.org</code>或<code>beta.somehost.org</code>或<code>www.anotherhost.org</code>，则此路由将匹配。</p>
<p>此谓词将URI模板变量（<code>sub</code>如上例中定义的）提取为名称和值的映射，并将其放在<code>ServerWebExchange.getAttributes()</code>带有定义的键的位置<code>ServerWebExchangeUtils.URI_TEMPLATE_VARIABLES_ATTRIBUTE</code>。然后，这些值可供<a href="https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#gateway-route-filters" target="_blank" rel="noopener">GatewayFilter Factories使用</a></p>
<h3 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h3><p>Method Route Predicate Factory采用一个参数：要匹配的HTTP方法。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">method_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Method=GET</span></span><br></pre></td></tr></table></figure>
<p>如果请求方法是<code>GET</code>，则此路由将匹配。</p>
<h3 id="Path"><a href="#Path" class="headerlink" title="Path"></a>Path</h3><p>Path Route Predicate Factory有两个参数：Spring <code>PathMatcher</code>模式列表和一个可选标志<code>matchOptionalTrailingSeparator</code>。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">host_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/foo/&#123;segment&#125;,/bar/&#123;segment&#125;</span></span><br></pre></td></tr></table></figure>
<p>如果请求路径是例如：<code>/foo/1</code>或<code>/foo/bar</code>或<code>/bar/baz</code>，则此路由将匹配。</p>
<p>此Predicate将URI模板变量（<code>segment</code>如上例中定义的）提取为名称和值的映射，并将其放在<code>ServerWebExchange.getAttributes()</code>带有定义的键的位置<code>ServerWebExchangeUtils.URI_TEMPLATE_VARIABLES_ATTRIBUTE</code>。然后，这些值可供<a href="https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#gateway-route-filters" target="_blank" rel="noopener">GatewayFilter Factories使用</a></p>
<p>可以使用实用程序方法来更轻松地访问这些变量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, String&gt; uriVariables = ServerWebExchangeUtils.getPathPredicateVariables(exchange);</span><br><span class="line"></span><br><span class="line">String segment = uriVariables.get(<span class="string">"segment"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h3><p>Query Route Predicate Factory有两个参数：必需<code>param</code>和可选<code>regexp</code>。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">query_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Query=baz</span></span><br></pre></td></tr></table></figure>
<p>如果请求包含<code>baz</code>查询参数，则此路由将匹配。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">query_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Query=foo,</span> <span class="string">ba.</span></span><br></pre></td></tr></table></figure>
<p>如果请求包含<code>foo</code>其值为<code>ba.</code>regexp 匹配的查询参数，则此路由将匹配，因此<code>bar</code>并且<code>baz</code>将匹配。</p>
<h3 id="RemoteAddr"><a href="#RemoteAddr" class="headerlink" title="RemoteAddr"></a>RemoteAddr</h3><p>RemoteAddr Route Predicate Factory采用CIDR符号（IPv4或IPv6）字符串的列表（最小值为1），例如<code>192.168.0.1/16</code>（其中<code>192.168.0.1</code>是IP地址并且<code>16</code>是子网掩码）。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">remoteaddr_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RemoteAddr=192.168.1.1/24</span></span><br></pre></td></tr></table></figure>
<p>例如，如果请求的远程地址是<code>192.168.1.10</code>，则此路由将匹配。</p>
<h4 id="修改远程地址的解析方式"><a href="#修改远程地址的解析方式" class="headerlink" title="修改远程地址的解析方式"></a>修改远程地址的解析方式</h4><p>默认情况下，RemoteAddr Route Predicate Factory使用传入请求中的远程地址。如果Spring Cloud Gateway位于代理层后面，则可能与实际客户端IP地址不匹配。</p>
<p>您可以通过设置自定义来自定义解析远程地址的方式<code>RemoteAddressResolver</code>。春季云网关来与基于关闭的一个非默认的远程地址解析器<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For" target="_blank" rel="noopener">X -转发，对于头</a>，<code>XForwardedRemoteAddressResolver</code>。</p>
<p><code>XForwardedRemoteAddressResolver</code> 有两个静态构造函数方法，采用不同的安全方法：</p>
<p><code>XForwardedRemoteAddressResolver::trustAll</code>返回一个<code>RemoteAddressResolver</code>始终采用<code>X-Forwarded-For</code>标头中找到的第一个IP地址的a 。这种方法容易受到欺骗，因为恶意客户端可以设置<code>X-Forwarded-For</code>解析器可以接受的初始值。</p>
<p><code>XForwardedRemoteAddressResolver::maxTrustedIndex</code>获取与Spring Cloud Gateway前运行的可信基础架构数量相关的索引。例如，如果只能通过HAProxy访问Spring Cloud Gateway，则应使用值1。如果在可访问Spring Cloud Gateway之前需要两跳可信基础架构，则应使用值2。</p>
<p>给出以下标头值：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">X-Forwarded-For: 0.0.0.1, 0.0.0.2, 0.0.0.3</span><br></pre></td></tr></table></figure>
<p>以下<code>maxTrustedIndex</code>值将产生以下远程地址。</p>
<table>
<thead>
<tr>
<th style="text-align:center"><code>maxTrustedIndex</code></th>
<th style="text-align:center">结果</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">[ <code>Integer.MIN_VALUE</code>，0]</td>
<td style="text-align:center">（<code>IllegalArgumentException</code>初始化期间无效）</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">0.0.0.3</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">0.0.0.2</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">0.0.0.1</td>
</tr>
<tr>
<td style="text-align:center">[4，<code>Integer.MAX_VALUE</code>]</td>
<td style="text-align:center">0.0.0.1</td>
</tr>
</tbody>
</table>
<p>使用Java配置：</p>
<p>GatewayConfig.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">RemoteAddressResolver resolver = XForwardedRemoteAddressResolver</span><br><span class="line">    .maxTrustedIndex(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">.route(<span class="string">"direct-route"</span>,</span><br><span class="line">    r -&gt; r.remoteAddr(<span class="string">"10.1.1.1"</span>, <span class="string">"10.10.1.1/24"</span>)</span><br><span class="line">        .uri(<span class="string">"https://downstream1"</span>)</span><br><span class="line">.route(<span class="string">"proxied-route"</span>,</span><br><span class="line">    r -&gt; r.remoteAddr(resolver,  <span class="string">"10.10.1.1"</span>, <span class="string">"10.10.1.1/24"</span>)</span><br><span class="line">        .uri(<span class="string">"https://downstream2"</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="Gateway-Filter-Factory"><a href="#Gateway-Filter-Factory" class="headerlink" title="Gateway Filter Factory"></a>Gateway Filter Factory</h2><p>路由过滤器允许以某种方式修改传入的HTTP请求或传出的HTTP响应。路径过滤器的范围限定为特定路径。Spring Cloud Gateway包含许多内置的GatewayFilter工厂。</p>
<p>注意有关如何使用以下任何过滤器的更详细示例，请查看<a href="https://github.com/spring-cloud/spring-cloud-gateway/tree/master/spring-cloud-gateway-core/src/test/java/org/springframework/cloud/gateway/filter/factory" target="_blank" rel="noopener">单元测试</a>。</p>
<h3 id="AddRequestHeader"><a href="#AddRequestHeader" class="headerlink" title="AddRequestHeader"></a>AddRequestHeader</h3><p>AddRequestHeader GatewayFilter Factory采用名称和值参数。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">add_request_header_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">AddRequestHeader=X-Request-Foo,</span> <span class="string">Bar</span></span><br></pre></td></tr></table></figure>
<p>这将为所有匹配请求的下游请求标头添加<code>X-Request-Foo:Bar</code>标头。</p>
<h3 id="AddRequestParameter"><a href="#AddRequestParameter" class="headerlink" title="AddRequestParameter"></a>AddRequestParameter</h3><p>AddRequestParameter GatewayFilter Factory采用名称和值参数。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">add_request_parameter_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">AddRequestParameter=foo,</span> <span class="string">bar</span></span><br></pre></td></tr></table></figure>
<p>这将为所有匹配请求添加下游请求的查询字符串<code>foo=bar</code>。</p>
<h3 id="AddResponseHeader"><a href="#AddResponseHeader" class="headerlink" title="AddResponseHeader"></a>AddResponseHeader</h3><p>AddResponseHeader GatewayFilter Factory采用名称和值参数。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">add_response_header_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">AddResponseHeader=X-Response-Foo,</span> <span class="string">Bar</span></span><br></pre></td></tr></table></figure>
<h3 id="DedupeResponseHeader"><a href="#DedupeResponseHeader" class="headerlink" title="DedupeResponseHeader"></a>DedupeResponseHeader</h3><p>DedupeResponseHeader GatewayFilter Factory接受<code>name</code>参数和可选<code>strategy</code>参数。<code>name</code>可以包含标题名称列表，空格分隔。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">dedupe_response_header_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">DedupeResponseHeader=Access-Control-Allow-Credentials</span> <span class="string">Access-Control-Allow-Origin</span></span><br></pre></td></tr></table></figure>
<p>在网关CORS逻辑和下游添加它们的情况下，这将删除重复的值<code>Access-Control-Allow-Credentials</code>和<code>Access-Control-Allow-Origin</code>响应头。</p>
<p>DedupeResponseHeader过滤器还接受可选<code>strategy</code>参数。接受的值是<code>RETAIN_FIRST</code>（默认）、<code>RETAIN_LAST</code>和<code>RETAIN_UNIQUE</code>。</p>
<h3 id="Hystrix"><a href="#Hystrix" class="headerlink" title="Hystrix"></a>Hystrix</h3><p><a href="https://github.com/Netflix/Hystrix" target="_blank" rel="noopener">Hystrix</a>是Netflix的一个库，它实现了<a href="https://martinfowler.com/bliki/CircuitBreaker.html" target="_blank" rel="noopener">断路器模式</a>。Hystrix GatewayFilter允许您将断路器引入网关路由，保护您的服务免受级联故障的影响，并允许您在下游故障时提供回退响应。</p>
<p>要在项目中启用Hystrix GatewayFilters，请<code>spring-cloud-starter-netflix-hystrix</code>从<a href="https://cloud.spring.io/spring-cloud-netflix/" target="_blank" rel="noopener">Spring Cloud Netflix</a>添加依赖项。</p>
<p>Hystrix GatewayFilter Factory需要一个<code>name</code>参数，即该参数的名称<code>HystrixCommand</code>。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">hystrix_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Hystrix=myCommandName</span></span><br></pre></td></tr></table></figure>
<p>这将<code>HystrixCommand</code>使用命令名称包装剩余的过滤器<code>myCommandName</code>。</p>
<p>Hystrix过滤器也可以接受可选<code>fallbackUri</code>参数。目前，仅<code>forward:</code>支持计划的URI。如果调用了回退，则请求将被转发到与URI匹配的控制器。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">hystrix_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">lb://backing-service:8088</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/consumingserviceendpoint</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">Hystrix</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">fallbackcmd</span></span><br><span class="line"><span class="attr">            fallbackUri:</span> <span class="attr">forward:/incaseoffailureusethis</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RewritePath=/consumingserviceendpoint,</span> <span class="string">/backingserviceendpoint</span></span><br></pre></td></tr></table></figure>
<p>这将<code>/incaseoffailureusethis</code>在调用Hystrix回退时转发到URI。请注意，此示例还通过<code>lb</code>目标URI 上的前缀演示（可选）Spring Cloud Netflix Ribbon负载平衡。</p>
<p>主要方案是使用<code>fallbackUri</code>网关应用程序中的内部控制器或处理程序。但是，也可以将请求重新路由到外部应用程序中的控制器或处理程序，如下所示：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">ingredients</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">lb://ingredients</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=//ingredients/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">Hystrix</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">fetchIngredients</span></span><br><span class="line"><span class="attr">            fallbackUri:</span> <span class="attr">forward:/fallback</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">ingredients-fallback</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://localhost:9994</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/fallback</span></span><br></pre></td></tr></table></figure>
<p>在此示例中，<code>fallback</code>网关应用程序中没有端点或处理程序，但是，在另一个应用程序中有一个，在其下注册<code>http://localhost:9994</code>。</p>
<p>如果请求被转发到回退，Hystrix网关过滤器也会提供<code>Throwable</code>导致它的原因。它被添加到<code>ServerWebExchange</code>作为<code>ServerWebExchangeUtils.HYSTRIX_EXECUTION_EXCEPTION_ATTR</code>在网关应用程序中处理回退时可以使用的 属性。</p>
<p>对于外部控制器/处理程序方案，可以添加包含异常详细信息的标头。您可以在<a href="https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#fallback-headers" target="_blank" rel="noopener">FallbackHeaders GatewayFilter Factory部分中</a>找到有关它的更多信息。</p>
<p>Hystrix设置（例如超时）可以使用全局默认值配置，也可以使用应用程序属性逐个路径配置，如<a href="https://github.com/Netflix/Hystrix/wiki/Configuration" target="_blank" rel="noopener">Hystrix wiki中所述</a>。</p>
<p>要为上面的示例路由设置5秒超时，将使用以下配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">hystrix.command.fallbackcmd.execution.isolation.thread.timeoutInMilliseconds:</span> <span class="number">5000</span></span><br></pre></td></tr></table></figure>
<h3 id="FallbackHeaders"><a href="#FallbackHeaders" class="headerlink" title="FallbackHeaders"></a>FallbackHeaders</h3><p>该<code>FallbackHeaders</code>工厂可以让你在转发到请求的头部添加猬执行异常的详细信息<code>fallbackUri</code>在以下情况下在外部应用程序，如：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">ingredients</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">lb://ingredients</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=//ingredients/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">Hystrix</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            name:</span> <span class="string">fetchIngredients</span></span><br><span class="line"><span class="attr">            fallbackUri:</span> <span class="attr">forward:/fallback</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">ingredients-fallback</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://localhost:9994</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/fallback</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">FallbackHeaders</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            executionExceptionTypeHeaderName:</span> <span class="string">Test-Header</span></span><br></pre></td></tr></table></figure>
<p>在此示例中，在运行执行异常后<code>HystrixCommand</code>，请求将被转发到<code>fallback</code>运行的应用程序中的端点或处理程序<code>localhost:9994</code>。具有异常类型，消息和-if available-root的标头将导致异常类型和消息被<code>FallbackHeaders</code>过滤器添加到该请求中。</p>
<p>通过设置下面列出的参数的值及其默认值，可以在配置中覆盖标头的名称：</p>
<ul>
<li><code>executionExceptionTypeHeaderName</code>（<code>&quot;Execution-Exception-Type&quot;</code>）</li>
<li><code>executionExceptionMessageHeaderName</code>（<code>&quot;Execution-Exception-Message&quot;</code>）</li>
<li><code>rootCauseExceptionTypeHeaderName</code>（<code>&quot;Root-Cause-Exception-Type&quot;</code>）</li>
<li><code>rootCauseExceptionMessageHeaderName</code>（<code>&quot;Root-Cause-Exception-Message&quot;</code>）</li>
</ul>
<p>您可以在<a href="https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#hystrix" target="_blank" rel="noopener">Hystrix GatewayFilter Factory部分中</a>找到有关Hystrix如何与Gateway配合使用的更多信息。</p>
<h3 id="PrefixPath"><a href="#PrefixPath" class="headerlink" title="PrefixPath"></a>PrefixPath</h3><p>PrefixPath GatewayFilter Factory采用单个<code>prefix</code>参数。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">prefixpath_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">PrefixPath=/mypath</span></span><br></pre></td></tr></table></figure>
<p>这将为<code>/mypath</code>所有匹配请求的路径添加前缀。所以请求<code>/hello</code>，将发送给<code>/mypath/hello</code>。</p>
<h3 id="PreserveHostHeader"><a href="#PreserveHostHeader" class="headerlink" title="PreserveHostHeader"></a>PreserveHostHeader</h3><p>PreserveHostHeader GatewayFilter Factory没有参数。此过滤器设置路由过滤器将检查的请求属性，以确定是否应发送原始主机头，而不是http客户端确定的主机头。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">preserve_host_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">PreserveHostHeader</span></span><br></pre></td></tr></table></figure>
<h3 id="RequestRateLimiter"><a href="#RequestRateLimiter" class="headerlink" title="RequestRateLimiter"></a>RequestRateLimiter</h3><p>RequestRateLimiter GatewayFilter Factory使用<code>RateLimiter</code>实现来确定是否允许当前请求继续。如果不是，<code>HTTP 429 - Too Many Requests</code>则返回（默认情况下）状态。</p>
<p>此过滤器采用<code>keyResolver</code>特定于速率限制器的可选参数和参数（参见下文）。</p>
<p><code>keyResolver</code>是一个实现<code>KeyResolver</code>接口的bean 。在配置中，使用SpEL按名称引用bean。<code>#{@myKeyResolver}</code>是一个引用具有名称的bean的SpEL表达式<code>myKeyResolver</code>。</p>
<p><strong>KeyResolver.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">KeyResolver</span> </span>&#123;</span><br><span class="line">	<span class="function">Mono&lt;String&gt; <span class="title">resolve</span><span class="params">(ServerWebExchange exchange)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该<code>KeyResolver</code>接口允许可插拔策略导出用于限制请求的密钥。在未来的里程碑中，将会有一些<code>KeyResolver</code>实现。</p>
<p>默认实现<code>KeyResolver</code>是从和调用中<code>PrincipalNameKeyResolver</code>检索。<code>Principal`</code>ServerWebExchange<code></code>Principal.getName()`</p>
<p>默认情况下，如果<code>KeyResolver</code>找不到密钥，将拒绝请求。可以使用<code>spring.cloud.gateway.filter.request-rate-limiter.deny-empty-key</code>（true或false）和<code>spring.cloud.gateway.filter.request-rate-limiter.empty-key-status-code</code>属性调整此行为。</p>
<blockquote>
<p>RequestRateLimiter不能通过“快捷方式”表示法进行配置。以下示例<em>无效</em></p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#INVALID SHORTCUT CONFIGURATION spring.cloud.gateway.routes [0] .filters [0] = RequestRateLimiter = 2,2，＃&#123;@ userkeyresolver&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="Redis-RateLimiter"><a href="#Redis-RateLimiter" class="headerlink" title="Redis RateLimiter"></a>Redis RateLimiter</h3><p>redis实现基于<a href="https://stripe.com/blog/rate-limiters" target="_blank" rel="noopener">Stripe</a>完成的工作。它需要使用<code>spring-boot-starter-data-redis-reactive</code>Spring Boot启动器。</p>
<p>使用的算法是<a href="https://en.wikipedia.org/wiki/Token_bucket" target="_blank" rel="noopener">令牌桶算法</a>。</p>
<p>这<code>redis-rate-limiter.replenishRate</code>是您希望允许用户每秒执行多少请求，而不会丢弃任何请求。这是令牌桶填充的速率。</p>
<p>这<code>redis-rate-limiter.burstCapacity</code>是用户在一秒钟内允许执行的最大请求数。这是令牌桶可以容纳的令牌数。将此值设置为零将阻止所有请求。</p>
<p>通过在<code>replenishRate</code>和中设置相同的值来实现稳定的速率<code>burstCapacity</code>。设置<code>burstCapacity</code>高于时，可以允许临时突发<code>replenishRate</code>。在这种情况下，需要在突发之间允许速率限制器一段时间（根据<code>replenishRate</code>），因为2次连续突发将导致请求被丢弃（<code>HTTP 429 - Too Many Requests</code>）。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">requestratelimiter_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">RequestRateLimiter</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line">            <span class="string">redis-rate-limiter.replenishRate:</span> <span class="number">10</span></span><br><span class="line">            <span class="string">redis-rate-limiter.burstCapacity:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>
<p><strong>Config.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function">KeyResolver <span class="title">userKeyResolver</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> exchange -&gt; Mono.just(exchange.getRequest().getQueryParams().getFirst(<span class="string">"user"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这定义了每个用户10的请求率限制。允许突发20，但下一秒只有10个请求可用。这<code>KeyResolver</code>是一个获取<code>user</code>请求参数的简单方法（注意：这不建议用于生产）。</p>
<p>速率限制器也可以定义为实现<code>RateLimiter</code>接口的bean 。在配置中，使用SpEL按名称引用bean。<code>#{@myRateLimiter}</code>是一个引用具有名称的bean的SpEL表达式<code>myRateLimiter</code>。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">requestratelimiter_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">RequestRateLimiter</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            rate-limiter:</span> <span class="string">"#&#123;@myRateLimiter&#125;"</span></span><br><span class="line"><span class="attr">            key-resolver:</span> <span class="string">"#&#123;@userKeyResolver&#125;"</span></span><br></pre></td></tr></table></figure>
<h3 id="RedirectTo"><a href="#RedirectTo" class="headerlink" title="RedirectTo"></a>RedirectTo</h3><p>RedirectTo GatewayFilter Factory采用a <code>status</code>和<code>url</code>参数。状态应该是300系列重定向http代码，例如301. url应该是有效的URL。这将是<code>Location</code>标题的值。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">prefixpath_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RedirectTo=302,</span> <span class="attr">http://acme.org</span></span><br></pre></td></tr></table></figure>
<p>这将发送带有<code>Location:http://acme.org</code>标题的状态302 以执行重定向。</p>
<h3 id="RemoveHopByHopHeadersFilter"><a href="#RemoveHopByHopHeadersFilter" class="headerlink" title="RemoveHopByHopHeadersFilter"></a>RemoveHopByHopHeadersFilter</h3><p>RemoveHopByHopHeadersFilter GatewayFilter Factory从转发的请求中删除标头。删除的标头列表来自<a href="https://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-14#section-7.1.3" target="_blank" rel="noopener">IETF</a>。</p>
<p>默认删除的标头是：</p>
<ul>
<li>Connection</li>
<li>Keep-Alive</li>
<li>Proxy-Authenticate</li>
<li>Proxy-Authorization</li>
<li>TE</li>
<li>Trailer</li>
<li>Transfer-Encoding</li>
<li>Upgrade</li>
</ul>
<p>要更改此设置，请将该<code>spring.cloud.gateway.filter.remove-non-proxy-headers.headers</code>属性设置为要删除的标题名称列表。</p>
<h3 id="RemoveRequestHeader"><a href="#RemoveRequestHeader" class="headerlink" title="RemoveRequestHeader"></a>RemoveRequestHeader</h3><p>RemoveRequestHeader GatewayFilter Factory接受一个<code>name</code>参数。它是要删除的标头的名称。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">removerequestheader_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RemoveRequestHeader=X-Request-Foo</span></span><br></pre></td></tr></table></figure>
<p>这将在向下游发送之前删除标头<code>X-Request-Foo</code>。</p>
<h3 id="RemoveResponseHeader"><a href="#RemoveResponseHeader" class="headerlink" title="RemoveResponseHeader"></a>RemoveResponseHeader</h3><p>RemoveResponseHeader GatewayFilter Factory接受一个<code>name</code>参数。它是要删除的标头的名称。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">removeresponseheader_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RemoveResponseHeader=X-Response-Foo</span></span><br></pre></td></tr></table></figure>
<p>这将<code>X-Response-Foo</code>在响应返回到网关客户端之前从响应中删除标头。</p>
<p>要删除任何类型的敏感标头，您应该为您可能要执行此操作的任何路由配置此过滤器。此外，您可以使用一次配置此过滤器<code>spring.cloud.gateway.default-filters</code> 并将其应用于所有路径。</p>
<h3 id="RewritePath"><a href="#RewritePath" class="headerlink" title="RewritePath"></a>RewritePath</h3><p>RewritePath GatewayFilter Factory采用路径<code>regexp</code>参数和<code>replacement</code>参数。这使用Java正则表达式来灵活地重写请求路径。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">rewritepath_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/foo/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RewritePath=/foo/(?&lt;segment&gt;.*),</span> <span class="string">/$\&#123;segment&#125;</span></span><br></pre></td></tr></table></figure>
<p>对于请求路径<code>/foo/bar</code>，这将设置<code>/bar</code>进行下游请求之前的路径。注意由于YAML规范而将<code>$\</code>替换<code>$</code>。</p>
<h3 id="RewriteResponseHeader"><a href="#RewriteResponseHeader" class="headerlink" title="RewriteResponseHeader"></a>RewriteResponseHeader</h3><p>RewriteResponseHeader GatewayFilter工厂需要<code>name</code>，<code>regexp</code>和<code>replacement</code>参数。它使用Java正则表达式以灵活的方式重写响应头值。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">rewriteresponseheader_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">RewriteResponseHeader=X-Response-Foo,</span> <span class="string">,</span> <span class="string">password=[^&amp;]+,</span> <span class="string">password=***</span></span><br></pre></td></tr></table></figure>
<p>对于标头值<code>/42?user=ford&amp;password=omg!what&amp;flag=true</code>，它将在发出下游请求后设置为<code>/42?user=ford&amp;password=***&amp;flag=true</code>。由于YAML规范，请用<code>$\</code>替换<code>$</code>。</p>
<h3 id="SaveSession"><a href="#SaveSession" class="headerlink" title="SaveSession"></a>SaveSession</h3><p>SaveSession GatewayFilter Factory <em>在</em>转发下游呼叫<em>之前</em>强制执行<code>WebSession::save</code>操作。当使用<a href="https://projects.spring.io/spring-session/" target="_blank" rel="noopener">Spring Session</a>与惰性数据存储之类的东西时，这是特别有用的，并且需要确保在转发调用之前已保存会话状态。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">save_session</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/foo/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SaveSession</span></span><br></pre></td></tr></table></figure>
<p>如果要将<a href="https://projects.spring.io/spring-security/" target="_blank" rel="noopener">Spring Security</a>与Spring Session 集成，并且希望确保将安全性详细信息转发到远程进程，则这很关键。</p>
<h3 id="SecureHeaders"><a href="#SecureHeaders" class="headerlink" title="SecureHeaders"></a>SecureHeaders</h3><p>SecureHeaders GatewayFilter Factory在<a href="https://blog.appcanary.com/2017/http-security-headers.html" target="_blank" rel="noopener">此博客文章</a>的推荐中为响应添加了许多标题。</p>
<p>添加以下标头（以及默认值）：</p>
<ul>
<li><code>X-Xss-Protection:1; mode=block</code></li>
<li><code>Strict-Transport-Security:max-age=631138519</code></li>
<li><code>X-Frame-Options:DENY</code></li>
<li><code>X-Content-Type-Options:nosniff</code></li>
<li><code>Referrer-Policy:no-referrer</code></li>
<li><code>Content-Security-Policy:default-src &#39;self&#39; https:; font-src &#39;self&#39; https: data:; img-src &#39;self&#39; https: data:; object-src &#39;none&#39;; script-src https:; style-src &#39;self&#39; https: &#39;unsafe-inline&#39;</code></li>
<li><code>X-Download-Options:noopen</code></li>
<li><code>X-Permitted-Cross-Domain-Policies:none</code></li>
</ul>
<p>要更改默认值，请在<code>spring.cloud.gateway.filter.secure-headers</code>命名空间中设置相应的属性：</p>
<p>要改变的属性：</p>
<ul>
<li><code>xss-protection-header</code></li>
<li><code>strict-transport-security</code></li>
<li><code>frame-options</code></li>
<li><code>content-type-options</code></li>
<li><code>referrer-policy</code></li>
<li><code>content-security-policy</code></li>
<li><code>download-options</code></li>
<li><code>permitted-cross-domain-policies</code></li>
</ul>
<h3 id="SetPath"><a href="#SetPath" class="headerlink" title="SetPath"></a>SetPath</h3><p>SetPath GatewayFilter Factory采用路径<code>template</code>参数。它提供了一种通过允许模板化路径段来操作请求路径的简单方法。这使用了Spring Framework中的uri模板。允许多个匹配的段。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setpath_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/foo/&#123;segment&#125;</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetPath=/&#123;segment&#125;</span></span><br></pre></td></tr></table></figure>
<p>对于请求路径<code>/foo/bar</code>，这将设置<code>/bar</code>进行下游请求之前的路径。</p>
<h3 id="SetResponseHeader"><a href="#SetResponseHeader" class="headerlink" title="SetResponseHeader"></a>SetResponseHeader</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setresponseheader_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetResponseHeader=X-Response-Foo,</span> <span class="string">Bar</span></span><br></pre></td></tr></table></figure>
<p>GatewayFilter用给定名称替换所有标头，而不是添加。因此，如果下游服务器以响应<code>X-Response-Foo:1234</code>，则将替换为<code>X-Response-Foo:Bar</code>，这是网关客户端将接收的内容。</p>
<h3 id="SetStatus"><a href="#SetStatus" class="headerlink" title="SetStatus"></a>SetStatus</h3><p>SetStatus GatewayFilter Factory采用单个<code>status</code>参数。它必须是有效的Spring <code>HttpStatus</code>。它可以是整数值<code>404</code>或枚举的字符串表示形式<code>NOT_FOUND</code>。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setstatusstring_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetStatus=BAD_REQUEST</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setstatusint_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetStatus=401</span></span><br></pre></td></tr></table></figure>
<p>在任何一种情况下，响应的HTTP状态都将设置为401。</p>
<h3 id="StripPrefix"><a href="#StripPrefix" class="headerlink" title="StripPrefix"></a>StripPrefix</h3><p>StripPrefix GatewayFilter Factory采用一个参数<code>parts</code>。该<code>parts</code>参数指示在向下游发送之前从请求中剥离的路径中的部分数。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">nameRoot</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://nameservice</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/name/**</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">StripPrefix=2</span></span><br></pre></td></tr></table></figure>
<p>当通过网关<code>/name/bar/foo</code>发出请求时，<code>nameservice</code>会发出请求<code>http://nameservice/foo</code>。</p>
<h3 id="Retry"><a href="#Retry" class="headerlink" title="Retry"></a>Retry</h3><p>Retry GatewayFilter 工厂采用<code>retries</code>，<code>statuses</code>，<code>methods</code>，和<code>series</code>作为参数。</p>
<ul>
<li><code>retries</code>：应尝试的重试次数</li>
<li><code>statuses</code>：应使用重试的HTTP状态代码 <code>org.springframework.http.HttpStatus</code></li>
<li><code>methods</code>：应该重试的HTTP方法，使用表示 <code>org.springframework.http.HttpMethod</code></li>
<li><code>series</code>：要重试的一系列状态代码，使用表示 <code>org.springframework.http.HttpStatus.Series</code></li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">retry_test</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://localhost:8080/flakey</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Host=*.retry.com</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">Retry</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            retries:</span> <span class="number">3</span></span><br><span class="line"><span class="attr">            statuses:</span> <span class="string">BAD_GATEWAY</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>重试过滤器当前不支持使用正文重试（例如，对于带有正文的POST或PUT请求）。</p>
</blockquote>
<blockquote>
<p>当使用带有<code>forward:</code>前缀URL 的重试过滤器时，应仔细编写目标端点，以便在出现错误时不会执行任何可能导致响应发送到客户端并提交的操作。例如，如果目标端点是带注释的控制器，则目标控制器方法不应返回<code>ResponseEntity</code>错误状态代码。相反，它应该抛出一个<code>Exception</code>或发出错误信号，例如通过<code>Mono.error(ex)</code>返回值，重试过滤器可以配置为通过重试来处理。</p>
</blockquote>
<h3 id="RequestSize"><a href="#RequestSize" class="headerlink" title="RequestSize"></a>RequestSize</h3><p>当请求大小大于允许的限制时，RequestSize GatewayFilter Factory可以限制请求到达下游服务。过滤器<code>RequestSize</code>作为参数，该参数是以字节为单位定义的请求的允许大小限制。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">request_size_route</span></span><br><span class="line"><span class="attr">      uri:</span> <span class="attr">http://localhost:8080/upload</span></span><br><span class="line"><span class="attr">      predicates:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">Path=/upload</span></span><br><span class="line"><span class="attr">      filters:</span></span><br><span class="line"><span class="attr">      - name:</span> <span class="string">RequestSize</span></span><br><span class="line"><span class="attr">        args:</span></span><br><span class="line"><span class="attr">          maxSize:</span> <span class="number">5000000</span></span><br></pre></td></tr></table></figure>
<p>当Request因大小而被拒绝时，RequestSize GatewayFilter Factory将响应状态设置为<code>413 Payload Too Large</code>附加标头<code>errorMessage</code>。以下是这样的一个例子<code>errorMessage</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">errorMessage ： Request size is larger than permissible limit. Request size is 6.0 MB where permissible limit is 5.0 MB</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果未在路由定义中将过滤参数提供，则默认请求大小将设置为5 MB。</p>
</blockquote>
<h3 id="Modify-Request-Body"><a href="#Modify-Request-Body" class="headerlink" title="Modify Request Body"></a>Modify Request Body</h3><p><strong>此过滤器被视为BETA，API可能在将来发生变化</strong></p>
<p>此过滤器可用于在网关向下游发送请求主体之前对其进行修改。</p>
<blockquote>
<p>此过滤器只能使用Java DSL进行配置</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RouteLocator <span class="title">routes</span><span class="params">(RouteLocatorBuilder builder)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> builder.routes()</span><br><span class="line">        .route(<span class="string">"rewrite_request_obj"</span>, r -&gt; r.host(<span class="string">"*.rewriterequestobj.org"</span>)</span><br><span class="line">            .filters(f -&gt; f.prefixPath(<span class="string">"/httpbin"</span>)</span><br><span class="line">                .modifyRequestBody(String.class, Hello.class, MediaType.APPLICATION_JSON_VALUE,</span><br><span class="line">                    (exchange, s) -&gt; <span class="keyword">return</span> Mono.just(<span class="keyword">new</span> Hello(s.toUpperCase())))).uri(uri))</span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Hello</span> </span>&#123;</span><br><span class="line">    String message;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Hello</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Hello</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Modify-Response-Body"><a href="#Modify-Response-Body" class="headerlink" title="Modify Response Body"></a>Modify Response Body</h3><p><strong>此过滤器被视为BETA，API可能在将来发生变化</strong></p>
<p>此过滤器可用于在将响应主体发送回客户端之前对其进行修改。</p>
<blockquote>
<p>此过滤器只能使用Java DSL进行配置</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RouteLocator <span class="title">routes</span><span class="params">(RouteLocatorBuilder builder)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> builder.routes()</span><br><span class="line">        .route(<span class="string">"rewrite_response_upper"</span>, r -&gt; r.host(<span class="string">"*.rewriteresponseupper.org"</span>)</span><br><span class="line">            .filters(f -&gt; f.prefixPath(<span class="string">"/httpbin"</span>)</span><br><span class="line">        		.modifyResponseBody(String.class, String.class,</span><br><span class="line">        		    (exchange, s) -&gt; Mono.just(s.toUpperCase()))).uri(uri)</span><br><span class="line">        .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Default-Filters"><a href="#Default-Filters" class="headerlink" title="Default Filters"></a>Default Filters</h3><p>如果您想添加过滤器并将其应用于您可以使用的所有路线<code>spring.cloud.gateway.default-filters</code>。此属性采用过滤器列表</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      default-filters:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">AddResponseHeader=X-Response-Default-Foo,</span> <span class="string">Default-Bar</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">PrefixPath=/httpbin</span></span><br></pre></td></tr></table></figure>
<h2 id="Global-Filters"><a href="#Global-Filters" class="headerlink" title="Global Filters"></a>Global Filters</h2><p>该<code>GlobalFilter</code>接口具有相同的签名<code>GatewayFilter</code>。这些是有条件地应用于所有路线的特殊过滤器。（此界面和用法可能会在未来的里程碑中发生变化）。</p>
<h3 id="组合全局过滤器和GatewayFilter排序"><a href="#组合全局过滤器和GatewayFilter排序" class="headerlink" title="组合全局过滤器和GatewayFilter排序"></a>组合全局过滤器和GatewayFilter排序</h3><p>当请求进入（并匹配路由）时，Filtering Web Handler会将所有实例<code>GlobalFilter</code>和所有路由特定实例添加<code>GatewayFilter</code>到过滤器链中。这个组合的过滤器链按<code>org.springframework.core.Ordered</code>接口排序，可以通过实现<code>getOrder()</code>方法或使用<code>@Order</code>注释来设置。</p>
<p>由于Spring Cloud Gateway区分了过滤器逻辑执行的“前”和“后”阶段（请参阅：工作原理），具有最高优先级的过滤器将是“pre”阶段中的第一个和“post”中的最后一个“-相。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Order</span>(-<span class="number">1</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> GlobalFilter <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (exchange, chain) -&gt; &#123;</span><br><span class="line">        log.info(<span class="string">"first pre filter"</span>);</span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123;</span><br><span class="line">            log.info(<span class="string">"third post filter"</span>);</span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Order</span>(<span class="number">0</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> GlobalFilter <span class="title">b</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (exchange, chain) -&gt; &#123;</span><br><span class="line">        log.info(<span class="string">"second pre filter"</span>);</span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123;</span><br><span class="line">            log.info(<span class="string">"second post filter"</span>);</span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Order</span>(<span class="number">1</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> GlobalFilter <span class="title">c</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (exchange, chain) -&gt; &#123;</span><br><span class="line">        log.info(<span class="string">"third pre filter"</span>);</span><br><span class="line">        <span class="keyword">return</span> chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123;</span><br><span class="line">            log.info(<span class="string">"first post filter"</span>);</span><br><span class="line">        &#125;));</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Forward-Routing-Filter"><a href="#Forward-Routing-Filter" class="headerlink" title="Forward Routing Filter"></a>Forward Routing Filter</h3><p>将<code>ForwardRoutingFilter</code>在交换属性查找一个URI <code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code>。如果url有一个<code>forward</code>方案（即<code>forward:///localendpoint</code>），它将使用Spring <code>DispatcherHandler</code>来处理请求。请求URL的路径部分将被转发URL中的路径覆盖。未修改的原始URL将附加到<code>ServerWebExchangeUtils.GATEWAY_ORIGINAL_REQUEST_URL_ATTR</code>属性中的列表中。</p>
<h3 id="LoadBalancerClient过滤器"><a href="#LoadBalancerClient过滤器" class="headerlink" title="LoadBalancerClient过滤器"></a>LoadBalancerClient过滤器</h3><p>将<code>LoadBalancerClientFilter</code>在交换属性查找一个URI <code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code>。如果url有一个<code>lb</code>方案（即<code>lb://myservice</code>），它将使用Spring Cloud <code>LoadBalancerClient</code>将名称（<code>myservice</code>在前面的示例中）解析为实际的主机和端口，并替换相同属性中的URI。未修改的原始URL将附加到<code>ServerWebExchangeUtils.GATEWAY_ORIGINAL_REQUEST_URL_ATTR</code>属性中的列表中。过滤器还将查看<code>ServerWebExchangeUtils.GATEWAY_SCHEME_PREFIX_ATTR</code>属性以查看它是否等于<code>lb</code>，然后应用相同的规则。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">myRoute</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">lb://service</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/service/**</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>默认情况下，当某个服务实例不能在找到<code>LoadBalancer</code>一个<code>503</code>将被退回。您可以将网关配置为<code>404</code>按设置返回<code>spring.cloud.gateway.loadbalancer.use404=true</code>。</p>
</blockquote>
<blockquote>
<p>从中返回 的<code>isSecure</code>值将覆盖在对网关发出的请求中指定的方案。例如，如果请求进入网关， 但表示它不安全，则下游请求将被终止 。相反的情况也适用。但是，如果为网关配置中的路由指定，则将剥离前缀，并且路由URL中的结果方案将覆盖配置。 <code>ServiceInstance</code> <code>LoadBalancer</code> <code>HTTPS</code> <code>ServiceInstance</code> <code>HTTP</code> <code>GATEWAY_SCHEME_PREFIX_ATTR</code> <code>ServiceInstance</code></p>
</blockquote>
<h3 id="Netty-Routing-Filter"><a href="#Netty-Routing-Filter" class="headerlink" title="Netty Routing Filter"></a>Netty Routing Filter</h3><p>如果位于<code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code>exchange属性中的url 具有<code>http</code>或<code>https</code>scheme ，则运行Netty Routing Filter 。它使用Netty <code>HttpClient</code>发出下游代理请求。响应将放在<code>ServerWebExchangeUtils.CLIENT_RESPONSE_ATTR</code>exchange属性中，以便在以后的过滤器中使用。（有一个实验<code>WebClientHttpRoutingFilter</code>执行相同的功能，但不需要netty）</p>
<h3 id="Netty-Write-Response-Filter"><a href="#Netty-Write-Response-Filter" class="headerlink" title="Netty Write Response Filter"></a>Netty Write Response Filter</h3><p>在<code>NettyWriteResponseFilter</code>运行，如果有一个的Netty <code>HttpClientResponse</code>在<code>ServerWebExchangeUtils.CLIENT_RESPONSE_ATTR</code>交换属性。它在所有其他过滤器完成后运行，并将代理响应写回网关客户端响应。（有一个实验<code>WebClientWriteResponseFilter</code>执行相同的功能，但不需要netty）</p>
<h3 id="RouteToRequestUrl过滤器"><a href="#RouteToRequestUrl过滤器" class="headerlink" title="RouteToRequestUrl过滤器"></a>RouteToRequestUrl过滤器</h3><p>在<code>RouteToRequestUrlFilter</code>运行，如果有一个<code>Route</code>在对象<code>ServerWebExchangeUtils.GATEWAY_ROUTE_ATTR</code>交换属性。它根据请求URI创建一个新URI，但使用该<code>Route</code>对象的URI属性进行更新。新URI放在<code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code>exchange属性`中。</p>
<p>如果URI具有方案前缀，例如<code>lb:ws://serviceid</code>，该<code>lb</code>方案将从URI中剥离并放置在<code>ServerWebExchangeUtils.GATEWAY_SCHEME_PREFIX_ATTR</code>稍后用于过滤器链中。</p>
<h3 id="Websocket路由过滤器"><a href="#Websocket路由过滤器" class="headerlink" title="Websocket路由过滤器"></a>Websocket路由过滤器</h3><p>如果位于<code>ServerWebExchangeUtils.GATEWAY_REQUEST_URL_ATTR</code>exchange属性中的url 具有<code>ws</code>或<code>wss</code>scheme ，则运行Websocket路由过滤器。它使用Spring Web Socket基础结构将Websocket请求转发到下游。</p>
<p>可以通过为URI添加前缀来对Websockets进行负载平衡<code>lb</code>，例如<code>lb:ws://serviceid</code>。</p>
<blockquote>
<p>如果您使用<a href="https://github.com/sockjs" target="_blank" rel="noopener">SockJS</a>作为普通http的后备，则应配置正常的HTTP路由以及Websocket路由。</p>
</blockquote>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line">      <span class="comment"># SockJS route</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">websocket_sockjs_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://localhost:3001</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/websocket/info/**</span></span><br><span class="line">      <span class="comment"># Normwal Websocket route</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">websocket_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">ws://localhost:3001</span></span><br><span class="line"><span class="attr">        predicates:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">Path=/websocket/**</span></span><br></pre></td></tr></table></figure>
<h3 id="Gateway-Metrics-Filter"><a href="#Gateway-Metrics-Filter" class="headerlink" title="Gateway Metrics Filter"></a>Gateway Metrics Filter</h3><p>要启用Gateway Metrics，请将spring-boot-starter-actuator添加为项目依赖项。然后，默认情况下，只要<code>spring.cloud.gateway.metrics.enabled</code>未将属性设置为，网关指标筛选器就会运行<code>false</code>。此过滤器添加名为“gateway.requests”的计时器度量标准，其中包含以下标记：</p>
<ul>
<li><code>routeId</code>：路由ID</li>
<li><code>routeUri</code>：API将路由到的URI</li>
<li><code>outcome</code>：由<a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/HttpStatus.Series.html" target="_blank" rel="noopener">HttpStatus.Series</a>分类的结果</li>
<li><code>status</code>：请求的Http状态返回给客户端</li>
</ul>
<p>然后可以从这些指标中<a href="https://cloud.spring.io/spring-cloud-gateway/images/gateway-grafana-dashboard.jpeg" target="_blank" rel="noopener">删除</a>这些指标，<code>/actuator/metrics/gateway.requests</code>并且可以轻松地与Prometheus <a href="https://cloud.spring.io/spring-cloud-gateway/images/gateway-grafana-dashboard.jpeg" target="_blank" rel="noopener">集成</a> 以创建<a href="https://cloud.spring.io/spring-cloud-gateway/images/gateway-grafana-dashboard.jpeg" target="_blank" rel="noopener">Grafana </a><a href="https://cloud.spring.io/spring-cloud-gateway/gateway-grafana-dashboard.json" target="_blank" rel="noopener">仪表板</a>。</p>
<blockquote>
<p>要启用pometheus端点，请将micrometer-registry-prometheus添加为项目依赖项。</p>
</blockquote>
<h3 id="Marking-An-Exchange-As-Routed"><a href="#Marking-An-Exchange-As-Routed" class="headerlink" title="Marking An Exchange As Routed"></a>Marking An Exchange As Routed</h3><p>在网关路由后<code>ServerWebExchange</code>，它将通过添加<code>gatewayAlreadyRouted</code> 到交换属性将该交换标记为“路由” 。一旦请求被标记为路由，其他路由过滤器将不会再次路由请求，实质上是跳过过滤器。您可以使用便捷方法将交换标记为路由，或检查交换是否已路由。</p>
<ul>
<li><code>ServerWebExchangeUtils.isAlreadyRouted</code>获取一个<code>ServerWebExchange</code>对象并检查它是否已被“路由”</li>
<li><code>ServerWebExchangeUtils.setAlreadyRouted</code>获取一个<code>ServerWebExchange</code>对象并将其标记为“路由”</li>
</ul>
<h2 id="TLS-SSL"><a href="#TLS-SSL" class="headerlink" title="TLS / SSL"></a>TLS / SSL</h2><p>网关可以通过遵循通常的Spring服务器配置来监听https上的请求。例：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  ssl:</span></span><br><span class="line"><span class="attr">    enabled:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    key-alias:</span> <span class="string">scg</span></span><br><span class="line"><span class="attr">    key-store-password:</span> <span class="string">scg1234</span></span><br><span class="line"><span class="attr">    key-store:</span> <span class="attr">classpath:scg-keystore.p12</span></span><br><span class="line"><span class="attr">    key-store-type:</span> <span class="string">PKCS12</span></span><br></pre></td></tr></table></figure>
<p>网关路由可以路由到http和https后端。如果路由到https后端，则可以将网关配置为信任具有以下配置的所有下游证书：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      httpclient:</span></span><br><span class="line"><span class="attr">        ssl:</span></span><br><span class="line"><span class="attr">          useInsecureTrustManager:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>使用不安全的信任管理器不适合生产。对于生产部署，可以使用以下配置为Gateway配置一组可信任的已知证书：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      httpclient:</span></span><br><span class="line"><span class="attr">        ssl:</span></span><br><span class="line"><span class="attr">          trustedX509Certificates:</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">cert1.pem</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">cert2.pem</span></span><br></pre></td></tr></table></figure>
<p>如果Spring Cloud Gateway未配置受信任证书，则使用默认信任库（可以使用系统属性javax.net.ssl.trustStore覆盖）。</p>
<h3 id="TLS-Handshake"><a href="#TLS-Handshake" class="headerlink" title="TLS Handshake"></a>TLS Handshake</h3><p>网关维护一个客户端池，用于路由到后端。通过https进行通信时，客户端会启动TLS握手。此握手与许多超时有关。可以配置这些超时（显示默认值）：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      httpclient:</span></span><br><span class="line"><span class="attr">        ssl:</span></span><br><span class="line"><span class="attr">          handshake-timeout-millis:</span> <span class="number">10000</span></span><br><span class="line"><span class="attr">          close-notify-flush-timeout-millis:</span> <span class="number">3000</span></span><br><span class="line"><span class="attr">          close-notify-read-timeout-millis:</span> <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>Spring Cloud Gateway的配置由<code>RouteDefinitionLocator</code>s的集合驱动。</p>
<p><strong>RouteDefinitionLocator.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">RouteDefinitionLocator</span> </span>&#123;</span><br><span class="line">	<span class="function">Flux&lt;RouteDefinition&gt; <span class="title">getRouteDefinitions</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>默认情况下，<code>PropertiesRouteDefinitionLocator</code>使用Spring Boot的<code>@ConfigurationProperties</code>机制加载属性。</p>
<p>上面的配置示例都使用了一个使用位置参数而不是命名参数的快捷符号。以下两个例子是等效的：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      routes:</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setstatus_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="attr">        - name:</span> <span class="string">SetStatus</span></span><br><span class="line"><span class="attr">          args:</span></span><br><span class="line"><span class="attr">            status:</span> <span class="number">401</span></span><br><span class="line"><span class="attr">      - id:</span> <span class="string">setstatusshortcut_route</span></span><br><span class="line"><span class="attr">        uri:</span> <span class="attr">http://example.org</span></span><br><span class="line"><span class="attr">        filters:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="string">SetStatus=401</span></span><br></pre></td></tr></table></figure>
<p>对于网关的一些用法，属性是足够的，但是一些生产用例将受益于从外部源（例如数据库）加载配置。未来的里程碑版本将<code>RouteDefinitionLocator</code>基于Spring Data Repositories实现，例如：Redis，MongoDB和Cassandra。</p>
<h3 id="流畅的Java-Routes-API"><a href="#流畅的Java-Routes-API" class="headerlink" title="流畅的Java Routes API"></a>流畅的Java Routes API</h3><p>为了允许在Java中进行简单配置，在<code>RouteLocatorBuilder</code>bean中定义了一个流畅的API 。</p>
<p><strong>GatewaySampleApplication.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// static imports from GatewayFilters and RoutePredicates</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> RouteLocator <span class="title">customRouteLocator</span><span class="params">(RouteLocatorBuilder builder, ThrottleGatewayFilterFactory throttle)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> builder.routes()</span><br><span class="line">            .route(r -&gt; r.host(<span class="string">"**.abc.org"</span>).and().path(<span class="string">"/image/png"</span>)</span><br><span class="line">                .filters(f -&gt;</span><br><span class="line">                        f.addResponseHeader(<span class="string">"X-TestHeader"</span>, <span class="string">"foobar"</span>))</span><br><span class="line">                .uri(<span class="string">"http://httpbin.org:80"</span>)</span><br><span class="line">            )</span><br><span class="line">            .route(r -&gt; r.path(<span class="string">"/image/webp"</span>)</span><br><span class="line">                .filters(f -&gt;</span><br><span class="line">                        f.addResponseHeader(<span class="string">"X-AnotherHeader"</span>, <span class="string">"baz"</span>))</span><br><span class="line">                .uri(<span class="string">"http://httpbin.org:80"</span>)</span><br><span class="line">            )</span><br><span class="line">            .route(r -&gt; r.order(-<span class="number">1</span>)</span><br><span class="line">                .host(<span class="string">"**.throttle.org"</span>).and().path(<span class="string">"/get"</span>)</span><br><span class="line">                .filters(f -&gt; f.filter(throttle.apply(<span class="number">1</span>,</span><br><span class="line">                        <span class="number">1</span>,</span><br><span class="line">                        <span class="number">10</span>,</span><br><span class="line">                        TimeUnit.SECONDS)))</span><br><span class="line">                .uri(<span class="string">"http://httpbin.org:80"</span>)</span><br><span class="line">            )</span><br><span class="line">            .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此样式还允许更多自定义谓词断言。<code>RouteDefinitionLocator</code>bean 定义的谓词使用逻辑组合<code>and</code>。通过使用流利的Java API，你可以使用<code>and()</code>，<code>or()</code>并且<code>negate()</code>对运营<code>Predicate</code>类。</p>
<h3 id="DiscoveryClient路由定义定位器"><a href="#DiscoveryClient路由定义定位器" class="headerlink" title="DiscoveryClient路由定义定位器"></a>DiscoveryClient路由定义定位器</h3><p>可以将网关配置为基于使用<code>DiscoveryClient</code>兼容服务注册表注册的服务来创建路由。</p>
<p>要启用此功能，请设置<code>spring.cloud.gateway.discovery.locator.enabled=true</code>并确保<code>DiscoveryClient</code>实现位于类路径上并启用（例如Netflix Eureka，Consul或Zookeeper）。</p>
<h3 id="配置DiscoveryClient路由的谓词和过滤器"><a href="#配置DiscoveryClient路由的谓词和过滤器" class="headerlink" title="配置DiscoveryClient路由的谓词和过滤器"></a>配置DiscoveryClient路由的谓词和过滤器</h3><p>默认情况下，网关为通过a创建的路由定义单个谓词和过滤器<code>DiscoveryClient</code>。</p>
<p>默认谓词是使用模式定义的路径谓词<code>/serviceId/**</code>，其中<code>serviceId</code>是来自的服务的id <code>DiscoveryClient</code>。</p>
<p>默认过滤器是带有正则表达式<code>/serviceId/(?&lt;remaining&gt;.*)</code>和替换的 重写路径过滤器<code>/${remaining}</code>。这只是在向下游发送请求之前从路径中剥离服务ID。</p>
<p>如果您想自定义<code>DiscoveryClient</code>路由使用的谓词和/或过滤器，可以通过设置<code>spring.cloud.gateway.discovery.locator.predicates[x]</code>和来自定义<code>spring.cloud.gateway.discovery.locator.filters[y]</code>。执行此操作时，如果要保留该功能，则需要确保包含上面的默认谓词和过滤器。下面是一个这样的例子。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spring.cloud.gateway.discovery.locator.predicates[0].name: Path</span><br><span class="line">spring.cloud.gateway.discovery.locator.predicates[0].args[pattern]: &quot;&apos;/&apos;+serviceId+&apos;/**&apos;&quot;</span><br><span class="line">spring.cloud.gateway.discovery.locator.predicates[1].name: Host</span><br><span class="line">spring.cloud.gateway.discovery.locator.predicates[1].args[pattern]: &quot;&apos;**.foo.com&apos;&quot;</span><br><span class="line">spring.cloud.gateway.discovery.locator.filters[0].name: Hystrix</span><br><span class="line">spring.cloud.gateway.discovery.locator.filters[0].args[name]: serviceId</span><br><span class="line">spring.cloud.gateway.discovery.locator.filters[1].name: RewritePath</span><br><span class="line">spring.cloud.gateway.discovery.locator.filters[1].args[regexp]: &quot;&apos;/&apos; + serviceId + &apos;/(?&lt;remaining&gt;.*)&apos;&quot;</span><br><span class="line">spring.cloud.gateway.discovery.locator.filters[1].args[replacement]: &quot;&apos;/$&#123;remaining&#125;&apos;&quot;</span><br></pre></td></tr></table></figure>
<h2 id="Reactor-Netty访问日志"><a href="#Reactor-Netty访问日志" class="headerlink" title="Reactor Netty访问日志"></a>Reactor Netty访问日志</h2><p>要启用Reactor Netty访问日志，请进行设置<code>-Dreactor.netty.http.server.accessLogEnabled=true</code>。（它必须是Java System属性，而不是Spring Boot属性）。</p>
<p>可以将日志记录系统配置为具有单独的访问日志文件。以下是一个示例logback配置：</p>
<p><strong>logback.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"accessLog"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.FileAppender"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">file</span>&gt;</span>access_log.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"async"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.AsyncAppender"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"accessLog"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"reactor.netty.http.server.AccessLog"</span> <span class="attr">level</span>=<span class="string">"INFO"</span> <span class="attr">additivity</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"async"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">logger</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="CORS配置"><a href="#CORS配置" class="headerlink" title="CORS配置"></a>CORS配置</h2><p>网关可以配置为控制CORS行为。“全局”CORS配置是<a href="https://docs.spring.io/spring/docs/5.0.x/javadoc-api/org/springframework/web/cors/CorsConfiguration.html" target="_blank" rel="noopener">Spring Framework<code>CorsConfiguration</code></a>的URL模式映射。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  cloud:</span></span><br><span class="line"><span class="attr">    gateway:</span></span><br><span class="line"><span class="attr">      globalcors:</span></span><br><span class="line"><span class="attr">        corsConfigurations:</span></span><br><span class="line">          <span class="string">'[/**]'</span><span class="string">:</span></span><br><span class="line"><span class="attr">            allowedOrigins:</span> <span class="string">"http://docs.spring.io"</span></span><br><span class="line"><span class="attr">            allowedMethods:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">GET</span></span><br></pre></td></tr></table></figure>
<p>在上面的示例中，对于所有GET请求的路径，将允许来自docs.spring.io的请求的CORS请求。</p>
<h2 id="Actuator-API"><a href="#Actuator-API" class="headerlink" title="Actuator API"></a>Actuator API</h2><p>该<code>/gateway</code>驱动器的端点允许监视和使用Spring的云网关应用程序进行交互。要进行远程访问，必须在应用程序属性中<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints" target="_blank" rel="noopener">通过HTTP或JMX </a><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-enabling-endpoints" target="_blank" rel="noopener">启用</a>和<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints" target="_blank" rel="noopener">公开</a>端点。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">management.endpoint.gateway.enabled=true # default value</span><br><span class="line">management.endpoints.web.exposure.include=gateway</span><br></pre></td></tr></table></figure>
<h3 id="检索路由过滤器"><a href="#检索路由过滤器" class="headerlink" title="检索路由过滤器"></a>检索路由过滤器</h3><h4 id="全球过滤器"><a href="#全球过滤器" class="headerlink" title="全球过滤器"></a>全球过滤器</h4><p>要检索应用于所有路由的全局过滤器，请发出GET请求/actuator/gateway/globalfilters。结果响应类似于以下内容：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"org.springframework.cloud.gateway.filter.LoadBalancerClientFilter@77856cc5"</span>: <span class="number">10100</span>,</span><br><span class="line">  <span class="attr">"org.springframework.cloud.gateway.filter.RouteToRequestUrlFilter@4f6fd101"</span>: <span class="number">10000</span>,</span><br><span class="line">  <span class="attr">"org.springframework.cloud.gateway.filter.NettyWriteResponseFilter@32d22650"</span>: <span class="number">-1</span>,</span><br><span class="line">  <span class="attr">"org.springframework.cloud.gateway.filter.ForwardRoutingFilter@106459d9"</span>: <span class="number">2147483647</span>,</span><br><span class="line">  <span class="attr">"org.springframework.cloud.gateway.filter.NettyRoutingFilter@1fbd5e0"</span>: <span class="number">2147483647</span>,</span><br><span class="line">  <span class="attr">"org.springframework.cloud.gateway.filter.ForwardPathFilter@33a71d23"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">"org.springframework.cloud.gateway.filter.AdaptCachedBodyGlobalFilter@135064ea"</span>: <span class="number">2147483637</span>,</span><br><span class="line">  <span class="attr">"org.springframework.cloud.gateway.filter.WebsocketRoutingFilter@23c05889"</span>: <span class="number">2147483646</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>响应包含有关全局过滤器的详细信息。对于每个全局过滤器，提供过滤器对象的字符串表示（例如<code>org.springframework.cloud.gateway.filter.LoadBalancerClientFilter@77856cc5</code>）和过滤器链中的对应<a href="https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#_combined_global_filter_and_gatewayfilter_ordering" target="_blank" rel="noopener">顺序</a>。</p>
<h4 id="Route过滤器"><a href="#Route过滤器" class="headerlink" title="Route过滤器"></a>Route过滤器</h4><p>要检索应用于路由的<a href="https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#gatewayfilter-factories" target="_blank" rel="noopener">GatewayFilter工厂</a>，请发出<code>GET</code>请求<code>/actuator/gateway/routefilters</code>。结果响应类似于以下内容：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"[AddRequestHeaderGatewayFilterFactory@570ed9c configClass = AbstractNameValueGatewayFilterFactory.NameValueConfig]"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"[SecureHeadersGatewayFilterFactory@fceab5d configClass = Object]"</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">"[SaveSessionGatewayFilterFactory@4449b273 configClass = Object]"</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>响应包含应用于任何特定路由的GatewayFilter工厂的详细信息。为每个工厂提供相应对象的字符串表示（例如<code>[SecureHeadersGatewayFilterFactory@fceab5d configClass = Object]</code>）。请注意，该<code>null</code>值是由于端点控制器的实现不完整，因为它尝试设置过滤器链中对象的顺序，这不适用于GatewayFilter工厂对象。</p>
<h3 id="刷新路由缓存"><a href="#刷新路由缓存" class="headerlink" title="刷新路由缓存"></a>刷新路由缓存</h3><p>要清除路由缓存，请发出<code>POST</code>请求<code>/actuator/gateway/refresh</code>。请求返回200没有响应正文</p>
<h3 id="检索网关中定义的路由"><a href="#检索网关中定义的路由" class="headerlink" title="检索网关中定义的路由"></a>检索网关中定义的路由</h3><p>要检索网关中定义的路由，请发出<code>GET</code>请求<code>/actuator/gateway/routes</code>。结果响应类似于以下内容：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">  <span class="attr">"route_id"</span>: <span class="string">"first_route"</span>,</span><br><span class="line">  <span class="attr">"route_object"</span>: &#123;</span><br><span class="line">    <span class="attr">"predicate"</span>: <span class="string">"org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory$$Lambda$432/1736826640@1e9d7e7d"</span>,</span><br><span class="line">    <span class="attr">"filters"</span>: [</span><br><span class="line">      <span class="string">"OrderedGatewayFilter&#123;delegate=org.springframework.cloud.gateway.filter.factory.PreserveHostHeaderGatewayFilterFactory$$Lambda$436/674480275@6631ef72, order=0&#125;"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"order"</span>: <span class="number">0</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">"route_id"</span>: <span class="string">"second_route"</span>,</span><br><span class="line">  <span class="attr">"route_object"</span>: &#123;</span><br><span class="line">    <span class="attr">"predicate"</span>: <span class="string">"org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory$$Lambda$432/1736826640@cd8d298"</span>,</span><br><span class="line">    <span class="attr">"filters"</span>: []</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"order"</span>: <span class="number">0</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<p>响应包含网关中定义的所有路由的详细信息。下表描述了响应的每个元素（即路由）的结构。</p>
<table>
<thead>
<tr>
<th style="text-align:center">路径</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">route_id</td>
<td style="text-align:center">String</td>
<td style="text-align:center">路由ID</td>
</tr>
<tr>
<td style="text-align:center">route_object.predicate</td>
<td style="text-align:center">Object</td>
<td style="text-align:center">路由断言</td>
</tr>
<tr>
<td style="text-align:center">route_object.filters</td>
<td style="text-align:center">Array</td>
<td style="text-align:center">该<a href="https://cloud.spring.io/spring-cloud-gateway/spring-cloud-gateway.html#gatewayfilter-factories" target="_blank" rel="noopener">GatewayFilter工厂</a>工厂使用的路由</td>
</tr>
<tr>
<td style="text-align:center">order</td>
<td style="text-align:center">Number</td>
<td style="text-align:center">路由顺序</td>
</tr>
</tbody>
</table>
<h3 id="检索有关特定路线的信息"><a href="#检索有关特定路线的信息" class="headerlink" title="检索有关特定路线的信息"></a>检索有关特定路线的信息</h3><p>要检索有关单个路径的信息，<code>GET</code>请向<code>/actuator/gateway/routes/{id}</code>（例如<code>/actuator/gateway/routes/first_route</code>）发出请求。结果响应类似于以下内容：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"id"</span>: <span class="string">"first_route"</span>,</span><br><span class="line">  <span class="attr">"predicates"</span>: [&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"Path"</span>,</span><br><span class="line">    <span class="attr">"args"</span>: &#123;<span class="attr">"_genkey_0"</span>:<span class="string">"/first"</span>&#125;</span><br><span class="line">  &#125;],</span><br><span class="line">  <span class="attr">"filters"</span>: [],</span><br><span class="line">  <span class="attr">"uri"</span>: <span class="string">"http://www.uri-destination.org"</span>,</span><br><span class="line">  <span class="attr">"order"</span>: <span class="number">0</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<p>下表描述了响应的结构：</p>
<table>
<thead>
<tr>
<th style="text-align:center">路径</th>
<th style="text-align:center">类型</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>id</code></td>
<td style="text-align:center">String</td>
<td style="text-align:center">路由ID</td>
</tr>
<tr>
<td style="text-align:center"><code>predicates</code></td>
<td style="text-align:center">Array</td>
<td style="text-align:center">路由断言的集合。每个项目定义给定断言的名称和参数</td>
</tr>
<tr>
<td style="text-align:center"><code>filters</code></td>
<td style="text-align:center">Array</td>
<td style="text-align:center">应用于路径的过滤器集合</td>
</tr>
<tr>
<td style="text-align:center"><code>uri</code></td>
<td style="text-align:center">String</td>
<td style="text-align:center">路由的目标URI</td>
</tr>
<tr>
<td style="text-align:center"><code>order</code></td>
<td style="text-align:center">Number</td>
<td style="text-align:center">路由顺序</td>
</tr>
</tbody>
</table>
<h3 id="创建和删除特定路线"><a href="#创建和删除特定路线" class="headerlink" title="创建和删除特定路线"></a>创建和删除特定路线</h3><p>要创建路由，<code>POST</code>请<code>/gateway/routes/{id_route_to_create}</code>使用指定路径字段的JSON主体发出请求（请参阅上一小节）。</p>
<p>要删除路线，请发出<code>DELETE</code>请求<code>/gateway/routes/{id_route_to_delete}</code>。</p>
<h3 id="回顾：所有端点的列表"><a href="#回顾：所有端点的列表" class="headerlink" title="回顾：所有端点的列表"></a>回顾：所有端点的列表</h3><p>下表总结了Spring Cloud Gateway执行器端点。请注意，每个端点都具有<code>/actuator/gateway</code>基本路径。</p>
<table>
<thead>
<tr>
<th style="text-align:center">ID</th>
<th style="text-align:center">HTTP方法</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>globalfilters</code></td>
<td style="text-align:center">GET</td>
<td style="text-align:center">显示应用于路径的全局过滤器列表</td>
</tr>
<tr>
<td style="text-align:center"><code>routefilters</code></td>
<td style="text-align:center">GET</td>
<td style="text-align:center">显示应用于特定路由的GatewayFilter工厂列表</td>
</tr>
<tr>
<td style="text-align:center"><code>refresh</code></td>
<td style="text-align:center">POST</td>
<td style="text-align:center">清除路由缓存</td>
</tr>
<tr>
<td style="text-align:center"><code>routes</code></td>
<td style="text-align:center">GET</td>
<td style="text-align:center">显示网关中定义的路由列表</td>
</tr>
<tr>
<td style="text-align:center"><code>routes/{id}</code></td>
<td style="text-align:center">GET</td>
<td style="text-align:center">显示有关特定路径的信息</td>
</tr>
<tr>
<td style="text-align:center"><code>routes/{id}</code></td>
<td style="text-align:center">POST</td>
<td style="text-align:center">添加到网关的新路由</td>
</tr>
<tr>
<td style="text-align:center"><code>routes/{id}</code></td>
<td style="text-align:center">DELETE</td>
<td style="text-align:center">从网关中删除现有路由</td>
</tr>
</tbody>
</table>
<h2 id="开发者指南"><a href="#开发者指南" class="headerlink" title="开发者指南"></a>开发者指南</h2><p>TODO：编写自定义集成的概述</p>
<h3 id="编写自定义路由断言工厂"><a href="#编写自定义路由断言工厂" class="headerlink" title="编写自定义路由断言工厂"></a>编写自定义路由断言工厂</h3><p>TODO：撰写Custom Route Predicate Factories的文档</p>
<h3 id="编写自定义GatewayFilter工厂"><a href="#编写自定义GatewayFilter工厂" class="headerlink" title="编写自定义GatewayFilter工厂"></a>编写自定义GatewayFilter工厂</h3><p>要编写GatewayFilter，您需要实现<code>GatewayFilterFactory</code>。有一个<code>AbstractGatewayFilterFactory</code>可以扩展的抽象类：</p>
<p><strong>PreGatewayFilterFactory.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PreGatewayFilterFactory</span> <span class="keyword">extends</span> <span class="title">AbstractGatewayFilterFactory</span>&lt;<span class="title">PreGatewayFilterFactory</span>.<span class="title">Config</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PreGatewayFilterFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(Config.class);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> GatewayFilter <span class="title">apply</span><span class="params">(Config config)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// grab configuration from Config object</span></span><br><span class="line">		<span class="keyword">return</span> (exchange, chain) -&gt; &#123;</span><br><span class="line">            <span class="comment">//If you want to build a "pre" filter you need to manipulate the</span></span><br><span class="line">            <span class="comment">//request before calling chain.filter</span></span><br><span class="line">            ServerHttpRequest.Builder builder = exchange.getRequest().mutate();</span><br><span class="line">            <span class="comment">//use builder to manipulate the request</span></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange.mutate().request(request).build());</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Put the configuration properties for your filter here</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>PostGatewayFilterFactory.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PostGatewayFilterFactory</span> <span class="keyword">extends</span> <span class="title">AbstractGatewayFilterFactory</span>&lt;<span class="title">PostGatewayFilterFactory</span>.<span class="title">Config</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PostGatewayFilterFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(Config.class);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> GatewayFilter <span class="title">apply</span><span class="params">(Config config)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// grab configuration from Config object</span></span><br><span class="line">		<span class="keyword">return</span> (exchange, chain) -&gt; &#123;</span><br><span class="line">			<span class="keyword">return</span> chain.filter(exchange).then(Mono.fromRunnable(() -&gt; &#123;</span><br><span class="line">				ServerHttpResponse response = exchange.getResponse();</span><br><span class="line">				<span class="comment">//Manipulate the response in some way</span></span><br><span class="line">			&#125;));</span><br><span class="line">		&#125;;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Config</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Put the configuration properties for your filter here</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="编写定制全局过滤器"><a href="#编写定制全局过滤器" class="headerlink" title="编写定制全局过滤器"></a>编写定制全局过滤器</h3><p>要编写自定义全局过滤器，您需要实现<code>GlobalFilter</code>接口。这将过滤器应用于所有请求。</p>
<p>分别如何设置全局前置和后置过滤器的示例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> GlobalFilter <span class="title">customGlobalFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (exchange, chain) -&gt; exchange.getPrincipal()</span><br><span class="line">        .map(Principal::getName)</span><br><span class="line">        .defaultIfEmpty(<span class="string">"Default User"</span>)</span><br><span class="line">        .map(userName -&gt; &#123;</span><br><span class="line">          <span class="comment">//adds header to proxied request</span></span><br><span class="line">          exchange.getRequest().mutate().header(<span class="string">"CUSTOM-REQUEST-HEADER"</span>, userName).build();</span><br><span class="line">          <span class="keyword">return</span> exchange;</span><br><span class="line">        &#125;)</span><br><span class="line">        .flatMap(chain::filter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> GlobalFilter <span class="title">customGlobalPostFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (exchange, chain) -&gt; chain.filter(exchange)</span><br><span class="line">        .then(Mono.just(exchange))</span><br><span class="line">        .map(serverWebExchange -&gt; &#123;</span><br><span class="line">          <span class="comment">//adds header to response</span></span><br><span class="line">          serverWebExchange.getResponse().getHeaders().set(<span class="string">"CUSTOM-RESPONSE-HEADER"</span>,</span><br><span class="line">              HttpStatus.OK.equals(serverWebExchange.getResponse().getStatusCode()) ? <span class="string">"It worked"</span>: <span class="string">"It did not work"</span>);</span><br><span class="line">          <span class="keyword">return</span> serverWebExchange;</span><br><span class="line">        &#125;)</span><br><span class="line">        .then();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="编写自定义路由定位器和写入器"><a href="#编写自定义路由定位器和写入器" class="headerlink" title="编写自定义路由定位器和写入器"></a>编写自定义路由定位器和写入器</h3><p>TODO：编写自定义路由定位器和写入器的文档</p>
<h2 id="使用Spring-MVC或Webflux构建简单网关"><a href="#使用Spring-MVC或Webflux构建简单网关" class="headerlink" title="使用Spring MVC或Webflux构建简单网关"></a>使用Spring MVC或Webflux构建简单网关</h2><p>Spring Cloud Gateway提供了一个实用程序对象<code>ProxyExchange</code>，可以在常规Spring Web处理程序中将其用作方法参数。它通过镜像HTTP谓词的方法支持基本的下游HTTP交换。使用MVC，它还支持通过该<code>forward()</code>方法转发到本地处理程序。要<code>ProxyExchange</code>在类路径中使用恰好包含正确的模块（<code>spring-cloud-gateway-mvc</code>或者<code>spring-cloud-gateway-webflux</code>）。</p>
<p>MVC示例（代理向远程服务器下游“/test”的请求）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GatewaySampleApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"$&#123;remote.home&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> URI home;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line">	<span class="keyword">public</span> ResponseEntity&lt;?&gt; proxy(ProxyExchange&lt;<span class="keyword">byte</span>[]&gt; proxy) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		<span class="keyword">return</span> proxy.uri(home.toString() + <span class="string">"/image/png"</span>).get();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Webflux也是如此：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GatewaySampleApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Value</span>(<span class="string">"$&#123;remote.home&#125;"</span>)</span><br><span class="line">	<span class="keyword">private</span> URI home;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line">	<span class="keyword">public</span> Mono&lt;ResponseEntity&lt;?&gt;&gt; proxy(ProxyExchange&lt;<span class="keyword">byte</span>[]&gt; proxy) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">		<span class="keyword">return</span> proxy.uri(home.toString() + <span class="string">"/image/png"</span>).get();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>有一些方便的方法<code>ProxyExchange</code>可以使处理程序方法发现和增强传入请求的URI路径。例如，您可能希望提取路径的尾随元素以将其传递到下游：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/proxy/path/**"</span>)</span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;?&gt; proxyPath(ProxyExchange&lt;<span class="keyword">byte</span>[]&gt; proxy) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">  String path = proxy.path(<span class="string">"/proxy/path/"</span>);</span><br><span class="line">  <span class="keyword">return</span> proxy.uri(home.toString() + <span class="string">"/foos/"</span> + path).get();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Spring MVC或Webflux的所有功能都可用于Gateway处理程序方法。例如，您可以注入请求标头和查询参数，并且您可以使用映射注释中的声明来约束传入的请求。有关<code>@RequestMapping</code>这些功能的更多详细信息，请参阅Spring MVC中的文档。</p>
<p>可以使用<code>header()</code>方法将标头添加到下游响应中<code>ProxyExchange</code>。</p>
<p>您还可以通过向<code>get()</code>etc方法添加映射器来操作响应标头（以及响应中您喜欢的任何其他内容）。映射器是一个<code>Function</code>接收传入<code>ResponseEntity</code>并将其转换为传出映射器的映射器。</p>
<p>为“敏感”标题（默认情况下为“cookie”和“授权”）提供了第一类支持，这些标题未传递到下游，而“代理”标题（<code>x-forwarded-*</code>）也是如此。</p>
</div></div><a class="button-hover more" href="/2019/03/26/基于2.2.x的SpringCloudGateway/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/25/SpringBoot整合Security/">SpringBoot整合Security</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-25</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/security/">security</a></div></div><div class="post-content"><div class="main-content content"><p>入门</p>
<p>本指南将引导您完成使用受Spring Security保护的资源创建简单Web应用程序的过程。</p>
<h2 id="创建不安全的Web应用程序"><a href="#创建不安全的Web应用程序" class="headerlink" title="创建不安全的Web应用程序"></a>创建不安全的Web应用程序</h2><p>在将安全性应用于Web应用程序之前，您需要一个Web应用程序来保护安全。本节中的步骤将指导您创建一个非常简单的Web应用程序。然后在下一节中使用Spring Security保护它。</p>
<p>Web应用程序包括两个简单视图：主页和“Hello World”页面。主页在以下Thymeleaf模板中定义：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:sec</span>=<span class="string">"http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Spring Security Example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Welcome!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Click <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">"@&#123;/hello&#125;"</span>&gt;</span>here<span class="tag">&lt;/<span class="name">a</span>&gt;</span> to see a greeting.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如您所见，这个简单的视图包含指向页面“/ hello”的链接。这在以下Thymeleaf模板中定义：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:sec</span>=<span class="string">"http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Web应用程序基于Spring MVC。因此，您需要配置Spring MVC并设置视图控制器以公开这些模板。这是在应用程序中配置Spring MVC的配置类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.learn.security.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YoungDream</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2019/3/25 21:46</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMvcConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurationSupport</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> </span>&#123;</span><br><span class="line">        registry.addViewController(<span class="string">"/"</span>).setViewName(<span class="string">"home"</span>);</span><br><span class="line">        registry.addViewController(<span class="string">"/home"</span>).setViewName(<span class="string">"home"</span>);</span><br><span class="line">        registry.addViewController(<span class="string">"/hello"</span>).setViewName(<span class="string">"hello"</span>);</span><br><span class="line">        registry.addViewController(<span class="string">"/login"</span>).setViewName(<span class="string">"login"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该<code>addViewControllers()</code>方法（覆盖同名方法<code>WebMvcConfigurer</code>）添加了四个视图控制器。其中两个视图控制器引用名称为“home”（定义于<code>home.html</code>）的视图，另一个引用名为“hello”（定义于<code>hello.html</code>）的视图。第四个视图控制器引用另一个名为“login”的视图。您将在下一部分中创建该视图。</p>
<p>此时，您可以跳转到<em>使应用程序可执行</em>并运行应用程序而无需登录任何内容。</p>
<p>通过创建基本简单Web应用程序，您可以为其添加安全性。</p>
<h2 id="设置Spring-Security"><a href="#设置Spring-Security" class="headerlink" title="设置Spring Security"></a>设置Spring Security</h2><p>使用Maven，这将是一个额外的条目添加到<code>&lt;dependencies&gt;</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是一个安全配置，可确保只有经过身份验证的用户才能看到秘密问候语：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.learn.security.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.factory.PasswordEncoderFactories;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.provisioning.InMemoryUserDetailsManager;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> YoungDream</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2019/3/25 21:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http.authorizeRequests()</span><br><span class="line">                .antMatchers(<span class="string">"/"</span>, <span class="string">"/home"</span>).permitAll()</span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">                .and()</span><br><span class="line">                .formLogin().loginPage(<span class="string">"/login"</span>).permitAll()</span><br><span class="line">                .and()</span><br><span class="line">                .logout()</span><br><span class="line">                .permitAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> UserDetailsService <span class="title">userDetailsService</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        PasswordEncoder passwordEncoder = PasswordEncoderFactories.createDelegatingPasswordEncoder();</span><br><span class="line">        String password = passwordEncoder.encode(<span class="string">"password"</span>);</span><br><span class="line">        <span class="comment">//记住打印出来的密码并在下一步中使用</span></span><br><span class="line">        System.out.println(password);</span><br><span class="line">        <span class="comment">//这里需要注意User.withDefaultPasswordEncoder()被弃用</span></span><br><span class="line">        UserDetails userDetails = User.withUsername(<span class="string">"user"</span>).password(password).roles(<span class="string">"USER"</span>).build();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> InMemoryUserDetailsManager(userDetails);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本<code>WebSecurityConfig</code>类与注释<code>@EnableWebSecurity</code>，使Spring Security的网络安全支持，并提供了Spring MVC的整合。它还扩展<code>WebSecurityConfigurerAdapter</code>并覆盖了其几种方法，以设置Web安全配置的一些细节。</p>
<p>该<code>configure(HttpSecurity)</code>方法定义了哪些URL路径应该被保护，哪些不应该被保护。具体而言，“/”和“/ home”路径配置为不需要任何身份验证。必须对所有其他路径进行身份验证。</p>
<p>当用户成功登录时，它们将被重定向到先前请求的身份验证页面。有一个自定义的“/ login”页面<code>loginPage()</code>，每个人都可以查看它。</p>
<p>至于该<code>userDetailsService()</code>方法，它使用单个用户设置内存中用户存储。该用户被赋予用户名“user”，密码为“password”，角色为“USER”。</p>
<p>现在我们需要创建登录页面。“登录”视图已有一个视图控制器，因此您只需创建登录视图本身：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Spring Security Example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;param.error&#125;"</span>&gt;</span></span><br><span class="line">        Invalid username and password.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;param.logout&#125;"</span>&gt;</span></span><br><span class="line">        You have been logged out.</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">"@&#123;/login&#125;"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span> User Name : <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>/&gt;</span> <span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">label</span>&gt;</span> Password: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span> <span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Sign In"</span>/&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如您所见，此Thymeleaf模板只显示一个表单，该表单捕获用户名和密码并将其发布到“/ login”。根据配置，Spring Security提供了一个拦截该请求并对用户进行身份验证的过滤器。如果用户无法进行身份验证，页面将重定向到“/ login？error”，我们的页面将显示相应的错误消息。成功注销后，我们的应用程序将发送到“/ login？logout”，我们的页面会显示相应的成功消息。</p>
<p>最后，我们需要为用户提供显示当前用户名和注销的方法。更新为<code>hello.html</code>当前用户打招呼并包含“注销”表单，如下所示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh"</span> <span class="attr">xmlns:th</span>=<span class="string">"http://www.thymeleaf.org"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:sec</span>=<span class="string">"http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:inline</span>=<span class="string">"text"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;'Hello '+#httpServletRequest.remoteUser+' !'&#125;"</span>&gt;</span>Hello [[$&#123;#httpServletRequest.remoteUser&#125;]]!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">"@&#123;/logout&#125;"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Sign Out"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>我们使用Spring Security的集成显示用户名<code>HttpServletRequest#getRemoteUser()</code>。“注销”表单将“POST”发送到“/logout”。成功注销后，它会将用户重定向到“/ login？logout”。</p>
<p>最后为了方便，我们将端口号设置为 <code>80</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">  port:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure>
<p>启动程序发现Security的HelloWorld完成了…</p>
</div></div><a class="button-hover more" href="/2019/03/25/SpringBoot整合Security/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/25/Mappr中的n-n关系/">Mybatis中的n-n关系</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-25</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/mybatis/">mybatis</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/association/">association</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/collection/">collection</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/discrimination/">discrimination</a></div></div><div class="post-content"><div class="main-content content"><h1 id="Mybatis中的级联关系"><a href="#Mybatis中的级联关系" class="headerlink" title="Mybatis中的级联关系"></a>Mybatis中的级联关系</h1><ul>
<li>association 一对一</li>
<li>collection 一对多</li>
<li>discrimination 多对多</li>
</ul>
<h2 id="asscociation"><a href="#asscociation" class="headerlink" title="asscociation"></a>asscociation</h2><p>我们模拟一个场景</p>
<p>一个学生有姓名，年龄，住址等等</p>
<p>Student类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> Student&#123;</span><br><span class="line">    <span class="keyword">private</span> Long studentNo;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而这里的住址又包括省、市、区</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> Address&#123;</span><br><span class="line">    <span class="keyword">private</span> Long addressNo;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String area;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><p>多表级联查询不使用<code>association</code>标签</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"Student"</span> <span class="attr">id</span>=<span class="string">"studentResult"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"studentNo"</span> <span class="attr">column</span>=<span class="string">"student_no"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"age"</span> <span class="attr">column</span>=<span class="string">"age"</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 直接赋值 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address.addressNo"</span> <span class="attr">column</span>=<span class="string">"a_no"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address.province"</span> <span class="attr">column</span>=<span class="string">"province"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address.city"</span> <span class="attr">column</span>=<span class="string">"city"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"address.area"</span> <span class="attr">column</span>=<span class="string">"area"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>查询语句</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findStudentWithAddress"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">resultMap</span>=<span class="string">"studentResult"</span> </span></span><br><span class="line"><span class="tag">        <span class="attr">parameterType</span>=<span class="string">"Integer"</span>&gt;</span></span><br><span class="line">	select * from t_student t1,t_address t2 where t1.a_no=t2.address_no and t1.student_no=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这种方式采用的是对象方式的级联操作不太好，因为每一次查询都要把所有的属性列在那里，并且修改的时候要全部修改，所以很不方便，尽量模块化</p>
</li>
<li><p>多表级联查询使用<code>association</code>标签</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"Student"</span> <span class="attr">id</span>=<span class="string">"StudentResult"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"studentNo"</span> <span class="attr">column</span>=<span class="string">"student_no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"age"</span> <span class="attr">column</span>=<span class="string">"age"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"address"</span> <span class="attr">javaType</span>=<span class="string">"Address"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"addressNo"</span> <span class="attr">column</span>=<span class="string">"address_no"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"province"</span> <span class="attr">column</span>=<span class="string">"province"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"city"</span> <span class="attr">column</span>=<span class="string">"city"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"area"</span> <span class="attr">column</span>=<span class="string">"area"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>单表查询(N+1的问题)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"Student"</span> <span class="attr">id</span>=<span class="string">"StudentResult"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"studentNo"</span> <span class="attr">column</span>=<span class="string">"student_no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"age"</span> <span class="attr">column</span>=<span class="string">"age"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"address"</span> <span class="attr">javaType</span>=<span class="string">"Student"</span> <span class="attr">column</span>=<span class="string">"a_no"</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">selete</span>=<span class="string">"getAddress"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 不一定在同一XML文件中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getAddress"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"Student"</span>&gt;</span></span><br><span class="line">    select * from t_address where address_no=#&#123;_parameter&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这里的<code>selete</code>=<code>getAddress</code>也可以是<code>packageName.xxxMapper.selectID</code></p>
<p>不用sql联合查询，通过<code>association</code>的延迟加载来实现:</p>
<p>​    什么是延迟加载？如果先查询订单信息即可满足业务要求就不会去查询用户，只有当用到用户信息时再查询用户信息。 对用户信息按需去查询就是延迟加载。<br>比如上面，只有当调用<code>Student</code>Bean中的<code>getAddress</code>方法获取关联的<code>address</code>数据时，才会触发数据库查询<code>t_address</code>表。</p>
<p><code>mybatis</code>默认没有开启延迟加载，需要在<code>SqlMapConfig.xml</code>中<code>setting</code>配置。<br><code>lazyLoadingEnabled</code>：全局性设置懒加载。如果设为<code>false</code>，则所有相关联的都会被初始化加载。</p>
<p>​                       允许值有：<code>true</code> | <code>false</code>。默认值：<code>false</code><br><code>aggressiveLazyLoading</code>：当设置为<code>true</code>的时候，懒加载的对象可能被任何懒属性全部加载。</p>
<p>​                       否则，每个属性都按需加载。允许值有：<code>true</code> | <code>false</code>。默认值：<code>true</code></p>
<p>事实上，大多数业务场景显示的表格，都会用到多个表字段。<br>如果采用延迟加载，会存在N+1问题。<br>什么是N+1问题呢？<br>每一个获取Order内部的User对象，都会进行一次select查询<br>那么当运行过程中执行Order的getList方法时，SQL首先进行1次查询，查询结果如果有N条订单记录，那么实际在每条订单中显示过程中还要运行一次select用户的查询，共n次。<br>SQL总共执行了n+1次。相比第二种方法的只进行一次联合查询，这种方式无疑是低效的。<br>如果业务场景的表格显示字段，并没有跨表，那么可以采用延迟加载方式</p>
</li>
</ol>
<h2 id="collection"><a href="#collection" class="headerlink" title="collection"></a>collection</h2><p>情景：一个班级有多个学生</p>
<p>班级表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`class`</span> (</span><br><span class="line">  <span class="string">`CLASS_ID`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`CLASS_NAME`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`CLASS_YEAR`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`TEACHER_ID`</span> <span class="built_in">int</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`CLASS_ID`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">2</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>
<p>学生表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`student`</span> (</span><br><span class="line">  <span class="string">`student_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`name`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`sex`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`age`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  <span class="string">`class_id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`student_id`</span>),</span><br><span class="line">  <span class="keyword">KEY</span> <span class="string">`class_id`</span> (<span class="string">`class_id`</span>),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> <span class="string">`class_id`</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> (<span class="string">`class_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`class`</span> (<span class="string">`CLASS_ID`</span>) <span class="keyword">ON</span> <span class="keyword">DELETE</span> <span class="keyword">NO</span> <span class="keyword">ACTION</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="keyword">NO</span> <span class="keyword">ACTION</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">3</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure>
<p>班级类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassEntity</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> classid;</span><br><span class="line">	<span class="keyword">private</span> String className;</span><br><span class="line">	<span class="keyword">private</span> String classYear;</span><br><span class="line">	<span class="keyword">private</span> Teacher teacher;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>学生类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> studentId;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> String sex;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>班级Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"包名.ClassMapper"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"classEntity"</span> <span class="attr">id</span>=<span class="string">"classResultMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"classid"</span> <span class="attr">column</span>=<span class="string">"CLASS_ID"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"className"</span> <span class="attr">column</span>=<span class="string">"CLASS_NAME"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"classYear"</span> <span class="attr">column</span>=<span class="string">"CLASS_YEAR"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"teacher"</span> <span class="attr">column</span>=<span class="string">"TEACHER_ID"</span> </span></span><br><span class="line"><span class="tag">                     <span class="attr">select</span>=<span class="string">"包名.TeacherMapper.getTeacher"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"students"</span> <span class="attr">column</span>=<span class="string">"class_id"</span> </span></span><br><span class="line"><span class="tag">                    <span class="attr">javaType</span>=<span class="string">"ArrayList"</span> <span class="attr">ofType</span>=<span class="string">"student"</span> </span></span><br><span class="line"><span class="tag">                    <span class="attr">select</span>=<span class="string">"包名.StudentMapper.getStudentByClassId"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getClass"</span> <span class="attr">parameterType</span>=<span class="string">"integer"</span> <span class="attr">resultMap</span>=<span class="string">"classResultMap"</span>&gt;</span></span><br><span class="line">		SELECT * FROM CLASS CT</span><br><span class="line">		WHERE CT.CLASS_ID = #&#123;id&#125;;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>学生Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"包名.StudentMapper"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"student"</span> <span class="attr">id</span>=<span class="string">"ResultMap"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">id</span> <span class="attr">property</span>=<span class="string">"studentId"</span> <span class="attr">column</span>=<span class="string">"STUDENT_ID"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"name"</span> <span class="attr">column</span>=<span class="string">"NAME"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"sex"</span> <span class="attr">column</span>=<span class="string">"sex"</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">"age"</span> <span class="attr">column</span>=<span class="string">"age"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getStudentByClassId"</span> <span class="attr">parameterType</span>=<span class="string">"integer"</span> <span class="attr">resultMap</span>=<span class="string">"ResultMap"</span>&gt;</span></span><br><span class="line">		SELECT * FROM Student CT</span><br><span class="line">		WHERE CT.CLASS_ID = #&#123;id&#125;;</span><br><span class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="使用方法和效率的比较："><a href="#使用方法和效率的比较：" class="headerlink" title="使用方法和效率的比较："></a>使用方法和效率的比较：</h3><ol>
<li><p>全使用单表查询</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"Student"</span> <span class="attr">id</span>=<span class="string">"StudentMap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"job"</span> <span class="attr">property</span>=<span class="string">"job"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"scores"</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">ofType</span>=<span class="string">"Score"</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">column</span>=<span class="string">"id"</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">select</span>=<span class="string">"queryScoresBySID"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"Score"</span> <span class="attr">id</span>=<span class="string">"ScoreMap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"num"</span> <span class="attr">property</span>=<span class="string">"num"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"subject"</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">javaType</span>=<span class="string">"Subject"</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">column</span>=<span class="string">"subject"</span> </span></span><br><span class="line"><span class="tag">                 <span class="attr">select</span>=<span class="string">"querySubjectBySubId"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudents"</span> <span class="attr">resultMap</span>=<span class="string">"StudentMap"</span> &gt;</span></span><br><span class="line">    SELECT id,name,job FROM t_student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryScoresBySID"</span> <span class="attr">resultMap</span>=<span class="string">"ScoreMap"</span>&gt;</span></span><br><span class="line">    SELECT id,num,subject FROM t_score WHERE sid = #&#123;sid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"querySubjectBySubId"</span> <span class="attr">resultType</span>=<span class="string">"Subject"</span> &gt;</span></span><br><span class="line">    SELECT id,name FROM t_subject where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用左连接进行多表查询</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">"Student"</span> <span class="attr">id</span>=<span class="string">"StudentMap2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"job"</span> <span class="attr">property</span>=<span class="string">"job"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">"scores"</span> <span class="attr">javaType</span>=<span class="string">"java.util.ArrayList"</span> <span class="attr">ofType</span>=<span class="string">"Score"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"num"</span> <span class="attr">property</span>=<span class="string">"num"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">"subject"</span> <span class="attr">javaType</span>=<span class="string">"Subject"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"name"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryStudents2"</span> <span class="attr">resultMap</span>=<span class="string">"StudentMap2"</span> &gt;</span></span><br><span class="line">    SELECT stu.id,stu.name name,stu.job,sco.id id,sco.num num,sub.id id,sub.name name</span><br><span class="line">    FROM t_student stu LEFT JOIN t_score sco ON stu.id = sco.sid LEFT JOIN t_subject sub ON sco.subject = sub.id</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>总结:</p>
<p>方案一：需要执行至少三次sql语句，开启三次事务才能完成本次请求。<br>方案二：只需要执行一次sql语句，开启一次事务就能完成本次请求</p>
<p>方案二比方案一的效率要高，但是在使用的时候，方案一的代码可重用性要高</p>
<p>如果追求代码重用性可以选择方案一<br>如果追求运行的性能可以选择方案二</p>
<h2 id="descrimination"><a href="#descrimination" class="headerlink" title="descrimination"></a>descrimination</h2><p>待续…</p>
</div></div><a class="button-hover more" href="/2019/03/25/Mappr中的n-n关系/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/23/Java11尝鲜/">Java11尝鲜</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-23</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/java/">java</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/java11/">java11</a></div></div><div class="post-content"><div class="main-content content"><h2 id="Java11新工具"><a href="#Java11新工具" class="headerlink" title="Java11新工具"></a>Java11新工具</h2><h3 id="JShell"><a href="#JShell" class="headerlink" title="JShell"></a>JShell</h3><p>​    用过Python的童鞋都知道读取-求值-打印循环(Read-Evaluation-Print Loop)很方便。他的目的在于以即时结果和反馈的形式。java9引入了JShell这个交互性工具，让Java也可以像脚本语言一样来运行，可以从控制台启动JShell，在JShell中直接输入表达式并查看其执行结果。当需要测试一个方法的运行效果或者是快速的对表达式进行求值时，JShell都十分方便。除了表达式之外，还可以创建 Java 类和方法。jshell 也有基本的代码完成功能。我们在教人们如何编写 Java 的过程中，不再需要解释 “public static void main（String [] args）” 这句废话。</p>
<h3 id="Dynamic-Class-File-Constants类文件新添的一种结构"><a href="#Dynamic-Class-File-Constants类文件新添的一种结构" class="headerlink" title="Dynamic Class-File Constants类文件新添的一种结构"></a>Dynamic Class-File Constants类文件新添的一种结构</h3><p>Java的类型文件格式将被拓展，支持一种新的常量池格式：CONSTANT_Dynamic，加载CONSTANT_Dynamic会将创建委托给bootstrap方法。</p>
<p>目的<br>其目的是降低开发新形式的可实现类文件约束带来的成本和干扰。</p>
<h3 id="局部变量类型推断（var-”关键字”）"><a href="#局部变量类型推断（var-”关键字”）" class="headerlink" title="局部变量类型推断（var ”关键字”）"></a>局部变量类型推断（var ”关键字”）</h3><p>什么是局部变量类型推断？</p>
<p>var javastack = “javastack”;<br>System.out.println(javastack);<br>大家看出来了，局部变量类型推断就是左边的类型直接使用 var 定义，而不用写具体的类型，编译器能根据右边的表达式自动推断类型，如上面的 String 。</p>
<p>var javastack = “javastack”;<br>就等于：<br>String javastack = “javastack”;</p>
<p>在声明隐式类型的lambda表达式的形参时允许使用var<br>使用var的好处是在使用lambda表达式时给参数加上注解<br>(@Deprecated var x, @Nullable var y) -&gt; x.process(y);</p>
<blockquote>
<p><strong>注意</strong>：</p>
<ol>
<li>var a; 这样不可以, 因为无法推断</li>
<li>类的属性的数据类型不可以使用var</li>
</ol>
<p><strong>有参数的lambda表达式使用</strong><br>函数式接口 :<br>    Consumer<t> : 消费型函数式接口.<br>        public void accept(T t);</t></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Consumer&lt;String&gt; consumer = t -&gt; System.out.println(t.toUpperCase());</span><br><span class="line">Consumer&lt;String&gt; consumer = (<span class="keyword">var</span> t) -&gt; System.out.println(t.toUpperCase());</span><br><span class="line"></span><br><span class="line"><span class="comment">//错误的形式: 必须要有类型, 可以加上var</span></span><br><span class="line">Consumer&lt;String&gt; consumer = (<span class="meta">@Deprecated</span> t) -&gt; System.out.println(t.toUpperCase());</span><br><span class="line"><span class="comment">//正确的形式:</span></span><br><span class="line">Consumer&lt;String&gt; consumer = (<span class="meta">@Deprecated</span> <span class="keyword">var</span> t) -&gt; System.out.println(t.toUpperCase());</span><br></pre></td></tr></table></figure>
<h2 id="Java11新API-实用"><a href="#Java11新API-实用" class="headerlink" title="Java11新API(实用)"></a>Java11新API(实用)</h2><h3 id="新的本机不可修改集合API"><a href="#新的本机不可修改集合API" class="headerlink" title="新的本机不可修改集合API"></a>新的本机不可修改集合API</h3><p>自 Java 9 开始，Jdk 里面为集合（List/ Set/ Map）都添加了 of 和 copyOf 方法，它们两个都用来创建不可变的集合，来看下它们的使用和区别。</p>
<p>示例1：</p>
<p>var list = List.of(“Java”, “Python”, “C”);<br>var copy = List.copyOf(list);<br>System.out.println(list == copy); // true<br>示例2：</p>
<p>var list = new ArrayList<string>();<br>var copy = List.copyOf(list);<br>System.out.println(list == copy); // false<br>示例1和2代码差不多，为什么一个为true,一个为false?</string></p>
<p>来看下它们的源码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> &lt;E&gt; <span class="function">List&lt;E&gt; <span class="title">of</span><span class="params">(E... elements)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (elements.length) &#123; <span class="comment">// implicit null check of elements</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> ImmutableCollections.emptyList();</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ImmutableCollections.List12&lt;&gt;(elements[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ImmutableCollections.List12&lt;&gt;(elements[<span class="number">0</span>], elements[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ImmutableCollections.ListN&lt;&gt;(elements);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">static</span> &lt;E&gt; <span class="function">List&lt;E&gt; <span class="title">copyOf</span><span class="params">(Collection&lt;? extends E&gt; coll)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ImmutableCollections.listCopy(coll);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">static</span> &lt;E&gt; <span class="function">List&lt;E&gt; <span class="title">listCopy</span><span class="params">(Collection&lt;? extends E&gt; coll)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (coll <span class="keyword">instanceof</span> AbstractImmutableList &amp;&amp; coll.getClass() != SubList.class) &#123;</span><br><span class="line">        <span class="keyword">return</span> (List&lt;E&gt;)coll;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (List&lt;E&gt;)List.of(coll.toArray());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看出 copyOf 方法会先判断来源集合是不是 AbstractImmutableList 类型的，如果是，就直接返回，如果不是，则调用 of 创建一个新的集合。</p>
<p>示例2因为用的 new 创建的集合，不属于不可变 AbstractImmutableList 类的子类，所以 copyOf 方法又创建了一个新的实例，所以为false.</p>
<p>注意：使用of和copyOf创建的集合为不可变集合，不能进行添加、删除、替换、排序等操作，不然会报 java.lang.UnsupportedOperationException 异常。</p>
<p>上面演示了 List 的 of 和 copyOf 方法，Set 和 Map 接口都有。</p>
<p>除了更短和更好阅读之外，这些方法也可以避免您选择特定的集合实现。在创建后，继续添加元素到这些集合会导致 “UnsupportedOperationException” 。</p>
<h3 id="Stream-加强"><a href="#Stream-加强" class="headerlink" title="Stream 加强"></a>Stream 加强</h3><p>Stream 是 Java 8 中的新特性，Java 9 开始对 Stream 增加了以下 4 个新方法。</p>
<ol>
<li><p>增加单个参数构造方法，可为null</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Stream.ofNullable(<span class="keyword">null</span>).count(); <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>增加 takeWhile 和 dropWhile 方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从开始计算，当 n &lt; 3 时就截止。终止后，不管之后的元素满不满足条件，都不再进行判断</span></span><br><span class="line">ream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>).takeWhile(n -&gt; n &lt; <span class="number">3</span>)</span><br><span class="line">    .collect(Collectors.toList()); <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这个和上面的相反，一旦 n &lt; 3 不成立就开始计算。</span></span><br><span class="line">Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>).dropWhile(n -&gt; n &lt; <span class="number">3</span>)</span><br><span class="line">    .collect(Collectors.toList()); <span class="comment">// [3, 2, 1]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>iterate重载</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//老版本的使用方法</span></span><br><span class="line">Stream&lt;Integer&gt; iterate = Stream.iterate(<span class="number">1</span>, t -&gt; (<span class="number">2</span> * t) + <span class="number">1</span>);</span><br><span class="line">iterate.forEach(System.out::println);<span class="comment">//无限流，原因：溢出了</span></span><br><span class="line">iterate.limit(<span class="number">200</span>).forEach(System.out::println);<span class="comment">//限制条数</span></span><br><span class="line"><span class="comment">//这个 iterate 方法的新重载方法，可以让你提供一个 Predicate (判断条件)来指定什么时候结束迭代。</span></span><br><span class="line">Stream&lt;Integer&gt; newIterate = Stream.iterate(<span class="number">1</span>, t -&gt; t &gt; <span class="number">200</span>, t -&gt; (<span class="number">2</span> * t) + <span class="number">1</span>);</span><br><span class="line">newIterate.forEach(System.out::println);</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="增加了一系列的字符串处理方法"><a href="#增加了一系列的字符串处理方法" class="headerlink" title="增加了一系列的字符串处理方法"></a>增加了一系列的字符串处理方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 判断字符串是否为空白</span></span><br><span class="line"><span class="string">" "</span>.isBlank(); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 去除首尾空白</span></span><br><span class="line"><span class="string">" Javastack "</span>.strip(); <span class="comment">// "Javastack"</span></span><br><span class="line"><span class="comment">// 去除尾部空格</span></span><br><span class="line"><span class="string">" Javastack "</span>.stripTrailing(); <span class="comment">// " Javastack"</span></span><br><span class="line"><span class="comment">// 去除首部空格</span></span><br><span class="line"><span class="string">" Javastack "</span>.stripLeading(); <span class="comment">// "Javastack "</span></span><br><span class="line"><span class="comment">// 复制字符串</span></span><br><span class="line"><span class="string">"Java"</span>.repeat(<span class="number">3</span>);<span class="comment">// "JavaJavaJava"</span></span><br><span class="line"><span class="comment">// 行数统计</span></span><br><span class="line"><span class="string">"A\nB\nC"</span>.lines().count(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>
<h3 id="Optional-加强"><a href="#Optional-加强" class="headerlink" title="Optional 加强"></a>Optional 加强</h3><p>Opthonal 也增加了几个非常酷的方法，现在可以很方便的将一个 Optional 转换成一个 Stream, 或者当一个空 Optional 时给它一个替代的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Optional.of(<span class="string">"javastack"</span>).orElseThrow(); <span class="comment">// javastack</span></span><br><span class="line">Optional.of(<span class="string">"javastack"</span>).stream().count(); <span class="comment">// 1</span></span><br><span class="line">Optional.ofNullable(<span class="keyword">null</span>).or(() -&gt; Optional.of(<span class="string">"javastack"</span>)).get(); <span class="comment">// javastack</span></span><br></pre></td></tr></table></figure>
<h3 id="改进的文件API"><a href="#改进的文件API" class="headerlink" title="改进的文件API"></a>改进的文件API</h3><p>InputStream 加强</p>
<p>InputStream 终于有了一个非常有用的方法：transferTo，可以用来将数据直接传输到 OutputStream，这是在处理原始数据流时非常常见的一种用法，如下示例。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> classLoader = ClassLoader.getSystemClassLoader();</span><br><span class="line"><span class="keyword">var</span> inputStream = classLoader.getResourceAsStream(<span class="string">"javastack.txt"</span>);</span><br><span class="line"><span class="keyword">var</span> javastack = File.createTempFile(<span class="string">"javastack2"</span>, <span class="string">"txt"</span>);</span><br><span class="line"><span class="keyword">try</span> (<span class="keyword">var</span> outputStream = <span class="keyword">new</span> FileOutputStream(javastack)) &#123;</span><br><span class="line">    inputStream.transferTo(outputStream);<span class="comment">//把输入流中的所有数据直接自动地复制到输出流中</span></span><br><span class="line">&#125;</span><br><span class="line">inputStream.close();</span><br></pre></td></tr></table></figure>
<h3 id="移除的一些其他内容"><a href="#移除的一些其他内容" class="headerlink" title="移除的一些其他内容"></a>移除的一些其他内容</h3><p><strong>移除项</strong>：</p>
<ol>
<li><p>移除了com.sun.awt.AWTUtilities</p>
</li>
<li><p>移除了sun.misc.Unsafe.defineClass，</p>
<p>使用java.lang.invoke.MethodHandles.Lookup.defineClass来替代</p>
</li>
<li><p>移除了Thread.destroy()以及 Thread.stop(Throwable)方法</p>
</li>
<li><p>移除了sun.nio.ch.disableSystemWideOverlappingFileLockCheck</p>
<p>sun.locale.formatasdefault属性</p>
</li>
<li><p>移除了jdk.snmp模块</p>
</li>
<li><p>移除了javafx，openjdk估计是从java10版本就移除了，oracle jdk10还尚未移除javafx，而java11版本则oracle的jdk版本也移除了javafx</p>
</li>
<li><p>移除了Java Mission Control，从JDK中移除之后，需要自己单独下载</p>
</li>
<li><p>移除了这些Root Certificates ：Baltimore Cybertrust Code Signing CA，SECOM ，AOL and Swisscom</p>
</li>
</ol>
<p><strong>废弃项</strong>：</p>
<ol>
<li>-XX+AggressiveOpts选项</li>
<li>-XX:+UnlockCommercialFeatures</li>
<li>-XX:+LogCommercialFeatures选项也不再需要</li>
</ol>
<h3 id="标准Java异步HTTP客户端"><a href="#标准Java异步HTTP客户端" class="headerlink" title="标准Java异步HTTP客户端"></a>标准Java异步HTTP客户端</h3><p>这是 Java 9 开始引入的一个处理 HTTP 请求的的 HTTP Client API，该 API 支持同步和异步，而在 Java 11 中已经为正式可用状态，你可以在 java.net 包中找到这个 API。</p>
<p>来看一下 HTTP Client 的用法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> request = HttpRequest.newBuilder()</span><br><span class="line">    .uri(URI.create(<span class="string">"https://javastack.cn"</span>))</span><br><span class="line">    .GET()</span><br><span class="line">    .build();</span><br><span class="line"><span class="keyword">var</span> client = HttpClient.newHttpClient();</span><br><span class="line"><span class="comment">// 同步</span></span><br><span class="line">HttpResponse&lt;String&gt; response = client.send(request, </span><br><span class="line">                                            HttpResponse.BodyHandlers.ofString());</span><br><span class="line">System.out.println(response.body());</span><br><span class="line"><span class="comment">// 异步</span></span><br><span class="line">client.sendAsync(request, HttpResponse.BodyHandlers.ofString())</span><br><span class="line">    .thenApply(HttpResponse::body)</span><br><span class="line">    .thenAccept(System.out::println);</span><br></pre></td></tr></table></figure>
<p>上面的 .GET() 可以省略，默认请求方式为 Get！</p>
<p>更多使用示例可以看这个 API，后续再做演示。</p>
<p>现在 Java 自带了这个 HTTP Client API，我们以后还有必要用 Apache 的 HttpClient 工具包吗？</p>
<h3 id="更简化的编译运行程序"><a href="#更简化的编译运行程序" class="headerlink" title="更简化的编译运行程序"></a>更简化的编译运行程序</h3><p>JEP 330 : 增强java启动器支持运行单个java源代码文件的程序.</p>
<blockquote>
<p><strong>注意点</strong> :</p>
<ol>
<li>执行源文件中的第一个类, 第一个类必须包含主方法</li>
<li>并且不可以使用别源文件中的自定义类, 本文件中的自定义类是可以使用的.</li>
</ol>
</blockquote>
<p>一个命令编译运行源代码</p>
<p>看下面的代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 编译</span><br><span class="line">javac Javastack.java</span><br><span class="line">// 运行</span><br><span class="line">java Javastack</span><br></pre></td></tr></table></figure>
<p>在我们的认知里面，要运行一个 Java 源代码必须先编译，再运行，两步执行动作。而在未来的 Java 11 版本中，通过一个 java 命令就直接搞定了，如以下所示。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java Javastack.java</span><br></pre></td></tr></table></figure>
<h3 id="Unicode-10"><a href="#Unicode-10" class="headerlink" title="Unicode 10"></a>Unicode 10</h3><p>Unicode 10 增加了8518个字符, 总计达到了136690个字符. 并且增加了4个脚本.同时还有56个新的emoji表情符号.</p>
<h3 id="Remove-the-JavaEE-and-CORBA-Moudles"><a href="#Remove-the-JavaEE-and-CORBA-Moudles" class="headerlink" title="Remove the JavaEE and CORBA Moudles"></a>Remove the JavaEE and CORBA Moudles</h3><p>在java11中移除了不太使用的JavaEE模块和CORBA技术<br>CORBA来自于二十世纪九十年代，Oracle说，现在用CORBA开发现代Java应用程序已经没有意义了，维护CORBA的成本已经超过了保留它带来的好处。</p>
<p>但是删除CORBA将使得那些依赖于JDK提供部分CORBA API的CORBA实现无法运行。目前还没有第三方CORBA版本，也不确定是否会有第三方愿意接手CORBA API的维护工作。</p>
<p>在java11中将java9标记废弃的Java EE及CORBA模块移除掉，具体如下：</p>
<ol>
<li>xml相关的，<br>java.xml.ws,<br>java.xml.bind，<br>java.xml.ws，<br>java.xml.ws.annotation，<br>jdk.xml.bind，<br>jdk.xml.ws被移除，<br>只剩下java.xml，java.xml.crypto,jdk.xml.dom这几个模块；</li>
<li>java.corba，<br>java.se.ee，<br>java.activation，<br>java.transaction被移除，<br>但是java11新增一个java.transaction.xa模块</li>
</ol>
<h3 id="JEP-335-Deprecate-the-Nashorn-JavaScript-Engine"><a href="#JEP-335-Deprecate-the-Nashorn-JavaScript-Engine" class="headerlink" title="JEP : 335 : Deprecate the Nashorn JavaScript Engine"></a>JEP : 335 : Deprecate the Nashorn JavaScript Engine</h3><p>废除Nashorn javascript引擎，在后续版本准备移除掉，有需要的可以考虑使用GraalVM</p>
<h3 id="JEP-336-Deprecate-the-Pack200-Tools-and-API"><a href="#JEP-336-Deprecate-the-Pack200-Tools-and-API" class="headerlink" title="JEP : 336 : Deprecate the Pack200 Tools and API"></a>JEP : 336 : Deprecate the Pack200 Tools and API</h3><p>Java5中带了一个压缩工具:Pack200，这个工具能对普通的jar文件进行高效压缩。其实现原理是根据Java类特有的结构，合并常数池，去掉无用信息等来实现对java类的高效压缩。由于是专门对Java类进行压缩的，所以对普通文件的压缩和普通压缩软件没有什么两样，但是对于Jar  文件却能轻易达到10-40%的压缩率。这在Java应用部署中很有用，尤其对于移动Java计算，能够大大减小代码下载量。<br>Java5中还提供了这一技术的API接口，你可以将其嵌入到你的程序中使用。使用的方法很简单，下面的短短几行代码即可以实现jar的压缩和解压：</p>
<ol>
<li>压缩<br>Packer packer=Pack200.newPacker();<br>OutputStream output=new BufferedOutputStream(new  FileOutputStream(outfile));<br>packer.pack(new JarFile(jarFile), output);<br>output.close(); </li>
<li>解压<br>Unpacker unpacker=Pack200.newUnpacker();<br>output=new JarOutputStream(new FileOutputStream(jarFile));<br>unpacker.unpack(pack200File, output);<br>output.close(); </li>
</ol>
<p>Pack200的压缩和解压缩速度是比较快的，而且压缩率也是很惊人的，在我是使用  的包4.46MB压缩后成了1.44MB（0.322%），而且随着包的越大压缩率会更加明显，据说如果jar包都是class类可以压缩到1/9的大  小。其实JavaWebStart还有很多功能，例如可以按不同的jar包进行lazy下载和 单独更新，设置可以根据jar中的类变动进行class粒度的下载。</p>
<p>但是在java11中废除了pack200以及unpack200工具以及java.util.jar中的Pack200 API。因为Pack200主要是用来压缩jar包的工具，由于网络下载速度的提升以及java9引入模块化系统之后不再依赖Pack200，因此这个版本将其移除掉。</p>
<h3 id="新的Epsilon垃圾收集器"><a href="#新的Epsilon垃圾收集器" class="headerlink" title="新的Epsilon垃圾收集器"></a>新的Epsilon垃圾收集器</h3><p>A NoOp Garbage Collector<br>JDK上对这个特性的描述是: 开发一个处理内存分配但不实现任何实际内存回收机制的GC, 一旦可用堆内存用完, JVM就会退出.<br>如果有System.gc()调用, 实际上什么也不会发生(这种场景下和-XX:+DisableExplicitGC效果一样), 因为没有内存回收, 这个实现可能会警告用户尝试强制GC是徒劳.</p>
<p>用法 : <code>-XX:+UnlockExperimentalVMOptions -XX:+UseEpsilonGC</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Garbage</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> n = (<span class="keyword">int</span>)(Math.random() * <span class="number">100</span>);</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">this</span> + <span class="string">" : "</span> + n + <span class="string">" is dying"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EpsilonTest</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">		List&lt;Garbage&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">		<span class="keyword">long</span> count = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> (flag) &#123;</span><br><span class="line">			list.add(<span class="keyword">new</span> Garbage());</span><br><span class="line">			<span class="keyword">if</span> (list.size() == <span class="number">1000000</span> &amp;&amp; count == <span class="number">0</span>) &#123;</span><br><span class="line">				list.clear();</span><br><span class="line">				count++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"程序结束"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果使用选项-XX:+UseEpsilonGC, 程序很快就因为堆空间不足而退出</p>
<p>使用这个选项的原因 :<br>提供完全被动的GC实现, 具有有限的分配限制和尽可能低的延迟开销,但代价是内存占用和内存吞吐量.<br>众所周知, java实现可广泛选择高度可配置的GC实现. 各种可用的收集器最终满足不同的需求, 即使它们的可配置性使它们的功能相交. 有时更容易维护单独的实现, 而不是在现有GC实现上堆积另一个配置选项.</p>
<p>主要用途如下 :</p>
<pre><code>1. 性能测试(它可以帮助过滤掉GC引起的性能假象)
2. 内存压力测试(例如,知道测试用例 应该分配不超过1GB的内存, 我们可以使用-Xmx1g –XX:+UseEpsilonGC, 如果程序有问题, 则程序会崩溃)
3. 非常短的JOB任务(对象这种任务, 接受GC清理堆那都是浪费空间)
4. VM接口测试
5. Last-drop 延迟&amp;吞吐改进
</code></pre><h3 id="ZGC"><a href="#ZGC" class="headerlink" title="ZGC"></a>ZGC</h3><p>这应该是JDK11最为瞩目的特性, 没有之一. 但是后面带了Experimental, 说明这还不建议用到生产环境</p>
<ol>
<li>GC暂停时间不会超过10ms</li>
<li>既能处理几百兆的小堆, 也能处理几个T的大堆(OMG)</li>
<li>和G1相比, 应用吞吐能力不会下降超过15%</li>
<li>为未来的GC功能和利用colord指针以及Load barriers优化奠定基础</li>
<li>初始只支持64位系统</li>
</ol>
<p>ZGC的设计目标是：支持TB级内存容量，暂停时间低（&lt;10ms），对整个程序吞吐量的影响小于15%。 将来还可以扩展实现机制，以支持不少令人兴奋的功能，例如多层堆（即热对象置于DRAM和冷对象置于NVMe闪存），或压缩堆。</p>
<p>GC是java主要优势之一. 然而, 当GC停顿太长, 就会开始影响应用的响应时间.消除或者减少GC停顿时长, java将对更广泛的应用场景是一个更有吸引力的平台. 此外, 现代系统中可用内存不断增长,用户和程序员希望JVM能够以高效的方式充分利用这些内存, 并且无需长时间的GC暂停时间.</p>
<p>STW – stop the world</p>
<p>ZGC是一个并发, 基于region, 压缩型的垃圾收集器, 只有root扫描阶段会STW, 因此GC停顿时间不会随着堆的增长和存活对象的增长而变长.</p>
<p>ZGC : avg 1.091ms    max:1.681<br>G1   : avg 156.806  max:543.846</p>
<p>用法 : -XX:+UnlockExperimentalVMOptions –XX:+UseZGC, 因为ZGC还处于实验阶段, 所以需要通过JVM参数来解锁这个特性</p>
<h3 id="完全支持Linux容器（包括Docker）"><a href="#完全支持Linux容器（包括Docker）" class="headerlink" title="完全支持Linux容器（包括Docker）"></a>完全支持Linux容器（包括Docker）</h3><p>许多运行在Java虚拟机中的应用程序（包括Apache Spark和Kafka等数据服务以及传统的企业应用程序）都可以在Docker容器中运行。但是在Docker容器中运行Java应用程序一直存在一个问题，那就是在容器中运行JVM程序在设置内存大小和CPU使用率后，会导致应用程序的性能下降。这是因为Java应用程序没有意识到它正在容器中运行。随着Java 10的发布，这个问题总算得以解决，JVM现在可以识别由容器控制组（cgroups）设置的约束。可以在容器中使用内存和CPU约束来直接管理Java应用程序，其中包括：</p>
<p>遵守容器中设置的内存限制<br>在容器中设置可用的CPU<br>在容器中设置CPU约束<br>Java 10的这个改进在Docker for Mac、Docker for Windows以及Docker Enterprise Edition等环境均有效。</p>
<p>容器的内存限制<br>在Java 9之前，JVM无法识别容器使用标志设置的内存限制和CPU限制。而在Java 10中，内存限制会自动被识别并强制执行。</p>
<p>Java将服务器类机定义为具有2个CPU和2GB内存，以及默认堆大小为物理内存的1/4。例如，Docker企业版安装设置为2GB内存和4个CPU的环境，我们可以比较在这个Docker容器上运行Java 8和Java 10的区别。</p>
<p>首先，对于Java 8：</p>
<p>docker container run -it -m512 –entrypoint bash openjdk:latest<br>$ docker-java-home/bin/java -XX:+PrintFlagsFinal -version | grep MaxHeapSize<br>uintx MaxHeapSize                              := 524288000                          {product}<br>openjdk version “1.8.0_162”<br>1<br>2<br>3<br>4<br>最大堆大小为512M或Docker EE安装设置的2GB的1/4，而不是容器上设置的512M限制。</p>
<p>相比之下，在Java 10上运行相同的命令表明，容器中设置的内存限制与预期的128M非常接近：</p>
<p>docker container run -it -m512M –entrypoint bash openjdk:10-jdk<br>$ docker-java-home/bin/java -XX:+PrintFlagsFinal -version | grep MaxHeapSize<br>size_t MaxHeapSize                              = 134217728                          {product} {ergonomic}<br>openjdk version “10” 2018-03-20<br>1<br>2<br>3<br>4<br>设置可用的CPU<br>默认情况下，每个容器对主机CPU周期的访问是无限的。可以设置各种约束来限制给定容器对主机CPU周期的访问。Java 10可以识别这些限制：</p>
<p>docker container run -it –cpus 2 openjdk:10-jdk<br>jshell&gt; Runtime.getRuntime().availableProcessors()<br>$1 ==&gt; 2<br>1<br>2<br>3<br>分配给Docker EE的所有CPU会获得相同比例的CPU周期。这个比例可以通过修改容器的CPU share权重来调整，而CPU share权重与其它所有运行在容器中的权重相关。此比例仅适用于正在运行的CPU密集型的进程。当某个容器中的任务空闲时，其他容器可以使用余下的CPU时间。实际的CPU时间的数量取决于系统上运行的容器的数量。这些可以在Java 10中设置：</p>
<p>docker container run -it –cpu-shares 2048 openjdk:10-jdk<br>jshell&gt; Runtime.getRuntime().availableProcessors()<br>$1 ==&gt; 2<br>1<br>2<br>3<br>cpuset约束设置了哪些CPU允许在Java 10中执行。</p>
<p>docker run -it –cpuset-cpus=”1,2,3” openjdk:10-jdk<br>jshell&gt; Runtime.getRuntime().availableProcessors()<br>$1 ==&gt; 3<br>1<br>2<br>3<br>分配内存和CPU<br>使用Java 10，可以使用容器设置来估算部署应用程序所需的内存和CPU的分配。我们假设已经确定了容器中运行的每个进程的内存堆和CPU需求，并设置了JAVA_OPTS配置。例如，如果有一个跨10个节点分布的应用程序，其中五个节点每个需要512Mb的内存和1024个CPU-shares，另外五个节点每个需要256Mb和512个CPU-shares。</p>
<p>请注意，1个CPU share比例由1024表示。</p>
<p>对于内存，应用程序至少需要分配5Gb。</p>
<p>512Mb × 5 = 2.56Gb<br>256Mb × 5 = 1.28Gb<br>该应用程序需要8个CPU才能高效运行。</p>
<p>1024 x 5 = 5个CPU<br>512 x 5 = 3个CPU<br>最佳实践是建议分析应用程序以确定运行在JVM中的每个进程实际需要多少内存和分配多少CPU。但是，Java 10消除了这种猜测，可以通过调整容器大小以防止Java应用程序出现内存不足的错误以及分配足够的CPU来处理工作负载。</p>
<h3 id="支持G1上的并行完全垃圾收集"><a href="#支持G1上的并行完全垃圾收集" class="headerlink" title="支持G1上的并行完全垃圾收集"></a>支持G1上的并行完全垃圾收集</h3><p>对于 G1 GC，相比于 JDK 8，升级到 JDK 11 即可免费享受到：并行的 Full GC，快速的 CardTable 扫描，自适应的堆占用比例调整（IHOP），在并发标记阶段的类型卸载等等。这些都是针对 G1 的不断增强，其中串行 Full GC 等甚至是曾经被广泛诟病的短板，你会发现 GC 配置和调优在 JDK11 中越来越方便。</p>
<h3 id="JEP-331-Low-Overhead-Heap-Profiling免费的低耗能飞行记录仪和堆分析仪"><a href="#JEP-331-Low-Overhead-Heap-Profiling免费的低耗能飞行记录仪和堆分析仪" class="headerlink" title="JEP 331 : Low-Overhead Heap Profiling免费的低耗能飞行记录仪和堆分析仪"></a>JEP 331 : Low-Overhead Heap Profiling免费的低耗能飞行记录仪和堆分析仪</h3><p>通过JVMTI的SampledObjectAlloc回调提供了一个开销低的heap分析方式</p>
<p>提供一个低开销的, 为了排错java应用问题, 以及JVM问题的数据收集框架, 希望达到的目标如下 :</p>
<ol>
<li>提供用于生产和消费数据作为事件的API</li>
<li>提供缓存机制和二进制数据格式</li>
<li>允许事件配置和事件过滤</li>
<li>提供OS,JVM和JDK库的事件</li>
</ol>
<h3 id="JEP-329-实现RFC7539中指定的ChaCha20和Poly1305两种加密算法-代替RC4"><a href="#JEP-329-实现RFC7539中指定的ChaCha20和Poly1305两种加密算法-代替RC4" class="headerlink" title="JEP 329 : 实现RFC7539中指定的ChaCha20和Poly1305两种加密算法, 代替RC4"></a>JEP 329 : 实现RFC7539中指定的ChaCha20和Poly1305两种加密算法, 代替RC4</h3><p>实现 RFC 7539的ChaCha20 and ChaCha20-Poly1305加密算法</p>
<p>RFC7748定义的秘钥协商方案更高效, 更安全. JDK增加两个新的接口<br>XECPublicKey 和 XECPrivateKey</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">KeyPairGenerator kpg = KeyPairGenerator.getInstance(“XDH”);</span><br><span class="line">NamedParameterSpec paramSpec = <span class="keyword">new</span> NamedParameterSpec(“X25519”);</span><br><span class="line">kpg.initialize(paramSpec);</span><br><span class="line">KeyPair kp = kgp.generateKeyPair();</span><br><span class="line"></span><br><span class="line">KeyFactory kf = KeyFactory.getInstance(“XDH”);</span><br><span class="line">BigInteger u = <span class="keyword">new</span> BigInteger(“xxx”);</span><br><span class="line">XECPublicKeySpec pubSpec = <span class="keyword">new</span> XECPublicKeySpec(paramSpec, u);</span><br><span class="line">PublicKey pubKey = kf.generatePublic(pubSpec);</span><br><span class="line"></span><br><span class="line">KeyAgreement ka = KeyAgreement.getInstance(“XDH”);</span><br><span class="line">ka.init(kp.getPrivate());</span><br><span class="line">ka.doPhase(pubKey, <span class="keyword">true</span>);</span><br><span class="line"><span class="keyword">byte</span>[] secret = ka.generateSecret();</span><br></pre></td></tr></table></figure>
<h3 id="新的默认根权限证书集"><a href="#新的默认根权限证书集" class="headerlink" title="新的默认根权限证书集"></a>新的默认根权限证书集</h3><h3 id="JEP-332最新的HTTPS安全协议TLS-1-3"><a href="#JEP-332最新的HTTPS安全协议TLS-1-3" class="headerlink" title="JEP 332最新的HTTPS安全协议TLS 1.3"></a>JEP 332最新的HTTPS安全协议TLS 1.3</h3><p>实现TLS协议1.3版本, TLS允许客户端和服务器端通过互联网以一种防止窃听, 篡改以及消息伪造的方式进行通信.</p>
<h3 id="Java-Flight-Recorder"><a href="#Java-Flight-Recorder" class="headerlink" title="Java Flight Recorder"></a>Java Flight Recorder</h3><p>Flight Recorder源自飞机的黑盒子</p>
<p>Flight Recorder以前是商业版的特性，在java11当中开源出来，它可以导出事件到文件中，之后可以用Java Mission Control来分析。可以在应用启动时配置java -XX:StartFlightRecording，或者在应用启动之后，使用jcmd来录制，比如</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> jcmd &lt;pid&gt; JFR.start</span><br><span class="line"><span class="meta">$</span> jcmd &lt;pid&gt; JFR.dump filename=recording.jfr</span><br><span class="line"><span class="meta">$</span> jcmd &lt;pid&gt; JFR.stop</span><br></pre></td></tr></table></figure>
<p>是 Oracle 刚刚开源的强大特性。我们知道在生产系统进行不同角度的 Profiling，有各种工具、框架，但是能力范围、可靠性、开销等，大都差强人意，要么能力不全面，要么开销太大，甚至不可靠可能导致 Java 应用进程宕机。<br>而 JFR 是一套集成进入 JDK、JVM 内部的事件机制框架，通过良好架构和设计的框架，硬件层面的极致优化，生产环境的广泛验证，它可以做到极致的可靠和低开销。在 SPECjbb2015 等基准测试中，JFR 的性能开销最大不超过 1%，所以，工程师可以基本没有心理负担地在大规模分布式的生产系统使用，这意味着，我们既可以随时主动开启 JFR 进行特定诊断，也可以让系统长期运行 JFR，用以在复杂环境中进行“After-the-fact”分析。还需要苦恼重现随机问题吗？JFR 让问题简化了很多。<br>在保证低开销的基础上，JFR 提供的能力也令人眼前一亮，例如：我们无需 BCI 就可以进行 Object Allocation Profiling，终于不用担心 BTrace 之类把进程搞挂了。对锁竞争、阻塞、延迟，JVM GC、SafePoint 等领域，进行非常细粒度分析。甚至深入 JIT Compiler 内部，全面把握热点方法、内联、逆优化等等。JFR 提供了标准的 Java、C++ 等扩展 API，可以与各种层面的应用进行定制、集成，为复杂的企业应用栈或者复杂的分布式应用，提供 All-in-One 解决方案。而这一切都是内建在 JDK 和 JVM 内部的，并不需要额外的依赖，开箱即用。</p>
</div></div><a class="button-hover more" href="/2019/03/23/Java11尝鲜/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/21/使用SpringBoot-附录A/">使用SpringBoot-附录A</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-24</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/properties/">properties</a></div></div><div class="post-content"><div class="main-content content"><h1 id="附录A-常用应用程序属性"><a href="#附录A-常用应用程序属性" class="headerlink" title="附录A.常用应用程序属性"></a>附录A.常用应用程序属性</h1><p>可以在<code>application.properties</code>文件内部<code>application.yml</code>，文件内部或命令行开关中指定各种属性。本附录提供了常见Spring Boot属性的列表以及对使用它们的基础类的引用。</p>
<blockquote>
<p>Spring Boot提供了各种具有高级值格式的转换机制，请务必查看<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-external-config-conversion" target="_blank" rel="noopener">属性转换部分</a>。</p>
</blockquote>
<blockquote>
<p>属性贡献可以来自类路径上的其他jar文件，因此您不应将此视为详尽的列表。此外，您可以定义自己的属性。</p>
</blockquote>
<blockquote>
<p>此示例文件仅供参考。千万<strong>不能</strong>复制和粘贴的全部内容到应用程序中。相反，只选择您需要的属性。</p>
</blockquote>
<h2 id="CORE-PROPERTIES"><a href="#CORE-PROPERTIES" class="headerlink" title="CORE PROPERTIES"></a>CORE PROPERTIES</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">＃---------------------------------------- </span><br><span class="line">#CORE PROPERTIES </span><br><span class="line">＃----- ----------------------------------- </span><br><span class="line">debug = false ＃启用调试日志。</span><br><span class="line">trace = false ＃启用跟踪日志。</span><br></pre></td></tr></table></figure>
<h3 id="LOGGING"><a href="#LOGGING" class="headerlink" title="LOGGING"></a>LOGGING</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#logGING </span><br><span class="line">logging.config = ＃日志配置文件的位置。例如，Logback的`classpath：logback.xml`。</span><br><span class="line">logging.exception-conversion-word =％wEx ＃记录异常时使用的转换字。</span><br><span class="line">logging.file = ＃日志文件名（例如，`myapp.log`）。名称可以是精确位置或相对于当前目录。</span><br><span class="line">logging.file.max-history = 0 ＃要保留的归档日志文件的最大值。仅支持默认的logback设置。</span><br><span class="line">logging.file.max-size = 10MB ＃最大日志文件大小。仅支持默认的logback设置。</span><br><span class="line">logging.group。* =＃记录组以同时快速更改多个记录器。例如，`logging.level.db = org.hibernate，org.springframework.jdbc`。</span><br><span class="line">logging.level。* = ＃日志级别严重性映射。例如，`logging.level.org.springframework = DEBUG`。</span><br><span class="line">logging.path = ＃日志文件的位置。例如，`/ var / log`。</span><br><span class="line">logging.pattern.console = ＃用于输出到控制台的Appender模式。仅支持默认的Logback设置。</span><br><span class="line">logging.pattern.dateformat = yyyy-MM-dd HH：mm：ss.SSS ＃日志日期格式的Appender模式。仅支持默认的Logback设置。</span><br><span class="line">logging.pattern.file =＃用于输出到文件的Appender模式。仅支持默认的Logback设置。</span><br><span class="line">logging.pattern.level =％5p ＃日志级别的Appender模式。仅支持默认的Logback设置。</span><br><span class="line">logging.register-shutdown-hook = false ＃在日志记录系统初始化时注册一个关闭钩子。</span><br></pre></td></tr></table></figure>
<h3 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">＃AOP </span><br><span class="line">spring.aop.auto = true ＃添加@EnableAspectJAutoProxy。</span><br><span class="line">spring.aop.proxy-target-class = true ＃是否要创建基于子类的（CGLIB）代理（true），而不是基于标准Java接口的代理（false）。</span><br></pre></td></tr></table></figure>
<h3 id="IDENTITY-（ContextIdApplicationContextInitializer）"><a href="#IDENTITY-（ContextIdApplicationContextInitializer）" class="headerlink" title="IDENTITY （ContextIdApplicationContextInitializer）"></a>IDENTITY （ContextIdApplicationContextInitializer）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name = #应用名</span><br></pre></td></tr></table></figure>
<h3 id="DINAND-（SpringApplicationAdminJmxAutoConfiguration）"><a href="#DINAND-（SpringApplicationAdminJmxAutoConfiguration）" class="headerlink" title="DINAND （SpringApplicationAdminJmxAutoConfiguration）"></a>DINAND （SpringApplicationAdminJmxAutoConfiguration）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.application.admin.enabled = false ＃是否为应用程序启用管理功能。</span><br><span class="line">spring.application.admin.jmx-name = org.springframework.boot：type = Admin，name = SpringApplication #JMX 应用程序管理员MBean的名称。</span><br></pre></td></tr></table></figure>
<h3 id="AUTO-CONFIGURATION"><a href="#AUTO-CONFIGURATION" class="headerlink" title="AUTO-CONFIGURATION"></a>AUTO-CONFIGURATION</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.autoconfigure.exclude = ＃要排除的自动配置类</span><br></pre></td></tr></table></figure>
<h3 id="BANNER"><a href="#BANNER" class="headerlink" title="BANNER"></a>BANNER</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring.banner.charset = UTF-8 ＃横幅文件编码。</span><br><span class="line">spring.banner.location = classpath：banner.txt ＃横幅文本资源位置。</span><br><span class="line">spring.banner.image.location = classpath：banner.gif ＃横幅图像文件位置（也可以使用jpg或png）。</span><br><span class="line">spring.banner.image.width = 76 ＃字符中的横幅图像的宽度。</span><br><span class="line">spring.banner.image.height = #crs 中横幅图像的高度（默认基于图像高度）。</span><br><span class="line">spring.banner.image.margin = 2 ＃字符中的左手图像边距。</span><br><span class="line">spring.banner.image.invert = false ＃是否应针对暗终端主题反转图像。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-CORE"><a href="#SPRING-CORE" class="headerlink" title="SPRING CORE"></a>SPRING CORE</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.beaninfo.ignore = true ＃是否跳过BeanInfo类的搜索</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-CACHE（CacheProperties）"><a href="#SPRING-CACHE（CacheProperties）" class="headerlink" title="SPRING CACHE（CacheProperties）"></a>SPRING CACHE（CacheProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">spring.cache.cache-names = #Cmama 分隔的要创建的缓存名称列表（如果底层缓存管理器支持）。</span><br><span class="line">spring.cache.caffeine.spec = ＃用于创建缓存的规范。有关规格格式的更多详细信息，请参阅CaffeineSpec。</span><br><span class="line">spring.cache.couchbase.expiration = ＃条目到期。默认情况下，条目永不过期。请注意，此值最终会转换为秒。</span><br><span class="line">spring.cache.ehcache.config = ＃用于初始化EhCache的配置文件的位置。</span><br><span class="line">spring.cache.infinispan.config = ＃用于初始化Infinispan的配置文件的位置。</span><br><span class="line">spring.cache.jcache.config = ＃用于初始化缓存管理器的配置文件的位置。</span><br><span class="line">spring.cache.jcache.provider = #CachingProvider实现的完全限定名称，用于检索符合JSR-107的缓存管理器。仅当类路径上有多个JSR-107实现时才需要。</span><br><span class="line">spring.cache.redis.cache-null-values = true ＃允许缓存空值。</span><br><span class="line">spring.cache.redis.key-prefix = ＃键前缀。</span><br><span class="line">spring.cache.redis.time-to-live = ＃条目到期。默认情况下，条目永不过期。</span><br><span class="line">spring.cache.redis.use-key-prefix = true＃写入Redis时是否使用密钥前缀。</span><br><span class="line">spring.cache.type = #Cache 类型。默认情况下，根据环境自动检测。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-CONFIG-仅使用环境属性（ConfigFileApplicationListener）"><a href="#SPRING-CONFIG-仅使用环境属性（ConfigFileApplicationListener）" class="headerlink" title="SPRING CONFIG  - 仅使用环境属性（ConfigFileApplicationListener）"></a>SPRING CONFIG  - 仅使用环境属性（ConfigFileApplicationListener）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.config.additional-location = ＃配置除默认值之外使用的文件位置。</span><br><span class="line">spring.config.location = ＃配置替换默认值的文件位置。</span><br><span class="line">spring.config.name = application ＃配置文件名</span><br></pre></td></tr></table></figure>
<h3 id="HAZELCAST（HazelcastProperties）"><a href="#HAZELCAST（HazelcastProperties）" class="headerlink" title="HAZELCAST（HazelcastProperties）"></a>HAZELCAST（HazelcastProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.hazelcast.config = ＃用于初始化Hazelcast的配置文件的位置</span><br></pre></td></tr></table></figure>
<h3 id="PROJECT-INFORMATION（ProjectInfoProperties）"><a href="#PROJECT-INFORMATION（ProjectInfoProperties）" class="headerlink" title="PROJECT INFORMATION（ProjectInfoProperties）"></a>PROJECT INFORMATION（ProjectInfoProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.info.build.encoding = UTF-8 ＃文件编码。</span><br><span class="line">spring.info.build.location = classpath：META-INF / build-info.properties ＃生成的build-info.properties文件的位置。</span><br><span class="line">spring.info.git.encoding = UTF-8 ＃文件编码。</span><br><span class="line">spring.info.git.location =类路径：git.properties 生成的git.properties文件＃所在</span><br></pre></td></tr></table></figure>
<h3 id="JMX"><a href="#JMX" class="headerlink" title="JMX"></a>JMX</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.jmx.default域 = ＃JMX域名。</span><br><span class="line">spring.jmx.enabled = true ＃将管理bean公开给JMX域。</span><br><span class="line">spring.jmx.server = mbeanServer ＃MBeanServer bean name。</span><br><span class="line">spring.jmx.unique-names = false ＃是否应确保唯一的运行时对象名称</span><br></pre></td></tr></table></figure>
<h3 id="Email-（MailProperties）"><a href="#Email-（MailProperties）" class="headerlink" title="Email （MailProperties）"></a>Email （MailProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">spring.mail.default-encoding = UTF-8 ＃默认MimeMessage编码。</span><br><span class="line">spring.mail.host = #SMTP 服务器主机。例如，`smtp.example.com`。</span><br><span class="line">spring.mail.jndi-name = ＃会话JNDI名称。设置时，优先于其他会话设置。</span><br><span class="line">spring.mail.password = #SMTP 服务器的登录密码。</span><br><span class="line">spring.mail.port = #SMTP 服务器端口。</span><br><span class="line">spring.mail.properties。* = ＃其他JavaMail会话属性。</span><br><span class="line">spring.mail.protocol = smtp ＃SMTP服务器使用的协议。</span><br><span class="line">spring.mail.test-connection = false＃是否在启动时测试邮件服务器是否可用。</span><br><span class="line">spring.mail.username = #SMTP 服务器的登录用户</span><br></pre></td></tr></table></figure>
<h3 id="APICING-SETTINGS（SpringApplication）"><a href="#APICING-SETTINGS（SpringApplication）" class="headerlink" title="APICING SETTINGS（SpringApplication）"></a>APICING SETTINGS（SpringApplication）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.main.allow-bean-definition-overriding = false ＃是否允许通过注册与现有定义同名的定义来覆盖bean定义。</span><br><span class="line">spring.main.banner-mode = console ＃模式用于在应用程序运行时显示横幅。</span><br><span class="line">spring.main.sources = 要包含在ApplicationContext中的</span><br></pre></td></tr></table></figure>
<h3 id="Sources-（类名，包名或XML资源位置）"><a href="#Sources-（类名，包名或XML资源位置）" class="headerlink" title="Sources （类名，包名或XML资源位置）"></a>Sources （类名，包名或XML资源位置）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.main.web-application-type = ＃用于显式请求特定类型的Web应用程序的标志。如果未设置，则基于类路径自动检测。</span><br></pre></td></tr></table></figure>
<h3 id="FILE-ENCODING（FileEncodingApplicationListener）"><a href="#FILE-ENCODING（FileEncodingApplicationListener）" class="headerlink" title="FILE ENCODING（FileEncodingApplicationListener）"></a>FILE ENCODING（FileEncodingApplicationListener）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.mandatory-file-encoding = ＃应用程序必须使用的预期字符编码</span><br></pre></td></tr></table></figure>
<h3 id="INTERINGIZATION-（MessageSourceProperties）"><a href="#INTERINGIZATION-（MessageSourceProperties）" class="headerlink" title="INTERINGIZATION （MessageSourceProperties）"></a>INTERINGIZATION （MessageSourceProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.messages.always-use-message-format = false ＃是否始终应用MessageFormat规则，甚至解析不带参数的消息。</span><br><span class="line">spring.messages.basename = messages ＃逗号分隔的basenames列表（本质上是一个完全限定的类路径位置），每个都遵循ResourceBundle约定，轻松支持基于斜杠的位置。</span><br><span class="line">spring.messages.cache-duration = ＃加载的资源包文件缓存持续时间。未设置时，捆绑包将永久缓存。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">spring.messages.encoding = UTF-8 ＃消息包编码。</span><br><span class="line">spring.messages.fallback-to-system-locale = true ＃如果找不到特定区域设置的文件，是否回退到系统区域设置。</span><br><span class="line">spring.messages.use-code-as-default-message = false ＃是否使用消息代码作为默认消息而不是抛出“NoSuchMessageException”。仅在开发期间推荐。</span><br></pre></td></tr></table></figure>
<h3 id="OUTPUT"><a href="#OUTPUT" class="headerlink" title="OUTPUT"></a>OUTPUT</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.output.ansi.enabled =检测＃配置的ANSI输出</span><br></pre></td></tr></table></figure>
<h3 id="PID-FILE（ApplicationPidFileWriter）"><a href="#PID-FILE（ApplicationPidFileWriter）" class="headerlink" title="PID FILE（ApplicationPidFileWriter）"></a>PID FILE（ApplicationPidFileWriter）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.pid.fail-on-write-error = ＃如果使用ApplicationPidFileWriter但它无法写入PID文件，则失败。</span><br><span class="line">spring.pid.file = ＃要写入的PID文件的位置（如果使用ApplicationPidFileWriter）</span><br></pre></td></tr></table></figure>
<h3 id="PROFILES"><a href="#PROFILES" class="headerlink" title="PROFILES"></a>PROFILES</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.profiles.active = ＃逗号分隔的有源配置文件列表。可以通过命令行开关覆盖。</span><br><span class="line">spring.profiles.include = ＃无条件地激活指定的逗号分隔的配置文件列表（如果使用YAML，则激活配置文件列表）。</span><br></pre></td></tr></table></figure>
<h3 id="Quartz调度器（QuartzProperties）"><a href="#Quartz调度器（QuartzProperties）" class="headerlink" title="Quartz调度器（QuartzProperties）"></a>Quartz调度器（QuartzProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">spring.quartz.auto-启动 =真＃是否自动启动初始化后的调度。</span><br><span class="line">spring.quartz.jdbc.comment-prefix =  - #SQL 初始化脚本中单行注释的前缀。</span><br><span class="line">spring.quartz.jdbc.initialize-schema = embedded ＃数据库模式初始化模式。</span><br><span class="line">spring.quartz.jdbc.schema = classpath：org / quartz / impl / jdbcjobstore / tables_ @ @ platform @@ .sql ＃用于初始化数据库模式的SQL文件的路径。</span><br><span class="line">spring.quartz.job-store-type = memory ＃Quartz作业存储类型。</span><br><span class="line">spring.quartz.overwrite-existing-jobs = false ＃配置的作业是否应覆盖现有的作业定义。</span><br><span class="line">spring.quartz.properties。* = ＃其他Quartz Scheduler属性。</span><br><span class="line">spring.quartz.scheduler-name = quartzScheduler ＃调度程序的名称。</span><br><span class="line">spring.quartz.startup-delay = 0s ＃一旦初始化完成，调度程序启动之后的延迟。</span><br><span class="line">spring.quartz.wait-for-jobs-to-complete-on-shutdown = false ＃是否等待在关闭时运行的作业完成。</span><br></pre></td></tr></table></figure>
<h3 id="REACTOR-（ReactorCoreProperties）"><a href="#REACTOR-（ReactorCoreProperties）" class="headerlink" title="REACTOR （ReactorCoreProperties）"></a>REACTOR （ReactorCoreProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.reactor.stacktrace -mode.enabled = false #Reactor 是否应该在运行时收集堆栈跟踪信息。</span><br></pre></td></tr></table></figure>
<h3 id="SENDGRID（SendGridAutoConfiguration）"><a href="#SENDGRID（SendGridAutoConfiguration）" class="headerlink" title="SENDGRID（SendGridAutoConfiguration）"></a>SENDGRID（SendGridAutoConfiguration）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.sendgrid.api-key = ＃SendGrid API密钥。</span><br><span class="line">spring.sendgrid.proxy.host = ＃SendGrid代理主机。</span><br><span class="line">spring.sendgrid.proxy.port = ＃SendGrid代理端口。</span><br></pre></td></tr></table></figure>
<h3 id="TASK-EXECUTION（TaskExecutionProperties）"><a href="#TASK-EXECUTION（TaskExecutionProperties）" class="headerlink" title="TASK EXECUTION（TaskExecutionProperties）"></a>TASK EXECUTION（TaskExecutionProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.task.execution.pool.allow-core-thread-timeout = true ＃是否允许核心线程超时。这可以实现池的动态增长和收缩。</span><br><span class="line">spring.task.execution.pool.core-size = 8 ＃核心线程数。</span><br><span class="line">spring.task.execution.pool.keep-alive = 60s ＃终止之前线程可能保持空闲的时间限制。</span><br><span class="line">spring.task.execution.pool.max-size = ＃允许的最大线程数。如果任务正在填满队列，则池可以扩展到该大小以适应负载。如果队列无限制，则忽略。</span><br><span class="line">spring.task.execution.pool.queue-capacity =＃队列容量。无限制的容量不会增加池，因此会忽略“max-size”属性。</span><br><span class="line">spring.task.execution.thread-name-prefix = task- ＃用于新创建的线程名称的前缀。</span><br></pre></td></tr></table></figure>
<h3 id="TASK-SCHEDULING（TaskSchedulingProperties）"><a href="#TASK-SCHEDULING（TaskSchedulingProperties）" class="headerlink" title="TASK SCHEDULING（TaskSchedulingProperties）"></a>TASK SCHEDULING（TaskSchedulingProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.task.scheduling.pool.size = 1 ＃允许的最大线程数。</span><br><span class="line">spring.task.scheduling.thread-name-prefix = scheduling- ＃用于新创建的线程名称的前缀。</span><br></pre></td></tr></table></figure>
<h2 id="WEB-PROPERTIES"><a href="#WEB-PROPERTIES" class="headerlink" title="WEB PROPERTIES"></a>WEB PROPERTIES</h2><h3 id="EmbEDDED-SERVER-CONFIGURATION（ServerProperties）"><a href="#EmbEDDED-SERVER-CONFIGURATION（ServerProperties）" class="headerlink" title="EmbEDDED SERVER CONFIGURATION（ServerProperties）"></a>EmbEDDED SERVER CONFIGURATION（ServerProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">server.address = ＃服务器应绑定到的网络地址。</span><br><span class="line">server.compression.enabled = false ＃是否启用了响应压缩。</span><br><span class="line">server.compression.excluded-user-agents = ＃逗号分隔的用户代理列表，不应压缩响应。</span><br><span class="line">server.compression.mime-types = text / html，text / xml，text / plain，text / css，text / javascript，application / javascript，application / json，application / xml ＃逗号分隔的MIME类型列表应该是压缩。</span><br><span class="line">server.compression.min-response-size = 2KB＃执行压缩所需的最小“Content-Length”值。</span><br><span class="line">server.connection-timeout = ＃连接器在关闭连接之前等待另一个HTTP请求的时间。未设置时，将使用连接器的特定于容器的默认值。使用值-1表示没有（即无限）超时。</span><br><span class="line">server.error.include-exception = false ＃包含“exception”属性。</span><br><span class="line">server.error.include-stacktrace = never ＃何时包含“stacktrace”属性。</span><br><span class="line">server.error.path = / error ＃错误控制器的路径。</span><br><span class="line">server.error.whitelabel.enabled = true＃是否在服务器出错时启用浏览器中显示的默认错误页面。</span><br><span class="line">server.http2.enabled = false ＃是否启用HTTP / 2支持，如果当前环境支持它。</span><br><span class="line">server.jetty.acceptors = -1 ＃要使用的接受者线程数。当值为-1（默认值）时，接受器的数量是从操作环境派生的。</span><br><span class="line">server.jetty.accesslog.append = false ＃追加到日志。</span><br><span class="line">server.jetty.accesslog.date-format = dd / MMM / yyyy：HH：mm：ss Z ＃请求日志的时间戳格式。</span><br><span class="line">server.jetty.accesslog.enabled = false ＃启用访问日志。</span><br><span class="line">server.jetty.accesslog.extended-format = false＃启用扩展NCSA格式。</span><br><span class="line">server.jetty.accesslog.file-date-format = ＃日期文件名中的日期格式。</span><br><span class="line">server.jetty.accesslog.filename = ＃日志文件名。如果未指定，则日志重定向到“System.err”。</span><br><span class="line">server.jetty.accesslog.locale = ＃请求日志的区域设置。</span><br><span class="line">server.jetty.accesslog.log-cookies = false ＃启用请求cookie的记录。</span><br><span class="line">server.jetty.accesslog.log-latency = false ＃启用请求处理时间的记录。</span><br><span class="line">server.jetty.accesslog.log-server = false ＃启用请求主机名的日志记录。</span><br><span class="line">server.jetty.accesslog.retention-period = 31＃删除旋转日志文件之前的天数。</span><br><span class="line">server.jetty.accesslog.time-zone = GMT ＃请求日志的时区。</span><br><span class="line">server.jetty.max-http-post-size = 200000B #HTTP post或put内容的最大大小。</span><br><span class="line">server.jetty.selectors = -1 ＃要使用的选择器线程数。当值为-1（默认值）时，选择器的数量是从操作环境派生的。</span><br><span class="line">server.max-http-header-size = 8KB #HTTP 邮件头的最大大小。</span><br><span class="line">server.port = 8080 ＃服务器HTTP端口。</span><br><span class="line">server.server-header = ＃用于Server响应头的值（如果为空，则不发送头）。</span><br><span class="line">server.use-forward-headers = ＃是否应将X-Forwarded- *标头应用于HttpRequest。</span><br><span class="line">server.servlet.context-parameters。* = ＃Servlet context init参数。</span><br><span class="line">server.servlet.context-path = ＃应用程序的上下文路径。</span><br><span class="line">server.servlet.application-display-name = application ＃显示</span><br><span class="line">应用程序的名称。server.servlet.jsp.class-name = org.apache.jasper.servlet.JspServlet ＃用于JSP的servlet的类名。</span><br><span class="line">server.servlet.jsp.init-parameters。* = ＃用于配置JSP servlet的Init参数。</span><br><span class="line">server.servlet.jsp.registered = true＃是否已注册JSP servlet。</span><br><span class="line">server.servlet.session.cookie.comment = ＃会话cookie的评论。</span><br><span class="line">server.servlet.session.cookie.domain = ＃会话cookie的域名。</span><br><span class="line">server.servlet.session.cookie.http-only = ＃是否对会话cookie使用“HttpOnly”cookie。</span><br><span class="line">server.servlet.session.cookie.max-age = ＃会话cookie的最大年龄。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">server.servlet.session.cookie.name = ＃会话cookie名称。</span><br><span class="line">server.servlet.session.cookie.path = ＃会话cookie的路径。</span><br><span class="line">server.servlet.session.cookie.secure =＃是否始终将会话cookie标记为安全。</span><br><span class="line">server.servlet.session.persistent = false ＃是否在重新启动之间保留会话数据。</span><br><span class="line">server.servlet.session.store-dir = ＃用于存储会话数据的目录。</span><br><span class="line">server.servlet.session.timeout = 30m ＃会话超时。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">server.servlet.session.tracking-modes = ＃会话跟踪模式。</span><br><span class="line">server.ssl.ciphers = ＃支持的SSL密码。</span><br><span class="line">server.ssl.client-auth = ＃客户端身份验证模式。</span><br><span class="line">server.ssl.enabled = true ＃是否启用SSL支持。</span><br><span class="line">server.ssl.enabled-protocols = ＃启用SSL协议。</span><br><span class="line">server.ssl.key-alias = ＃标识密钥库中密钥的别名。</span><br><span class="line">server.ssl.key-password = ＃用于访问密钥库中密钥的密码。</span><br><span class="line">server.ssl.key-store = ＃保存SSL证书的密钥库的路径（通常是jks文件）。</span><br><span class="line">server.ssl.key-store-password = ＃用于访问密钥库的密码。</span><br><span class="line">server.ssl.key-store-provider = ＃密钥库的提供者。</span><br><span class="line">server.ssl.key-store-type = ＃密钥库的类型。</span><br><span class="line">server.ssl.protocol = TLS ＃要使用的SSL协议。</span><br><span class="line">server.ssl.trust-store = ＃持有SSL证书的信任存储。</span><br><span class="line">server.ssl.trust-store-password = ＃用于访问信任库的密码。</span><br><span class="line">server.ssl.trust-store-provider = ＃信任存储的提供者。</span><br><span class="line">server.ssl.trust-store-type = ＃信任库的类型。</span><br><span class="line">server.tomcat.accept-count = 100 ＃当所有可能的请求处理线程都在使用时，传入连接请求的最大队列长度。</span><br><span class="line">server.tomcat.accesslog.buffered = true ＃是否缓冲输出，使其仅定期刷新。</span><br><span class="line">server.tomcat.accesslog.directory = logs＃创建日志文件的目录。可以绝对或相对于Tomcat基础目录。</span><br><span class="line">server.tomcat.accesslog.enabled = false ＃启用访问日志。</span><br><span class="line">server.tomcat.accesslog.file-date-format = .yyyy-MM-dd ＃要放在日志文件名中的日期格式。</span><br><span class="line">server.tomcat.accesslog.pattern = common ＃访问日志的格式模式。</span><br><span class="line">server.tomcat.accesslog.prefix = access_log ＃日志文件名前缀。</span><br><span class="line">server.tomcat.accesslog.rename-on-rotate = false ＃是否延迟在文件名中包含日期戳，直到旋转时间。</span><br><span class="line">server.tomcat.accesslog.request-attributes-enabled = false＃设置请求的IP地址，主机名，协议和端口的请求属性。</span><br><span class="line">server.tomcat.accesslog.rotate = true ＃是否启用访问日志轮换。</span><br><span class="line">server.tomcat.accesslog.suffix = .log ＃日志文件名后缀。</span><br><span class="line">server.tomcat.additional-tld-skip-patterns = ＃逗号分隔的其他模式列表，这些模式匹配要忽略的TLD扫描的jar。</span><br><span class="line">server.tomcat.background-processor-delay = 10s #backgroundProcess 方法调用之间的延迟。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">server.tomcat.basedir = #Tomcat 基目录。如果未指定，则使用临时目录。</span><br><span class="line">server.tomcat.internal-proxies = 10 \\.\\ d &#123;1,3&#125; \\.\\ d &#123;1,3&#125; \\.\\ d &#123;1,3&#125; | \\</span><br><span class="line">		.192 \\ 168 \\ d &#123;1,3&#125; \\ d &#123;1,3&#125; | \\</span><br><span class="line">		.169 \\ 254 \\ d &#123;1,3&#125; \\ d &#123;1,3&#125; | \\</span><br><span class="line">		.127 \\ d &#123;1,3&#125; \\ d &#123;1,3&#125; \\ d &#123;1,3&#125; | \\</span><br><span class="line">		172 \\ 1 [6-9] &#123;1&#125; \\ d &#123;1,3&#125; \\ d &#123;1,3&#125; |..\\</span><br><span class="line">		172 \\ 2 [0-9] &#123;1&#125; \\ d &#123;1,3&#125; \\ d &#123;1,3&#125; |..\\</span><br><span class="line">		172 \\.3 [0-1] &#123;1&#125; \\.\\ d &#123;1,3&#125; \\.\\ d &#123;1,3&#125; \\</span><br><span class="line">		0：0：0：0：0：0：0：1 \\</span><br><span class="line"> 		:: 1 ＃正则表达式匹配要信任的代理。</span><br><span class="line">server.tomcat.max-connections = 10000 ＃服务器在任何给定时间接受和处理的最大连接数。</span><br><span class="line">server.tomcat.max-http-post-size = 2MB #HTTP 帖子内容的最大大小。</span><br><span class="line">server.tomcat.max-swallow-size = 2MB ＃要吞咽的请求正文的最大数量。</span><br><span class="line">server.tomcat.max-threads = 200 ＃最大工作线程数。</span><br><span class="line">server.tomcat.min-spare-threads = 10 ＃最小工作线程数。</span><br><span class="line">server.tomcat.port-header = X-Forwarded-Port＃用于覆盖原始端口值的HTTP头的名称。</span><br><span class="line">server.tomcat.protocol-header = ＃包含传入协议的头文件，通常命名为“X-Forwarded-Proto”。</span><br><span class="line">server.tomcat.protocol-header-https-value = https ＃协议标头的值，指示传入请求是否使用SSL。</span><br><span class="line">server.tomcat.redirect-context-root = true ＃是否应通过在路径中附加/来重定向对上下文根的请求。</span><br><span class="line">server.tomcat.remote-ip-header = ＃从中提取远程IP的HTTP头的名称。例如，`X-FORWARDED-FOR`。</span><br><span class="line">server.tomcat.resource.allow-caching = true＃是否允许此Web应用程序使用静态资源缓存。</span><br><span class="line">server.tomcat.resource.cache-ttl = ＃静态资源缓存的生存时间。</span><br><span class="line">server.tomcat.uri-encoding = UTF-8 ＃用于解码URI的字符编码。</span><br><span class="line">server.tomcat.use-relative-redirects = ＃通过调用sendRedirect生成的HTTP 1.1和更高版本的位置标头是使用相对还是绝对重定向。</span><br><span class="line">server.undertow.accesslog.dir = #Undertow 访问日志目录。</span><br><span class="line">server.undertow.accesslog.enabled = false ＃是否启用访问日志。</span><br><span class="line">server.undertow.accesslog.pattern = common ＃访问日志的格式模式。</span><br><span class="line">server.undertow.accesslog.prefix = access_log。＃日志文件名前缀。</span><br><span class="line">server.undertow.accesslog.rotate = true ＃是否启用访问日志轮换。</span><br><span class="line">server.undertow.accesslog.suffix = log ＃日志文件名后缀。</span><br><span class="line">server.undertow.buffer-size = ＃每个缓冲区的大小。</span><br><span class="line">server.undertow.direct-buffers = ＃是否在Java堆外部分配缓冲区。默认值源自JVM可用的最大内存量。</span><br><span class="line">server.undertow.eager-filter-init = true ＃是否应在启动时初始化servlet过滤器。</span><br><span class="line">server.undertow.io-threads =＃为worker创建的I / O线程数。默认值源自可用处理器的数量。</span><br><span class="line">server.undertow.max-http-post-size = -1B #HTTP 帖子内容的最大大小。当值为-1时，默认值为大小无限制。</span><br><span class="line">server.undertow.worker-threads = ＃工作线程数。默认值是I / O线程数的8倍。</span><br></pre></td></tr></table></figure>
<h3 id="FREEMARKER（FreeMarkerProperties）"><a href="#FREEMARKER（FreeMarkerProperties）" class="headerlink" title="FREEMARKER（FreeMarkerProperties）"></a>FREEMARKER（FreeMarkerProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">spring.freemarker.allow-request-override = false ＃是否允许HttpServletRequest属性覆盖（隐藏）控制器生成的同名模型属性。</span><br><span class="line">spring.freemarker.allow-session-override = false ＃是否允许HttpSession属性覆盖（隐藏）控制器生成的同名模型属性。</span><br><span class="line">spring.freemarker.cache = false ＃是否启用模板缓存。</span><br><span class="line">spring.freemarker.charset = UTF-8 ＃模板编码。</span><br><span class="line">spring.freemarker.check-template-location = true ＃是否检查模板位置是否存在。</span><br><span class="line">spring.freemarker.content-type = text / html ＃Content-Type value。</span><br><span class="line">spring.freemarker.enabled = true ＃是否为此技术启用MVC视图分辨率。</span><br><span class="line">spring.freemarker.expose-request-attributes = false ＃是否应在与模板合并之前将所有请求属性添加到模型中。</span><br><span class="line">spring.freemarker.expose-session-attributes = false ＃是否应在与模板合并之前将所有HttpSession属性添加到模型中。</span><br><span class="line">spring.freemarker.expose-spring-macro-helpers = true ＃是否公开一个RequestContext供Spring的宏库使用，名称为“springMacroRequestContext”。</span><br><span class="line">spring.freemarker.prefer-file-system-access = true ＃是否更喜欢文件系统访问以进行模板加载。文件系统访问可以热检测模板更改。</span><br><span class="line">spring.freemarker.prefix = ＃在构建URL时添加前缀以查看名称的前缀。</span><br><span class="line">spring.freemarker.request-context-attribute = ＃所有视图的</span><br><span class="line">RequestContext属性的名称。spring.freemarker.settings。* = ＃众所周知的FreeMarker密钥，传递给FreeMarker的配置。</span><br><span class="line">spring.freemarker.suffix = .ftl ＃在构建URL时附加到视图名称的后缀。</span><br><span class="line">spring.freemarker.template-loader-path = classpath：/ templates /＃逗号分隔的模板路径列表。</span><br><span class="line">spring.freemarker.view-names = ＃可以解析的视图名称的白名单。</span><br></pre></td></tr></table></figure>
<h3 id="GLOVY-TEMPLATES（GroovyTemplateProperties）"><a href="#GLOVY-TEMPLATES（GroovyTemplateProperties）" class="headerlink" title="GLOVY TEMPLATES（GroovyTemplateProperties）"></a>GLOVY TEMPLATES（GroovyTemplateProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">spring.groovy.template.allow-request-override = false ＃是否允许HttpServletRequest属性覆盖（隐藏）控制器生成的同名模型属性。</span><br><span class="line">spring.groovy.template.allow-session-override = false ＃是否允许HttpSession属性覆盖（隐藏）控制器生成的同名模型属性。</span><br><span class="line">spring.groovy.template.cache = false ＃是否启用模板缓存。</span><br><span class="line">spring.groovy.template.charset = UTF-8 ＃模板编码。</span><br><span class="line">spring.groovy.template.check-template-location = true＃是否检查模板位置是否存在。</span><br><span class="line">spring.groovy.template.configuration。* = ＃请参阅GroovyMarkupConfigurer </span><br><span class="line">spring.groovy.template.content-type = text / html ＃Content-Type value。</span><br><span class="line">spring.groovy.template.enabled = true ＃是否为此技术启用MVC视图分辨率。</span><br><span class="line">spring.groovy.template.expose-request-attributes = false ＃是否应在与模板合并之前将所有请求属性添加到模型中。</span><br><span class="line">spring.groovy.template.expose-session-attributes = false ＃在与模板合并之前是否应将所有HttpSession属性添加到模型中。</span><br><span class="line">spring.groovy.template.expose-spring-macro-helpers = true ＃是否公开一个RequestContext供Spring的宏库使用，名称为“springMacroRequestContext”。</span><br><span class="line">spring.groovy.template.prefix = ＃在构建URL时添加前缀以查看名称的前缀。</span><br><span class="line">spring.groovy.template.request-context-attribute = ＃所有视图的</span><br><span class="line">RequestContext属性的名称。spring.groovy.template.resource-loader-path = classpath：/ templates / ＃Template path。</span><br><span class="line">spring.groovy.template.suffix = .tpl ＃在构建URL时附加到视图名称的后缀。</span><br><span class="line">spring.groovy.template.view-names =＃可以解析的视图名称的白名单。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-HATEOAS（HateoasProperties）"><a href="#SPRING-HATEOAS（HateoasProperties）" class="headerlink" title="SPRING HATEOAS（HateoasProperties）"></a>SPRING HATEOAS（HateoasProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.hateoas.use-hal-as-default-json-media-type = true ＃是否应将application / hal + json响应发送给接受application / json的请求。</span><br></pre></td></tr></table></figure>
<h3 id="HTTP-（HttpProperties）"><a href="#HTTP-（HttpProperties）" class="headerlink" title="HTTP （HttpProperties）"></a>HTTP （HttpProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">spring.http.converters.preferred-json-mapper = ＃用于HTTP消息转换的首选JSON映射器。默认情况下，根据环境自动检测。</span><br><span class="line">spring.http.encoding.charset = UTF-8 #HTTP 请求和响应的字符集。如果未明确设置，则添加到“Content-Type”标头。</span><br><span class="line">spring.http.encoding.enabled = true ＃是否启用http编码支持。</span><br><span class="line">spring.http.encoding.force = ＃是否在HTTP请求和响应上强制编码到已配置的字符集。</span><br><span class="line">spring.http.encoding.force-request =＃是否在HTTP请求中强制编码到配置的字符集。如果未指定“force”，则默认为true。</span><br><span class="line">spring.http.encoding.force-response = ＃是否在HTTP响应中强制编码到配置的字符集。</span><br><span class="line">spring.http.encoding.mapping = ＃用于编码映射的Locale。</span><br><span class="line">spring.http.log-request-details = false ＃是否允许在DEBUG和TRACE级别记录（可能敏感的）请求详细信息。</span><br></pre></td></tr></table></figure>
<h3 id="MULTIPART-（MultipartProperties）"><a href="#MULTIPART-（MultipartProperties）" class="headerlink" title="MULTIPART （MultipartProperties）"></a>MULTIPART （MultipartProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.servlet.multipart.enabled = true ＃是否启用分段上传支持。</span><br><span class="line">spring.servlet.multipart.file-size-threshold = 0B ＃将文件写入磁盘后的阈值。</span><br><span class="line">spring.servlet.multipart.location = ＃上传文件的中间位置。</span><br><span class="line">spring.servlet.multipart.max-file-size = 1MB ＃最大文件大小。</span><br><span class="line">spring.servlet.multipart.max-request-size = 10MB ＃最大请求大小。</span><br><span class="line">spring.servlet.multipart.resolve-lazily = false ＃是否在文件或参数访问时懒惰地解析多部分请求。</span><br></pre></td></tr></table></figure>
<h3 id="JACKSON-（JacksonProperties）"><a href="#JACKSON-（JacksonProperties）" class="headerlink" title="JACKSON （JacksonProperties）"></a>JACKSON （JacksonProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">spring.jackson.date-format = ＃日期格式字符串或完全限定的日期格式类名。例如，`yyyy-MM-dd HH：mm：ss`。</span><br><span class="line">spring.jackson.default-property-inclusion = ＃控制序列化期间包含的属性。配置了Jackson的JsonInclude.Include枚举中的一个值。</span><br><span class="line">spring.jackson.deserialization。* = #Jackson on / off功能会影响Java对象的反序列化方式。</span><br><span class="line">spring.jackson.generator。* = ＃Jackson开/关功能的发电机。</span><br><span class="line">spring.jackson.joda-date-time-format =#Joda日期时间格式字符串。如果未配置，如果使用格式字符串配置，则使用“date-format”作为后备。</span><br><span class="line">spring.jackson.locale = ＃用于格式化的区域设置。</span><br><span class="line">spring.jackson.mapper。* = #Jackson 通用开/关功能。</span><br><span class="line">spring.jackson.parser。* = ＃Jackson开启/关闭解析器的功能。</span><br><span class="line">spring.jackson.property-naming-strategy = #Jackson PropertyNamingStrategy的常数之一。也可以是PropertyNamingStrategy子类的完全限定类名。</span><br><span class="line">spring.jackson.serialization。* = #Jacker on / off功能会影响Java对象的序列化方式。</span><br><span class="line">spring.jackson.time-zone =＃格式化日期时使用的时区。例如，“America / Los_Angeles”或“GMT + 10”。</span><br><span class="line">spring.jackson.visibility。* = #Jackson 可见性阈值，可用于限制自动检测哪些方法（和字段）。</span><br></pre></td></tr></table></figure>
<h3 id="GSON（GsonProperties）"><a href="#GSON（GsonProperties）" class="headerlink" title="GSON（GsonProperties）"></a>GSON（GsonProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">spring.gson.date-format = ＃序列化Date对象时使用的格式。</span><br><span class="line">spring.gson.disable -html-escaping = ＃是否禁用HTML字符的转义，例如&apos;&lt;&apos;，&apos;&gt;&apos;等</span><br><span class="line">spring.gson.disable-inner-class-serialization = ＃是否在内容类中排除内部类序列化。</span><br><span class="line">spring.gson.enable-complex-map-key-serialization = ＃是否启用复杂映射键（即非基元）的序列化。</span><br><span class="line">spring.gson.exclude-fields-without-expose-annotation = ＃是否排除所有不考虑序列化或反序列化但没有“Expose”注释的字段。</span><br><span class="line">spring.gson.field-naming-policy = ＃在序列化和反序列化期间应该应用于对象字段的命名策略。</span><br><span class="line">spring.gson.generate-non-executable-json = ＃是否通过在输出前添加一些特殊文本来生成不可执行的JSON。</span><br><span class="line">spring.gson.lenient = ＃是否宽容解析不符合RFC 4627的</span><br><span class="line">JSON.chring.gson.long-serialization-policy = ＃长和长类型的序列化策略。</span><br><span class="line">spring.gson.pretty-printing = ＃是否输出适合页面的序列化JSON以进行漂亮的打印。</span><br><span class="line">spring.gson.serialize-nulls = ＃是否序列化空字段。</span><br></pre></td></tr></table></figure>
<h3 id="JERSEY-（JerseyProperties）"><a href="#JERSEY-（JerseyProperties）" class="headerlink" title="JERSEY （JerseyProperties）"></a>JERSEY （JerseyProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.jersey.application-path = ＃作为应用程序基URI的路径。如果指定，则覆盖“@ApplicationPath”的值。</span><br><span class="line">spring.jersey.filter.order = 0 ＃Jersey过滤链顺序。</span><br><span class="line">spring.jersey.init。* = ＃通过servlet或过滤器传递给Jersey的Init参数。</span><br><span class="line">spring.jersey.servlet.load-on-startup = -1 ＃加载Jersey servlet的启动优先级。</span><br><span class="line">spring.jersey.type = servlet ＃Jersey集成类型。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-LDAP（LdapProperties）"><a href="#SPRING-LDAP（LdapProperties）" class="headerlink" title="SPRING LDAP（LdapProperties）"></a>SPRING LDAP（LdapProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.ldap.anonymous-read-only = false ＃只读操作是否应使用匿名环境。</span><br><span class="line">spring.ldap.base = #Base 后缀，所有操作都应该来自该后缀。</span><br><span class="line">spring.ldap.base-environment。* = #LDAP 规范设置。</span><br><span class="line">spring.ldap.password = ＃服务器的登录密码。</span><br><span class="line">spring.ldap.urls = ＃服务器的LDAP URL。</span><br><span class="line">spring.ldap.username = ＃登录服务器的用户名。</span><br></pre></td></tr></table></figure>
<h3 id="EMBEDDED-LDAP（EmbeddedLdapProperties）"><a href="#EMBEDDED-LDAP（EmbeddedLdapProperties）" class="headerlink" title="EMBEDDED LDAP（EmbeddedLdapProperties）"></a>EMBEDDED LDAP（EmbeddedLdapProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring.ldap.embedded.base-dn = ＃基本DN列表。</span><br><span class="line">spring.ldap.embedded.credential.username = ＃嵌入式LDAP用户名。</span><br><span class="line">spring.ldap.embedded.credential.password = ＃嵌入式LDAP密码。</span><br><span class="line">spring.ldap.embedded.ldif = classpath：schema.ldif #Schema （LDIF）脚本资源引用。</span><br><span class="line">spring.ldap.embedded.port = 0 ＃嵌入式LDAP端口。</span><br><span class="line">spring.ldap.embedded.validation.enabled = true ＃是否启用LDAP模式验证。</span><br><span class="line">spring.ldap.embedded.validation.schema = ＃自定义架构的路径。</span><br></pre></td></tr></table></figure>
<h3 id="MUSTACHE-TEMPLATES（MustacheAutoConfiguration）"><a href="#MUSTACHE-TEMPLATES（MustacheAutoConfiguration）" class="headerlink" title="MUSTACHE TEMPLATES（MustacheAutoConfiguration）"></a>MUSTACHE TEMPLATES（MustacheAutoConfiguration）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">spring.mustache.allow-request-override = false ＃是否允许HttpServletRequest属性覆盖（隐藏）控制器生成的同名模型属性。</span><br><span class="line">spring.mustache.allow-session-override = false ＃是否允许HttpSession属性覆盖（隐藏）控制器生成的同名模型属性。</span><br><span class="line">spring.mustache.cache = false ＃是否启用模板缓存。</span><br><span class="line">spring.mustache.charset = UTF-8 ＃模板编码。</span><br><span class="line">spring.mustache.check-template-location = true ＃是否检查模板位置是否存在。</span><br><span class="line">spring.mustache.content-type = text / html ＃Content-Type value。</span><br><span class="line">spring.mustache.enabled = true ＃是否为此技术启用MVC视图分辨率。</span><br><span class="line">spring.mustache.expose-request-attributes = false ＃在与模板合并之前是否应将所有请求属性添加到模型中。</span><br><span class="line">spring.mustache.expose-session-attributes = false ＃在与模板合并之前是否应将所有HttpSession属性添加到模型中。</span><br><span class="line">spring.mustache.expose-spring-macro-helpers = true ＃是否公开一个RequestContext供Spring的宏库使用，名称为“springMacroRequestContext”。</span><br><span class="line">spring.mustache.prefix= classpath：/ templates / ＃适用于模板名称的前缀。</span><br><span class="line">spring.mustache.request-context-attribute = ＃所有视图的</span><br><span class="line">RequestContext属性的名称。spring.mustache.suffix = .mustache ＃后缀应用于模板名称。</span><br><span class="line">spring.mustache.view-names = ＃可以解析的视图名称的白名单。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-MVC（WebMvcProperties）"><a href="#SPRING-MVC（WebMvcProperties）" class="headerlink" title="SPRING MVC（WebMvcProperties）"></a>SPRING MVC（WebMvcProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">spring.mvc.async.request-timeout = ＃异步请求处理超时之前的时间。</span><br><span class="line">spring.mvc.contentnegotiation.favor-parameter = false ＃是否应使用请求参数（默认为“format”）来确定请求的媒体类型。</span><br><span class="line">spring.mvc.contentnegotiation.favor-path-extension = false ＃是否应使用URL路径中的路径扩展来确定所请求的媒体类型。</span><br><span class="line">spring.mvc.contentnegotiation.media-types。* = ＃映射内容协商的媒体类型的文件扩展名。例如，yml到text / yaml。</span><br><span class="line">spring.mvc.contentnegotiation.parameter-name =＃启用“favor-parameter”时要使用的查询参数名称。</span><br><span class="line">spring.mvc.date-format = ＃要使用的日期格式。例如，`dd / MM / yyyy`。</span><br><span class="line">spring.mvc.dispatch-trace-request = false ＃是否将TRACE请求分派给FrameworkServlet doService方法。</span><br><span class="line">spring.mvc.dispatch-options-request = true ＃是否将OPTIONS请求分派给FrameworkServlet doService方法。</span><br><span class="line">spring.mvc.favicon.enabled = true ＃是否启用favicon.ico的解析。</span><br><span class="line">spring.mvc.formcontent.filter.enabled = true ＃是否启用Spring的FormContentFilter。</span><br><span class="line">spring.mvc.hiddenmethod.filter.enabled = true＃是否启用Spring的HiddenHttpMethodFilter。</span><br><span class="line">spring.mvc.ignore-default-model-on-redirect = true ＃在重定向场景中是否应忽略“默认”模型的内容。</span><br><span class="line">spring.mvc.locale = ＃要使用的语言环境。默认情况下，“Accept-Language”标头会覆盖此区域设置。</span><br><span class="line">spring.mvc.locale-resolver = accept-header ＃定义应如何解析语言环境。</span><br><span class="line">spring.mvc.log-resolved-exception = false ＃是否启用由“HandlerExceptionResolver”解析的异常的警告日志记录，“DefaultHandlerExceptionResolver”除外。</span><br><span class="line">spring.mvc.message-codes-resolver-format =＃格式化消息代码的策略。例如，`PREFIX_ERROR_CODE`。</span><br><span class="line">spring.mvc.pathmatch.use-registered-suffix-pattern = false ＃后缀模式匹配是否仅适用于使用“spring.mvc.contentnegotiation.media-types。*”注册的扩展。</span><br><span class="line">spring.mvc.pathmatch.use-suffix-pattern = false ＃将模式与请求匹配时是否使用后缀模式匹配（“。*”）。</span><br><span class="line">spring.mvc.servlet.load-on-startup = -1 ＃加载调度程序servlet的启动优先级。</span><br><span class="line">spring.mvc.servlet.path = / ＃调度程序servlet的路径。</span><br><span class="line">spring.mvc.static-path-pattern = / ** ＃用于静态资源的路径模式。</span><br><span class="line">spring.mvc.throw-exception-if-no-handler-found = false ＃如果没有找到Handler来处理请求，是否应该抛出“NoHandlerFoundException”。</span><br><span class="line">spring.mvc.view.prefix = #Spring MVC视图前缀。</span><br><span class="line">spring.mvc.view.suffix = #Spring MVC视图后缀。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-RESOURCES-HANDLING（ResourceProperties）"><a href="#SPRING-RESOURCES-HANDLING（ResourceProperties）" class="headerlink" title="SPRING RESOURCES HANDLING（ResourceProperties）"></a>SPRING RESOURCES HANDLING（ResourceProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">spring.resources.add-mappings = true ＃是否启用默认资源处理。</span><br><span class="line">spring.resources.cache.cachecontrol.cache-private = ＃表示响应消息仅供单个用户使用，不得由共享高速缓存存储。</span><br><span class="line">spring.resources.cache.cachecontrol.cache-public = ＃表示任何缓存都可以存储响应。</span><br><span class="line">spring.resources.cache.cachecontrol.max-age = ＃应该缓存响应的最长时间，如果未指定持续时间后缀，则以秒为单位。</span><br><span class="line">spring.resources.cache.cachecontrol.must-revalidate =＃表示一旦它变得陈旧，缓存一定不能使用响应而不用服务器重新验证它。</span><br><span class="line">spring.resources.cache.cachecontrol.no-cache = ＃表示只有在与服务器重新验证时才能重用缓存的响应。</span><br><span class="line">spring.resources.cache.cachecontrol.no-store = ＃表示在任何情况下都不缓存响应。</span><br><span class="line">spring.resources.cache.cachecontrol.no-transform = ＃表明他们不应该转换响应内容的中介（缓存和其他人）。</span><br><span class="line">spring.resources.cache.cachecontrol.proxy-revalidate = ＃与“must-revalidate”指令的含义相同，但它不适用于私有缓存。</span><br><span class="line">spring.resources.cache.cachecontrol.s-max-age = ＃共享缓存应缓存响应的最长时间，如果未指定持续时间后缀，则以秒为单位。</span><br><span class="line">spring.resources.cache.cachecontrol.stale-if-error = ＃遇到错误时可以使用响应的最长时间，如果未指定持续时间后缀，则以秒为单位。</span><br><span class="line">spring.resources.cache.cachecontrol.stale-while-revalidate = ＃响应变为失效后可以响应的最长时间，如果未指定持续时间后缀，则以秒为单位。</span><br><span class="line">spring.resources.cache.period = ＃资源处理程序所服务资源的缓存周期。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">spring.resources.chain.cache= true ＃是否在资源链中启用缓存。</span><br><span class="line">spring.resources.chain.compressed = false ＃是否启用已压缩资源的解析（gzip，brotli）。</span><br><span class="line">spring.resources.chain.enabled = ＃是否启用Spring资源处理链。默认情况下，禁用，除非至少启用了一个策略。</span><br><span class="line">spring.resources.chain.html-application-cache = false ＃是否启用HTML5应用程序缓存清单重写。</span><br><span class="line">spring.resources.chain.strategy.content.enabled = false ＃是否启用内容版本策略。</span><br><span class="line">spring.resources.chain.strategy.content.paths = / **＃逗号分隔的模式列表，应用于内容版本策略。</span><br><span class="line">spring.resources.chain.strategy.fixed.enabled = false ＃是否启用固定版本策略。</span><br><span class="line">spring.resources.chain.strategy.fixed.paths = / ** ＃以逗号分隔的模式列表应用于固定版本策略。</span><br><span class="line">spring.resources.chain.strategy.fixed.version = ＃用于固定版本策略的版本字符串。</span><br><span class="line">spring.resources.static-locations = classpath：/ META-INF / resources /，classpath：/ resources /，classpath：/ static /，classpath：/ public / ＃静态资源的位置。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-SESSION（SessionProperties）"><a href="#SPRING-SESSION（SessionProperties）" class="headerlink" title="SPRING SESSION（SessionProperties）"></a>SPRING SESSION（SessionProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.session.store-type = ＃会话存储类型。</span><br><span class="line">spring.session.timeout = ＃会话超时。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">spring.session.servlet.filter-order = -2147483598 ＃会话存储库过滤顺序。</span><br><span class="line">spring.session.servlet.filter-dispatcher-types = async，error，request ＃会话存储库过滤器调度程序类型。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-SESSION-HAZELCAST（HazelcastSessionProperties）"><a href="#SPRING-SESSION-HAZELCAST（HazelcastSessionProperties）" class="headerlink" title="SPRING SESSION HAZELCAST（HazelcastSessionProperties）"></a>SPRING SESSION HAZELCAST（HazelcastSessionProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.session.hazelcast.flush-mode = on-save #sessions flush mode。</span><br><span class="line">spring.session.hazelcast.map-name = spring：session：sessions ＃用于存储会话的地图的名称。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-SESSION-JDBC（JdbcSessionProperties）"><a href="#SPRING-SESSION-JDBC（JdbcSessionProperties）" class="headerlink" title="SPRING SESSION JDBC（JdbcSessionProperties）"></a>SPRING SESSION JDBC（JdbcSessionProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.session.jdbc.cleanup-cron = 0 * * * * * #cron 表达式用于过期的会话清理作业。</span><br><span class="line">spring.session.jdbc.initialize-schema = embedded ＃数据库模式初始化模式。</span><br><span class="line">spring.session.jdbc.schema = classpath中：组织/ springframework的/会话/ JDBC / schema- @ @ 平台@ @ .SQL ＃的路径SQL文件，以用于初始化数据库架构。</span><br><span class="line">spring.session.jdbc.table-name = SPRING_SESSION ＃用于存储会话的数据库表的名称。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-SESSION-MONGODB（MongoSessionProperties）"><a href="#SPRING-SESSION-MONGODB（MongoSessionProperties）" class="headerlink" title="SPRING SESSION MONGODB（MongoSessionProperties）"></a>SPRING SESSION MONGODB（MongoSessionProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.session.mongodb.collection-name = sessions ＃用于存储会话的集合名称。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-SESSION-REDIS（RedisSessionProperties）"><a href="#SPRING-SESSION-REDIS（RedisSessionProperties）" class="headerlink" title="SPRING SESSION REDIS（RedisSessionProperties）"></a>SPRING SESSION REDIS（RedisSessionProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.session.redis.cleanup-cron = 0 * * * * * #cron 表达式用于过期的会话清理作业。</span><br><span class="line">spring.session.redis.flush-mode = on-save #sessions flush mode。</span><br><span class="line">spring.session.redis.namespace = spring：session ＃用于存储会话的密钥的命名空间。</span><br></pre></td></tr></table></figure>
<h3 id="THYMELEAF（ThymeleafAutoConfiguration）"><a href="#THYMELEAF（ThymeleafAutoConfiguration）" class="headerlink" title="THYMELEAF（ThymeleafAutoConfiguration）"></a>THYMELEAF（ThymeleafAutoConfiguration）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">spring.thymeleaf.cache = true ＃是否启用模板缓存。</span><br><span class="line">spring.thymeleaf.check-template = true ＃是否在呈现模板之前检查模板是否存在。</span><br><span class="line">spring.thymeleaf.check-template-location = true ＃是否检查模板位置是否存在。</span><br><span class="line">spring.thymeleaf.enabled = true ＃是否为Web框架启用Thymeleaf视图解析。</span><br><span class="line">spring.thymeleaf.enable-spring-el-compiler = false ＃在SpringEL表达式中启用SpringEL编译器。</span><br><span class="line">spring.thymeleaf.encoding = UTF-8 ＃模板文件编码。</span><br><span class="line">spring.thymeleaf.excluded-view-names = ＃逗号分隔的视图名称列表（允许的模式）应从分辨率中排除。</span><br><span class="line">spring.thymeleaf.mode = HTML ＃要应用于模板的模板模式。另请参见Thymeleaf的TemplateMode枚举。</span><br><span class="line">spring.thymeleaf.prefix = classpath：/ templates / ＃在构建URL时添加前缀以查看名称的前缀。</span><br><span class="line">spring.thymeleaf.reactive.chunked-mode-view-names = ＃逗号分隔的视图名称列表（允许的模式），当设置了最大块大小时，它应该是在CHUNKED模式下执行的唯一列表。</span><br><span class="line">spring.thymeleaf.reactive.full-mode-view-names =＃逗号分隔的视图名称列表（允许的模式），即使设置了最大块大小，也应该在FULL模式下执行。</span><br><span class="line">spring.thymeleaf.reactive.max-chunk-size = 0B ＃用于写入响应的数据缓冲区的最大大小。</span><br><span class="line">spring.thymeleaf.reactive.media-types = ＃视图技术支持的媒体类型。</span><br><span class="line">spring.thymeleaf.render-hidden-markers-before-checkboxes = false ＃是否应在复选框元素本身之前呈现隐藏的表单输入作为复选框的标记。</span><br><span class="line">spring.thymeleaf.servlet.content-type = text / html ＃Content-Type写入HTTP响应的值。</span><br><span class="line">spring.thymeleaf.servlet.produce-partial-output-while-processing = true#Thymeleaf是否应尽快开始编写部分输出或缓冲直到模板处理完成。</span><br><span class="line">spring.thymeleaf.suffix = .html ＃在构建URL时附加到视图名称的后缀。</span><br><span class="line">spring.thymeleaf.template-resolver-order = ＃链中模板解析器的顺序。</span><br><span class="line">spring.thymeleaf.view-names = ＃逗号分隔的视图名称列表（允许的模式），可以解析。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-WEBFLUX（WebFluxProperties）"><a href="#SPRING-WEBFLUX（WebFluxProperties）" class="headerlink" title="SPRING WEBFLUX（WebFluxProperties）"></a>SPRING WEBFLUX（WebFluxProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.webflux.date-format = ＃要使用的日期格式。例如，`dd / MM / yyyy`。</span><br><span class="line">spring.webflux.hiddenmethod.filter.enabled = true ＃是否启用Spring的HiddenHttpMethodFilter。</span><br><span class="line">spring.webflux.static-path-pattern = / ** ＃用于静态资源的路径模式。</span><br></pre></td></tr></table></figure>
<h3 id="SPRING-WEB-SERVICES（WebServicesProperties）"><a href="#SPRING-WEB-SERVICES（WebServicesProperties）" class="headerlink" title="SPRING WEB SERVICES（WebServicesProperties）"></a>SPRING WEB SERVICES（WebServicesProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.webservices.path = / services ＃作为服务基URI的路径。</span><br><span class="line">spring.webservices.servlet.init = ＃Servlet init参数传递给Spring Web Services。</span><br><span class="line">spring.webservices.servlet.load-on-startup = -1 ＃加载Spring Web Services servlet的启动优先级。</span><br><span class="line">spring.webservices.wsdl-locations = ＃逗号分隔的WSDL位置列表以及要作为bean公开的随附XSD。</span><br></pre></td></tr></table></figure>
<h2 id="SECURITY-PROPERTIES"><a href="#SECURITY-PROPERTIES" class="headerlink" title="SECURITY PROPERTIES"></a>SECURITY PROPERTIES</h2><h3 id="SECURITY（SecurityProperties）"><a href="#SECURITY（SecurityProperties）" class="headerlink" title="SECURITY（SecurityProperties）"></a>SECURITY（SecurityProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.security.filter.order = -100 ＃安全过滤器链顺序。</span><br><span class="line">spring.security.filter.dispatcher-types = async，error，request ＃安全过滤器链调度程序类型。</span><br><span class="line">spring.security.user.name = user ＃默认用户名。</span><br><span class="line">spring.security.user.password = ＃默认用户名的密码。</span><br><span class="line">spring.security.user.roles = ＃授予默认用户名的角色。</span><br></pre></td></tr></table></figure>
<h3 id="SECURITY-OAUTH2-CLIENT（OAuth2ClientProperties）"><a href="#SECURITY-OAUTH2-CLIENT（OAuth2ClientProperties）" class="headerlink" title="SECURITY OAUTH2 CLIENT（OAuth2ClientProperties）"></a>SECURITY OAUTH2 CLIENT（OAuth2ClientProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.security.oauth2.client.provider。* = ＃OAuth提供商详细信息。</span><br><span class="line">spring.security.oauth2.client.registration。* = ＃OAuth客户注册。</span><br></pre></td></tr></table></figure>
<h3 id="SECURITY-OAUTH2-RESOURCE-SERVER（OAuth2ResourceServerProperties）"><a href="#SECURITY-OAUTH2-RESOURCE-SERVER（OAuth2ResourceServerProperties）" class="headerlink" title="SECURITY OAUTH2 RESOURCE SERVER（OAuth2ResourceServerProperties）"></a>SECURITY OAUTH2 RESOURCE SERVER（OAuth2ResourceServerProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.security.oauth2.resourceserver.jwt.jwk-set-uri = ＃JSON用于验证JWT令牌的Web Key URI。</span><br><span class="line">spring.security.oauth2.resourceserver.jwt.issuer-uri = #OpenID Connect Provider声明为其颁发者标识符的URI。</span><br></pre></td></tr></table></figure>
<h2 id="DATA-PROPERTIES"><a href="#DATA-PROPERTIES" class="headerlink" title="DATA PROPERTIES"></a>DATA PROPERTIES</h2><h3 id="FLYWAY-（FlywayProperties）"><a href="#FLYWAY-（FlywayProperties）" class="headerlink" title="FLYWAY （FlywayProperties）"></a>FLYWAY （FlywayProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">spring.flyway.baseline-description = &lt;&lt; Flyway Baseline &gt;&gt; ＃描述在应用基线时标记现有模式。</span><br><span class="line">spring.flyway.baseline-on-migrate = false ＃是否在迁移非空架构时自动调用基线。</span><br><span class="line">spring.flyway.baseline-version = 1 ＃用于在执行基线时标记现有模式的版本。</span><br><span class="line">spring.flyway.check-location = true ＃是否检查迁移脚本位置是否存在。</span><br><span class="line">spring.flyway.clean-disabled = false ＃是否禁用数据库清理。</span><br><span class="line">spring.flyway.clean-on-validation-error = false＃发生验证错误时是否自动调用clean。</span><br><span class="line">spring.flyway.connect-retries = 0 ＃尝试连接数据库时的最大重试次数。</span><br><span class="line">spring.flyway.enabled = true ＃是否启用flyway。</span><br><span class="line">spring.flyway.encoding = UTF-8 #SQL 迁移的编码。</span><br><span class="line">spring.flyway.group = false ＃是否在应用它们时在同一事务中将所有挂起的迁移组合在一起。</span><br><span class="line">spring.flyway.ignore-future-migrations = true ＃在读取架构历史记录表时是否忽略未来的迁移。</span><br><span class="line">spring.flyway.ignore-ignored-migrations = false＃是否在读取模式历史记录表时忽略忽略的迁移。</span><br><span class="line">spring.flyway.ignore-missing-migrations = false ＃是否在读取模式历史记录表时忽略缺少的迁移。</span><br><span class="line">spring.flyway.ignore-pending-migrations = false ＃在读取架构历史记录表时是否忽略挂起的迁移。</span><br><span class="line">spring.flyway.init-sqls = ＃在获取连接后立即执行以初始化连接的SQL语句。</span><br><span class="line">spring.flyway.installed-by = ＃用户名在架构历史记录表中记录为已应用迁移。</span><br><span class="line">spring.flyway.locations = classpath：db / migration＃迁移脚本的位置。可以包含特殊的“&#123;vendor&#125;”占位符以使用特定于供应商的位置。</span><br><span class="line">spring.flyway.mixed = false ＃是否允许在同一迁移中混合事务和非事务语句。</span><br><span class="line">spring.flyway.out-of-order = false ＃是否允许迁移无序运行。</span><br><span class="line">spring.flyway.password = ＃要迁移的数据库的登录密码。</span><br><span class="line">spring.flyway.placeholder-prefix = $ &#123; ＃迁移脚本中占位符的前缀。</span><br><span class="line">spring.flyway.placeholder-replacement = true ＃在迁移脚本中执行占位符替换。</span><br><span class="line">spring.flyway.placeholder-suffix =&#125;＃迁移脚本中占位符的后缀。</span><br><span class="line">spring.flyway.placeholders = ＃占位符及其替换应用于sql迁移脚本。</span><br><span class="line">spring.flyway.repeatable-sql-migration-prefix = R ＃可重复SQL迁移的文件名前缀。</span><br><span class="line">spring.flyway.schemas = ＃由Flyway 管理的方案名称（区分大小写）。</span><br><span class="line">spring.flyway.skip-default-callbacks = false ＃是否跳过默认回调。如果为true，则仅使用自定义回调。</span><br><span class="line">spring.flyway.skip-default-resolvers = false ＃是否跳过默认的解析器。如果为true，则仅使用自定义解析程序。</span><br><span class="line">spring.flyway.sql-migration-prefix = V.#SQL迁移的文件名前缀。</span><br><span class="line">spring.flyway.sql-migration-separator = __ #SQL迁移的文件名分隔符。</span><br><span class="line">spring.flyway.sql-migration-suffixes = .sql #SQL迁移的文件名后缀。</span><br><span class="line">spring.flyway.table = flyway_schema_history ＃将由 Flyway 使用的架构架构历史记录表的名称。</span><br><span class="line">spring.flyway.target = ＃应考虑迁移的目标版本。</span><br><span class="line">spring.flyway.url = 要迁移的数据库的JDBC url。如果未设置，则使用主要配置的数据源。</span><br><span class="line">spring.flyway.user = ＃要迁移的数据库的登录用户。</span><br><span class="line">spring.flyway.validate-on-migrate = true ＃是否在执行迁移时自动调用validate。</span><br></pre></td></tr></table></figure>
<h3 id="LIQUIBASE（LiquibaseProperties）"><a href="#LIQUIBASE（LiquibaseProperties）" class="headerlink" title="LIQUIBASE（LiquibaseProperties）"></a>LIQUIBASE（LiquibaseProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">spring.liquibase.change-log = classpath：/db/changelog/db.changelog-master.yaml# 更改日志配置路径。</span><br><span class="line">spring.liquibase.check-change-log-location = true ＃是否检查更改日志位置是否存在。</span><br><span class="line">spring.liquibase.contexts = ＃逗号分隔的运行时上下文列表。</span><br><span class="line">spring.liquibase.database-change-log-lock-table = DATABASECHANGELOGLOCK ＃用于跟踪并发Liquibase用法的表的名称。</span><br><span class="line">spring.liquibase.database-change-log-table = DATABASECHANGELOG ＃用于跟踪更改历史记录的表的名称。</span><br><span class="line">spring.liquibase.default-model= ＃默认数据库架构。</span><br><span class="line">spring.liquibase.drop-first = false ＃是否首先删除数据库模式。</span><br><span class="line">spring.liquibase.enabled = true ＃是否启用Liquibase支持。</span><br><span class="line">spring.liquibase.labels = ＃逗号分隔的运行时标签列表。</span><br><span class="line">spring.liquibase.liquibase-schema = #Schema用于Liquibase对象。</span><br><span class="line">spring.liquibase.liquibase-tablespace = ＃用于Liquibase对象的表空间。</span><br><span class="line">spring.liquibase.parameters。* = ＃更改日志参数。</span><br><span class="line">spring.liquibase.password = ＃要迁移的数据库的登录密码。</span><br><span class="line">spring.liquibase.rollback-file = ＃执行更新时写入回滚SQL的文件。</span><br><span class="line">spring.liquibase.test-rollback-on-update = false ＃是否应在执行更新之前测试回滚。</span><br><span class="line">spring.liquibase.url = ＃JDBC要迁移的数据库的URL。如果未设置，则使用主要配置的数据源。</span><br><span class="line">spring.liquibase.user = ＃要迁移的数据库的登录用户。</span><br></pre></td></tr></table></figure>
<h3 id="COUCHBASE（CouchbaseProperties）"><a href="#COUCHBASE（CouchbaseProperties）" class="headerlink" title="COUCHBASE（CouchbaseProperties）"></a>COUCHBASE（CouchbaseProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">spring.couchbase.bootstrap-hosts = #Couchbase 节点（主机或IP地址）来自引导程序。</span><br><span class="line">spring.couchbase.bucket.name = default ＃要连接的存储桶的名称。</span><br><span class="line">spring.couchbase.bucket.password =   ＃桶的密码。</span><br><span class="line">spring.couchbase.env.endpoints.key-value = 1 ＃针对键/值服务的每个节点的套接字数。</span><br><span class="line">spring.couchbase.env.endpoints.queryservice.min-endpoints = 1 ＃每个节点的最小套接字数。</span><br><span class="line">spring.couchbase.env.endpoints.queryservice.max-endpoints = 1 ＃每个节点的最大套接字数。</span><br><span class="line">spring.couchbase.env.endpoints.viewservice.min-endpoints = 1 ＃每个节点的最小套接字数。</span><br><span class="line">spring.couchbase.env.endpoints.viewservice.max-endpoints = 1 ＃每个节点的最大套接字数。</span><br><span class="line">spring.couchbase.env.ssl.enabled = ＃是否启用SSL支持。除非另有说明，否则在提供“keyStore”时自动启用。</span><br><span class="line">spring.couchbase.env.ssl.key-store = ＃保存证书的JVM密钥库的路径。</span><br><span class="line">spring.couchbase.env.ssl.key-store-password = ＃用于访问密钥库的密码。</span><br><span class="line">spring.couchbase.env.timeouts.connect = 5000ms ＃桶连接超时。</span><br><span class="line">spring.couchbase.env.timeouts.key-value = 2500ms ＃对特定密钥超时执行的阻止操作。</span><br><span class="line">spring.couchbase.env.timeouts.query = 7500ms ＃N1QL查询操作超时。</span><br><span class="line">spring.couchbase.env.timeouts.socket-connect = 1000ms #Socket 连接超时。</span><br><span class="line">spring.couchbase.env.timeouts.view = 7500ms ＃常规和地理空间视图操作超时。</span><br></pre></td></tr></table></figure>
<h3 id="DAO-（PersistenceExceptionTranslationAutoConfiguration）"><a href="#DAO-（PersistenceExceptionTranslationAutoConfiguration）" class="headerlink" title="DAO （PersistenceExceptionTranslationAutoConfiguration）"></a>DAO （PersistenceExceptionTranslationAutoConfiguration）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.dao.exceptiontranslation.enabled = true ＃是否启用PersistenceExceptionTranslationPostProcessor。</span><br></pre></td></tr></table></figure>
<h3 id="CASSANDRA-（CassandraProperties）"><a href="#CASSANDRA-（CassandraProperties）" class="headerlink" title="CASSANDRA （CassandraProperties）"></a>CASSANDRA （CassandraProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">spring.data.cassandra.cluster-name = #Cassandra 集群的名称。</span><br><span class="line">spring.data.cassandra.compression = none ＃Cassandra二进制协议支持的压缩。</span><br><span class="line">spring.data.cassandra.connect-timeout = #Socket 选项：连接超时。</span><br><span class="line">spring.data.cassandra.consistency-level = ＃查询一致性级别。</span><br><span class="line">spring.data.cassandra.contact-points = localhost ＃群集节点地址。</span><br><span class="line">spring.data.cassandra.fetch-size = ＃查询默认提取大小。</span><br><span class="line">spring.data.cassandra.jmx-enabled = false＃是否启用JMX报告。</span><br><span class="line">spring.data.cassandra.keyspace-name = ＃要使用的Keyspace名称。</span><br><span class="line">spring.data.cassandra.port = #Cassandra 服务器的端口。</span><br><span class="line">spring.data.cassandra.password = ＃服务器的登录密码。</span><br><span class="line">spring.data.cassandra.pool.heartbeat-interval = 30s #Heartbeat interval，在此之后，在空闲连接上发送消息以确保它仍然存在。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">spring.data.cassandra.pool.idle-timeout = 120s ＃删除空闲连接之前的空闲超时。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">spring.data.cassandra.pool.max队列大小= 256 ＃如果没有可用连接，则排队的最大请求数。</span><br><span class="line">spring.data.cassandra.pool.pool-timeout = 5000ms ＃尝试从主机池获取连接时的池超时。</span><br><span class="line">spring.data.cassandra.read-timeout = #Socket 选项：读取超时。</span><br><span class="line">spring.data.cassandra.repositories.type = auto ＃要启用的Cassandra存储库的类型。</span><br><span class="line">spring.data.cassandra.serial-consistency-level = ＃查询串行一致性级别。</span><br><span class="line">spring.data.cassandra.schema-action = none ＃启动时要采取的架构操作。</span><br><span class="line">spring.data.cassandra.ssl = false ＃启用SSL支持。</span><br><span class="line">spring.data.cassandra.username = ＃服务器的登录用户。</span><br></pre></td></tr></table></figure>
<h3 id="DATA-COUCHBASE（CouchbaseDataProperties）"><a href="#DATA-COUCHBASE（CouchbaseDataProperties）" class="headerlink" title="DATA COUCHBASE（CouchbaseDataProperties）"></a>DATA COUCHBASE（CouchbaseDataProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.data.couchbase.auto-index = false ＃自动创建视图和索引。</span><br><span class="line">spring.data.couchbase.consistency = read-your-own-writes ＃在生成的查询中默认应用的一致性。</span><br><span class="line">spring.data.couchbase.repositories.type = auto ＃要启用的Couchbase存储库的类型。</span><br></pre></td></tr></table></figure>
<h3 id="ELASTICSEARCH（ElasticsearchProperties）"><a href="#ELASTICSEARCH（ElasticsearchProperties）" class="headerlink" title="ELASTICSEARCH（ElasticsearchProperties）"></a>ELASTICSEARCH（ElasticsearchProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring.data.elasticsearch.cluster-name = elasticsearch ＃Elasticsearch集群名称。</span><br><span class="line">spring.data.elasticsearch.cluster-nodes = ＃逗号分隔的集群节点地址列表。</span><br><span class="line">spring.data.elasticsearch.properties。* = ＃用于配置客户端的其他属性。</span><br><span class="line">spring.data.elasticsearch.repositories.enabled = true ＃是否启用Elasticsearch存储库。</span><br></pre></td></tr></table></figure>
<h3 id="DATA-JDBC"><a href="#DATA-JDBC" class="headerlink" title="DATA JDBC"></a>DATA JDBC</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.data.jdbc.repositories.enabled = true ＃是否启用JDBC存储库。</span><br></pre></td></tr></table></figure>
<h3 id="DATA-LDAP"><a href="#DATA-LDAP" class="headerlink" title="DATA LDAP"></a>DATA LDAP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.data.ldap.repositories.enabled = true ＃是否启用LDAP存储库。</span><br></pre></td></tr></table></figure>
<h3 id="MONGODB（MongoProperties）"><a href="#MONGODB（MongoProperties）" class="headerlink" title="MONGODB（MongoProperties）"></a>MONGODB（MongoProperties）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">spring.data.mongodb.authentication-database = ＃认证数据库名称。</span><br><span class="line">spring.data.mongodb.database = ＃数据库名称。</span><br><span class="line">spring.data.mongodb.field-naming-strategy = ＃要使用的FieldNamingStrategy的完全限定名称。</span><br><span class="line">spring.data.mongodb.grid-fs-database = ＃GridFS数据库名称。</span><br><span class="line">spring.data.mongodb.host = #Mongo 服务器主机。无法使用URI设置。</span><br><span class="line">spring.data.mongodb.password = #mongo 服务器的登录密码。无法使用URI设置。</span><br><span class="line">spring.data.mongodb.port = #Mongo 服务器端口。无法使用URI设置。</span><br><span class="line">spring.data.mongodb.repositories.type = auto ＃要启用的Mongo存储库的类型。</span><br><span class="line">spring.data.mongodb.uri = mongodb：// localhost / test ＃Mongo数据库URI。无法使用主机，端口和凭据进行设置。</span><br><span class="line">spring.data.mongodb.username = #mongo 服务器的登录用户。无法使用URI设置。</span><br></pre></td></tr></table></figure>
<h3 id="DATA-REDIS"><a href="#DATA-REDIS" class="headerlink" title="DATA REDIS"></a>DATA REDIS</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.data.redis.repositories.enabled = true ＃是否启用Redis存储库。</span><br></pre></td></tr></table></figure>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br></pre></td><td class="code"><pre><span class="line">#NEO4J（Neo4jProperties）</span><br><span class="line">spring.data.neo4j.auto-index = none ＃自动索引模式。</span><br><span class="line">spring.data.neo4j.embedded.enabled = true ＃如果嵌入式驱动程序可用，是否启用嵌入模式。</span><br><span class="line">spring.data.neo4j.open-in-view = true ＃注册OpenSessionInViewInterceptor。将Neo4j会话绑定到线程以进行整个请求处理。</span><br><span class="line">spring.data.neo4j.password = ＃服务器的登录密码。</span><br><span class="line">spring.data.neo4j.repositories.enabled = true ＃是否启用Neo4j存储库。</span><br><span class="line">spring.data.neo4j.uri = 驱动程序使用的#URL 。默认情况下自动检测。</span><br><span class="line">spring.data.neo4j.username = ＃服务器的登录用户。</span><br><span class="line"></span><br><span class="line">#DATA REST（RepositoryRestProperties）</span><br><span class="line">spring.data.rest.base-path = #Spring Data REST用于公开存储库资源的基本路径。</span><br><span class="line">spring.data.rest.default-media-type = ＃未指定时用作默认值的内容类型。</span><br><span class="line">spring.data.rest.default-page-size = ＃默认页面大小。</span><br><span class="line">spring.data.rest.detection-strategy = default ＃用于确定暴露哪些存储库的策略。</span><br><span class="line">spring.data.rest.enable-enum-translation = ＃是否通过Spring Data REST默认资源包启用枚举值转换。</span><br><span class="line">spring.data.rest.limit-param-name =#URL查询字符串参数的名称，指示一次返回多少结果。</span><br><span class="line">spring.data.rest.max-page-size = ＃最大页面大小。</span><br><span class="line">spring.data.rest.page-param-name = #URL 查询字符串参数的名称，指示要返回的页面。</span><br><span class="line">spring.data.rest.return-body-on-create = ＃是否在创建实体后返回响应正文。</span><br><span class="line">spring.data.rest.return-body-on-update = ＃更新实体后是否返回响应正文。</span><br><span class="line">spring.data.rest.sort-param-name = #URL 查询字符串参数的名称，指示对结果进行排序的方向。</span><br><span class="line"></span><br><span class="line">#SOLR （SolrProperties）</span><br><span class="line">spring.data.solr.host = http：//127.0.0.1：8983 / solr #Solr host。如果设置了“zk-host”，则忽略。</span><br><span class="line">spring.data.solr.repositories.enabled = true ＃是否启用Solr存储库。</span><br><span class="line">spring.data.solr.zk-host = ＃ZooKeeper主机地址，格式为HOST：PORT。</span><br><span class="line"></span><br><span class="line">#DATA WEB（SpringDataWebProperties）</span><br><span class="line">spring.data.web.pageable.default页大小 = 20 ＃缺省页大小。</span><br><span class="line">spring.data.web.pageable.max-page-size = 2000 ＃要接受的最大页面大小。</span><br><span class="line">spring.data.web.pageable.one-indexed-parameters = false ＃是否公开和假设从1开始的页码索引。</span><br><span class="line">spring.data.web.pageable.page-parameter = page ＃页面索引参数名称。</span><br><span class="line">spring.data.web.pageable.prefix = ＃常用前缀，用于页码和页面大小参数。</span><br><span class="line">spring.data.web.pageable.qualifier-delimiter = _＃限定符与实际页码和大小属性之间使用的分隔符。</span><br><span class="line">spring.data.web.pageable.size-parameter = size ＃页面大小参数名称。</span><br><span class="line">spring.data.web.sort.sort-parameter = sort ＃排序参数名称。</span><br><span class="line"></span><br><span class="line">#DATASOURCE （DataSourceAutoConfiguration＆DataSourceProperties）</span><br><span class="line">spring.datasource.continue-on-error = false ＃初始化数据库时是否发生错误时停止。</span><br><span class="line">spring.datasource.data = #Data （DML）脚本资源引用。</span><br><span class="line">spring.datasource.data-username = ＃用于执行DML脚本的数据库的用户名（如果不同）。</span><br><span class="line">spring.datasource.data-password = ＃执行DML脚本的数据库的密码（如果不同）。</span><br><span class="line">spring.datasource.dbcp2。* = ＃Commons DBCP2特定设置</span><br><span class="line">spring.datasource.driver-class-name =#JDBC驱动程序的完全限定名称。默认情况下，基于URL自动检测。</span><br><span class="line">spring.datasource.generate-unique-name = false ＃是否生成随机数据源名称。</span><br><span class="line">spring.datasource.hikari。* = ＃Hikari特定设置</span><br><span class="line">spring.datasource.initialization-mode = embedded ＃使用可用的DDL和DML脚本初始化数据源。</span><br><span class="line">spring.datasource.jmx-enabled = false ＃是否启用JMX支持（如果由基础池提供）。</span><br><span class="line">spring.datasource.jndi-name = ＃JNDI数据源的位置。设置时将忽略类，URL，用户名和密码。</span><br><span class="line">spring.datasource.name =＃数据源的名称。使用嵌入式数据库时默认为“testdb”。</span><br><span class="line">spring.datasource.password = ＃数据库的登录密码。</span><br><span class="line">spring.datasource.platform = all ＃在DDL或DML脚本中使用的平台（例如架构 -  $ &#123;platform&#125; .sql或data  -  $ &#123;platform&#125; .sql）。</span><br><span class="line">spring.datasource.schema = #Schema （DDL）脚本资源引用。</span><br><span class="line">spring.datasource.schema-username = ＃执行DDL脚本的数据库的用户名（如果不同）。</span><br><span class="line">spring.datasource.schema-password = ＃执行DDL脚本的数据库的密码（如果不同）。</span><br><span class="line">spring.datasource.separator =;#SQL初始化脚本中的语句分隔符。</span><br><span class="line">spring.datasource.sql-script-encoding = #SQL 脚本编码。</span><br><span class="line">spring.datasource.tomcat。* = ＃Tomcat数据源特定设置</span><br><span class="line">spring.datasource.type = ＃要使用的连接池实现的完全限定名称。默认情况下，它是从类路径中自动检测到的。</span><br><span class="line">spring.datasource.url = ＃JDBC数据库的URL。</span><br><span class="line">spring.datasource.username = ＃登录数据库的用户名。</span><br><span class="line">spring.datasource.xa.data-source-class-name = #XA 数据源完全限定名称。</span><br><span class="line">spring.datasource.xa.properties =＃传递给XA数据源的属性。</span><br><span class="line"></span><br><span class="line">#JEST （Elasticsearch HTTP客户端）（JestProperties）</span><br><span class="line">spring.elasticsearch.jest.connection-timeout = 3s ＃连接超时。</span><br><span class="line">spring.elasticsearch.jest.multi-threaded = true ＃是否从多个执行线程启用连接请求。</span><br><span class="line">spring.elasticsearch.jest.password = ＃登录密码。</span><br><span class="line">spring.elasticsearch.jest.proxy.host = #HTTP 客户端应使用的代理主机。</span><br><span class="line">spring.elasticsearch.jest.proxy.port = #HTTP 客户端应使用的代理端口。</span><br><span class="line">spring.elasticsearch.jest.read-timeout = 3s ＃读取超时。</span><br><span class="line">spring.elasticsearch.jest.uris = http：// localhost：9200＃逗号分隔的Elasticsearch实例列表。</span><br><span class="line">spring.elasticsearch.jest.username = ＃登录用户名。</span><br><span class="line"></span><br><span class="line">#Elasticsearch REST客户端（RestClientProperties）</span><br><span class="line">spring.elasticsearch.rest.password = ＃凭据密码。</span><br><span class="line">spring.elasticsearch.rest.uris = http：// localhost：9200 ＃要使用的以逗号分隔的Elasticsearch实例列表。</span><br><span class="line">spring.elasticsearch.rest.username = ＃凭据用户名。</span><br><span class="line"></span><br><span class="line">#H2 Web控制台（H2ConsoleProperties）</span><br><span class="line">spring.h2.console.enabled = false ＃是否启用控制台。</span><br><span class="line">spring.h2.console.path = / h2-console ＃控制台可用的路径。</span><br><span class="line">spring.h2.console.settings.trace = false ＃是否启用跟踪输出。</span><br><span class="line">spring.h2.console.settings.web-allow-others = false ＃是否启用远程访问。</span><br><span class="line"></span><br><span class="line">#InfluxDB（InfluxDbProperties）</span><br><span class="line">spring.influx.password = ＃登录密码。</span><br><span class="line">spring.influx.url = 要连接的InfluxDB实例的URL。</span><br><span class="line">spring.influx.user = ＃登录用户。</span><br><span class="line"></span><br><span class="line">#JOOQ （JooqProperties）</span><br><span class="line">spring.jooq.sql-dialect = #SQL 方言使用。默认情况下自动检测。</span><br><span class="line"></span><br><span class="line">#JDBC （JdbcProperties）</span><br><span class="line">spring.jdbc.template.fetch-size = -1 ＃需要更多行时应从数据库中提取的行数。</span><br><span class="line">spring.jdbc.template.max-rows = -1 ＃最大行数。</span><br><span class="line">spring.jdbc.template.query-timeout = ＃查询超时。默认是使用JDBC驱动程序的默认配置。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line"></span><br><span class="line">＃JPA （JpaBaseConfiguration，HibernateJpaAutoConfiguration）</span><br><span class="line">spring.data.jpa.repositories.bootstrap-mode = default #JAPA 存储库的Bootstrap模式。</span><br><span class="line">spring.data.jpa.repositories.enabled = true ＃是否启用JPA存储库。</span><br><span class="line">spring.jpa.database = ＃要操作的目标数据库，默认情况下自动检测。也可以使用“databasePlatform”属性进行设置。</span><br><span class="line">spring.jpa.database-platform = ＃要操作的目标数据库的名称，默认情况下自动检测。也可以使用“Database”枚举来设置。</span><br><span class="line">spring.jpa.generate-ddl = false ＃是否在启动时初始化架构。</span><br><span class="line">spring.jpa.hibernate.ddl-auto = ＃DDL模式。这实际上是“hibernate.hbm2ddl.auto”属性的快捷方式。使用嵌入式数据库时未默认为“create-drop”，并且未检测到架构管理器。否则，默认为“none”。</span><br><span class="line">spring.jpa.hibernate.naming.implicit-strategy = ＃隐式命名策略的完全限定名称。</span><br><span class="line">spring.jpa.hibernate.naming.physical-strategy = ＃物理命名策略的完全限定名称。</span><br><span class="line">spring.jpa.hibernate.use-new-id-generator-mappings = ＃是否将Hibernate的较新的IdentifierGenerator用于AUTO，TABLE和SEQUENCE。</span><br><span class="line">spring.jpa.mapping-resources =＃Mapping资源（相当于persistence.xml中的“mapping-file”条目）。</span><br><span class="line">spring.jpa.open-in-view = true ＃注册OpenEntityManagerInViewInterceptor。将JPA EntityManager绑定到线程以进行整个请求处理。</span><br><span class="line">spring.jpa.properties。* = ＃要在JPA提供程序上设置的其他本机属性。</span><br><span class="line">spring.jpa.show -sql = false ＃是否启用SQL语句的日志记录。</span><br><span class="line"></span><br><span class="line">#JTA （JtaAutoConfiguration）</span><br><span class="line">spring.jta.enabled = true ＃是否启用JTA支持。</span><br><span class="line">spring.jta.log-dir = #Transaction logs目录。</span><br><span class="line">spring.jta.transaction-manager-id = #Transaction manager唯一标识符。</span><br><span class="line"></span><br><span class="line">#ATOMIKOS（AtomikosProperties）</span><br><span class="line">spring.jta.atomikos.connectionfactory.borrow-connection-timeout = 30 ＃从池中借用连接的超时（以秒为单位）。</span><br><span class="line">spring.jta.atomikos.connectionfactory.ignore-session-transacted-flag = true ＃是否在创建会话时忽略事务处理标志。</span><br><span class="line">spring.jta.atomikos.connectionfactory.local-transaction-mode = false ＃是否需要本地事务。</span><br><span class="line">spring.jta.atomikos.connectionfactory.maintenance-interval = 60 ＃池维护线程运行之间的时间（以秒为单位）。</span><br><span class="line">spring.jta.atomikos.connectionfactory.max-idle-time = 60＃从池中清除连接的时间（以秒为单位）。</span><br><span class="line">spring.jta.atomikos.connectionfactory.max-lifetime = 0 ＃连接在被销毁之前可以合并的时间（以秒为单位）。0表示没有限制。</span><br><span class="line">spring.jta.atomikos.connectionfactory.max-pool-size = 1 ＃池的最大大小。</span><br><span class="line">spring.jta.atomikos.connectionfactory.min-pool-size = 1 ＃池的最小大小。</span><br><span class="line">spring.jta.atomikos.connectionfactory.reap-timeout = 0 ＃借用连接的reap超时（以秒为单位）。0表示没有限制。</span><br><span class="line">spring.jta.atomikos.connectionfactory.unique-resource-name = jmsConnectionFactory＃用于在恢复期间标识资源的唯一名称。</span><br><span class="line">spring.jta.atomikos.connectionfactory.xa-connection-factory-class-name = #XAConnectionFactory的供应商特定实现。</span><br><span class="line">spring.jta.atomikos.connectionfactory.xa-properties = ＃供应商特定的XA属性。</span><br><span class="line">spring.jta.atomikos.datasource.borrow-connection-timeout = 30 ＃从池中借用连接的超时时间（秒）。</span><br><span class="line">spring.jta.atomikos.datasource.concurrent-connection-validation = ＃是否使用并发连接验证。</span><br><span class="line">spring.jta.atomikos.datasource.default-isolation-level = ＃池提供的连接的默认隔离级别。</span><br><span class="line">spring.jta.atomikos.datasource.login-timeout = ＃用于建立数据库连接的超时（以秒为单位）。</span><br><span class="line">spring.jta.atomikos.datasource.maintenance-interval = 60 ＃池维护线程运行之间的时间（以秒为单位）。</span><br><span class="line">spring.jta.atomikos.datasource.max-idle-time = 60 ＃从池中清除连接的时间（以秒为单位）。</span><br><span class="line">spring.jta.atomikos.datasource.max-lifetime = 0 ＃连接在被销毁之前可以合并的时间（以秒为单位）。0表示没有限制。</span><br><span class="line">spring.jta.atomikos.datasource.max-pool-size = 1 ＃池的最大大小。</span><br><span class="line">spring.jta.atomikos.datasource.min-pool-size = 1＃池的最小大小。</span><br><span class="line">spring.jta.atomikos.datasource.reap-timeout = 0 ＃借用连接的reap超时（以秒为单位）。0表示没有限制。</span><br><span class="line">spring.jta.atomikos.datasource.test-query = ＃用于在返回连接之前验证连接的SQL查询或语句。</span><br><span class="line">spring.jta.atomikos.datasource.unique-resource-name = dataSource ＃用于在恢复期间标识资源的唯一名称。</span><br><span class="line">spring.jta.atomikos.datasource.xa-data-source-class-name = #XAConnectionFactory的供应商特定实现。</span><br><span class="line">spring.jta.atomikos.datasource.xa-properties = ＃供应商特定的XA属性。</span><br><span class="line">spring.jta.atomikos.properties.allow-sub-transactions = true ＃指定是否允许子事务。</span><br><span class="line">spring.jta.atomikos.properties.checkpoint-interval = 500 ＃检查点之间的间隔，表示为两个检查点之间的日志写入次数。</span><br><span class="line">spring.jta.atomikos.properties.default -jta -timeout = 10000ms #JTA 事务的默认超时。</span><br><span class="line">spring.jta.atomikos.properties.default-max-wait-time-on-shutdown = 9223372036854775807 ＃正常关闭（no-force）等待事务完成的时间。</span><br><span class="line">spring.jta.atomikos.properties.enable-logging = true ＃是否启用磁盘日志记录。</span><br><span class="line">spring.jta.atomikos.properties.force-shutdown-on-vm-exit = false ＃虚拟机关闭是否应触发事务核心的强制关闭。</span><br><span class="line">spring.jta.atomikos.properties.log-base-dir = ＃应存储日志文件的目录。</span><br><span class="line">spring.jta.atomikos.properties.log-base-name = tmlog ＃Transactions日志文件基名。</span><br><span class="line">spring.jta.atomikos.properties.max-actives = 50 ＃最大活动事务数。</span><br><span class="line">spring.jta.atomikos.properties.max-timeout = 300000ms ＃事务允许的最大超时时间。</span><br><span class="line">spring.jta.atomikos.properties.recovery.delay = 10000ms ＃两次恢复扫描之间的延迟。</span><br><span class="line">spring.jta.atomikos.properties.recovery.forget- orphaned -log-entries-delay = 86400000ms ＃恢复之后的延迟可以清除挂起（&apos;孤立&apos;）日志条目。</span><br><span class="line">spring.jta.atomikos.properties.recovery.max-retries = 5 ＃在抛出异常之前提交事务的重试次数。</span><br><span class="line">spring.jta.atomikos.properties.recovery.retry-interval = 10000ms ＃重试尝试之间的延迟。</span><br><span class="line">spring.jta.atomikos.properties.serial-jta-transactions = true ＃是否应尽可能加入子事务。</span><br><span class="line">spring.jta.atomikos.properties.service = ＃应该启动的事务管理器实现。</span><br><span class="line">spring.jta.atomikos.properties.threaded-two-phase-commit = false ＃是否对参与资源使用不同（和并发）线程进行两阶段提交。</span><br><span class="line">spring.jta.atomikos.properties.transaction-manager-unique-name = ＃事务管理器的唯一名称。</span><br><span class="line"></span><br><span class="line">#BITRONIX </span><br><span class="line">spring.jta.bitronix.connectionfactory.acquire-increment = 1 ＃在增长池时创建的连接数。</span><br><span class="line">spring.jta.bitronix.connectionfactory.acquisition-interval = 1 ＃获取无效连接后再次尝试获取连接之前等待的时间（以秒为单位）。</span><br><span class="line">spring.jta.bitronix.connectionfactory.acquisition-timeout = 30 ＃从池中获取连接的超时时间（秒）。</span><br><span class="line">spring.jta.bitronix.connectionfactory.allow-local-transactions = true ＃事务管理器是否应该允许混合XA和非XA事务。</span><br><span class="line">spring.jta.bitronix.connectionfactory.apply-transaction-timeout = false＃是否应在登记时在XAResource上设置事务超时。</span><br><span class="line">spring.jta.bitronix.connectionfactory.automatic-enlisting-enabled = true ＃是否应自动登记和退出资源。</span><br><span class="line">spring.jta.bitronix.connectionfactory.cache-producer-consumers = true ＃是否应该缓存生产者和消费者。</span><br><span class="line">spring.jta.bitronix.connectionfactory.class-name = #XA 资源的底层实现类名。</span><br><span class="line">spring.jta.bitronix.connectionfactory.defer-connection-release = true ＃提供程序是否可以在同一连接上运行多个事务并支持事务交错。</span><br><span class="line">spring.jta.bitronix.connectionfactory.disabled= ＃是否禁用此资源，这意味着暂时禁止从其池中获取连接。</span><br><span class="line">spring.jta.bitronix.connectionfactory.driver-properties = ＃应在底层实现上设置的属性。</span><br><span class="line">spring.jta.bitronix.connectionfactory.failed = ＃将此资源生成器标记为失败。</span><br><span class="line">spring.jta.bitronix.connectionfactory.ignore-recovery-failures = false ＃是否应忽略恢复失败。</span><br><span class="line">spring.jta.bitronix.connectionfactory.max-idle-time = 60 ＃从池中清除连接的时间（以秒为单位）。</span><br><span class="line">spring.jta.bitronix.connectionfactory.max-pool-size = 10＃池的最大大小。0表示没有限制。</span><br><span class="line">spring.jta.bitronix.connectionfactory.min-pool-size = 0 ＃池的最小大小。</span><br><span class="line">spring.jta.bitronix.connectionfactory.password = ＃用于连接JMS提供程序的密码。</span><br><span class="line">spring.jta.bitronix.connectionfactory.share-transaction-connections = false ＃是否可以在事务上下文中共享处于ACCESSIBLE状态的连接。</span><br><span class="line">spring.jta.bitronix.connectionfactory.test-connections = true ＃从池中获取时是否应测试连接。</span><br><span class="line">spring.jta.bitronix.connectionfactory.two-pc-ordering-position = 1＃在两阶段提交期间此资源应采取的位置（始终是第一个是Integer.MIN_VALUE，总是最后一个是Integer.MAX_VALUE）。</span><br><span class="line">spring.jta.bitronix.connectionfactory.unique-name = jmsConnectionFactory ＃用于在恢复期间标识资源的唯一名称。</span><br><span class="line">spring.jta.bitronix.connectionfactory.use -tm -join = true ＃启动XAResources时是否应该使用TMJOIN。spring.jta.bitronix.connectionfactory.user = ＃用于连接到JMS提供程序的用户。</span><br><span class="line">spring.jta.bitronix.datasource.acquire-increment = 1 ＃在增长池时创建的连接数。</span><br><span class="line">spring.jta.bitronix.datasource.acquisition-interval = 1＃在获取无效连接后再次尝试获取连接之前等待的时间（以秒为单位）。</span><br><span class="line">spring.jta.bitronix.datasource.acquisition-timeout = 30 ＃从池中获取连接的超时时间（秒）。</span><br><span class="line">spring.jta.bitronix.datasource.allow-local-transactions = true ＃事务管理器是否应该允许混合XA和非XA事务。</span><br><span class="line">spring.jta.bitronix.datasource.apply-transaction-timeout = false ＃是否应在XAResource登记时设置事务超时。</span><br><span class="line">spring.jta.bitronix.datasource.automatic-enlisting-enabled = true ＃是否应自动登记和退出资源。</span><br><span class="line">spring.jta.bitronix.datasource.class-name = #XA 资源的底层实现类名。</span><br><span class="line">spring.jta.bitronix.datasource.cursor-holdability = ＃连接的默认光标可保持性。</span><br><span class="line">spring.jta.bitronix.datasource.defer-connection-release = true ＃数据库是否可以在同一连接上运行多个事务并支持事务交错。</span><br><span class="line">spring.jta.bitronix.datasource.disabled = ＃是否禁用此资源，这意味着暂时禁止从其池中获取连接。</span><br><span class="line">spring.jta.bitronix.datasource.driver-properties = ＃应在底层实现上设置的属性。</span><br><span class="line">spring.jta.bitronix.datasource.enable -jdbc4-connection-test = ＃从池中获取连接时是否调用Connection.isValid（）。</span><br><span class="line">spring.jta.bitronix.datasource.failed = ＃将此资源生成器标记为失败。</span><br><span class="line">spring.jta.bitronix.datasource.ignore-recovery-failures = false ＃是否应忽略恢复失败。</span><br><span class="line">spring.jta.bitronix.datasource.isolation-level = ＃连接的默认隔离级别。</span><br><span class="line">spring.jta.bitronix.datasource.local-auto-commit = ＃本地事务的默认自动提交模式。</span><br><span class="line">spring.jta.bitronix.datasource.login-timeout =＃建立数据库连接的超时时间（秒）。</span><br><span class="line">spring.jta.bitronix.datasource.max-idle-time = 60 ＃从池中清除连接的时间（以秒为单位）。</span><br><span class="line">spring.jta.bitronix.datasource.max-pool-size = 10 ＃池的最大大小。0表示没有限制。</span><br><span class="line">spring.jta.bitronix.datasource.min-pool-size = 0 ＃池的最小大小。</span><br><span class="line">spring.jta.bitronix.datasource.prepared-statement-cache-size = 0 ＃预准备语句缓存的目标大小。0禁用缓存。</span><br><span class="line">spring.jta.bitronix.datasource.share-transaction-connections = false＃是否可以在事务上下文中共享处于ACCESSIBLE状态的连接。</span><br><span class="line">spring.jta.bitronix.datasource.test-query = ＃用于在返回连接之前验证连接的SQL查询或语句。</span><br><span class="line">spring.jta.bitronix.datasource.two-pc-ordering-position = 1 ＃此资源在两阶段提交期间应采取的位置（始终首先是Integer.MIN_VALUE，并且始终是最后一个是Integer.MAX_VALUE）。</span><br><span class="line">spring.jta.bitronix.datasource.unique-name = dataSource ＃用于在恢复期间标识资源的唯一名称。</span><br><span class="line">spring.jta.bitronix.datasource.use -tm -join = true ＃启动XAResources时是否应该使用TMJOIN。</span><br><span class="line">spring.jta.bitronix.properties.allow-multiple-lrc = false ＃是否允许多个LRC资源登记到同一事务中。</span><br><span class="line">spring.jta.bitronix.properties.asynchronous2-pc = false ＃是否启用异步执行两阶段提交。</span><br><span class="line">spring.jta.bitronix.properties.background-recovery-interval-seconds = 60 ＃在后台运行恢复过程的时间间隔（以秒为单位）。</span><br><span class="line">spring.jta.bitronix.properties.current-node-only-recovery = true ＃是否仅恢复当前节点。</span><br><span class="line">spring.jta.bitronix.properties.debug-zero-resource-transaction = false＃是否记录创建和提交没有单个登记资源的事务调用堆栈。</span><br><span class="line">spring.jta.bitronix.properties.default-transaction-timeout = 60 ＃默认事务超时，以秒为单位。</span><br><span class="line">spring.jta.bitronix.properties.disable-jmx = false ＃是否启用JMX支持。</span><br><span class="line">spring.jta.bitronix.properties.exception-analyzer = ＃设置要使用的异常分析器实现的完全限定名称。</span><br><span class="line">spring.jta.bitronix.properties.filter-log-status = false ＃是否启用日志过滤，以便只写入强制日志。</span><br><span class="line">spring.jta.bitronix.properties.force-batching-enabled = true＃是否批量磁盘强制。</span><br><span class="line">spring.jta.bitronix.properties.forced-write-enabled = true ＃是否强制将日志记录到磁盘。</span><br><span class="line">spring.jta.bitronix.properties.graceful-shutdown-interval = 60 ＃TM在关闭时中止事务之前等待事务完成的最大秒数。</span><br><span class="line">spring.jta.bitronix.properties.jndi-transaction-synchronization-registry-name = ＃TransactionSynchronizationRegistry的JNDI名称。</span><br><span class="line">spring.jta.bitronix.properties.jndi-user-transaction-name = ＃UserTransaction的JNDI名称。</span><br><span class="line">spring.jta.bitronix.properties.journal = disk ＃期刊的名称。可以是&apos;disk&apos;，&apos;null&apos;或类名。</span><br><span class="line">spring.jta.bitronix.properties.log-part1-filename = btm1.tlog ＃日志的第一个片段的名称。</span><br><span class="line">spring.jta.bitronix.properties.log-part2-filename = btm2.tlog ＃日志的第二个片段的名称。</span><br><span class="line">spring.jta.bitronix.properties.max-log-size-in-mb = 2 ＃日志片段的最大大小（兆字节）。</span><br><span class="line">spring.jta.bitronix.properties.resource-configuration-filename = ＃ResourceLoader配置文件名。</span><br><span class="line">spring.jta.bitronix.properties.server-id = #ASCII ID必须唯一标识此TM实例。默认为机器的IP地址。</span><br><span class="line">spring.jta.bitronix.properties.skip-corrupted-logs = false#Skip损坏的事务日志条目。</span><br><span class="line">spring.jta.bitronix.properties.warn-about-zero-resource-transaction = true ＃是否为没有单个登记资源的事务记录警告。</span><br><span class="line"></span><br><span class="line">#EMBEDDED MONGODB（EmbeddedMongoProperties）</span><br><span class="line">spring.mongodb.embedded.features = sync_delay ＃逗号分隔的要启用的功能列表。</span><br><span class="line">spring.mongodb.embedded.storage.database-dir = ＃用于数据存储的目录。</span><br><span class="line">spring.mongodb.embedded.storage.oplog-size = #oplog的最大大小。</span><br><span class="line">spring.mongodb.embedded.storage.repl-set-name = ＃副本集的名称。</span><br><span class="line">spring.mongodb.embedded.version = 3.5.5 ＃要使用的Mongo版本。</span><br><span class="line"></span><br><span class="line">#REDIS（RedisProperties）</span><br><span class="line">spring.redis.cluster.max -redirects = ＃在群集中执行命令时要遵循的最大重定向数。</span><br><span class="line">spring.redis.cluster.nodes = ＃逗号分隔的“host：port”对列表引导自。</span><br><span class="line">spring.redis.database = 0 ＃连接工厂使用的数据库索引。</span><br><span class="line">spring.redis.url = ＃连接URL。覆盖主机，端口和密码。用户被忽略。示例：redis：// user：password@example.com ：6379 </span><br><span class="line">spring.redis.host = localhost ＃Redis服务器主机。</span><br><span class="line">spring.redis.jedis.pool.max-active = 8＃池在给定时间可以分配的最大连接数。使用负值无限制。</span><br><span class="line">spring.redis.jedis.pool.max-idle = 8 ＃池中“空闲”连接的最大数量。使用负值表示无限数量的空闲连接。</span><br><span class="line">spring.redis.jedis.pool.max -wait = -1ms ＃在池耗尽时，在抛出异常之前连接分配应该阻塞的最长时间。使用负值无限期阻止。</span><br><span class="line">spring.redis.jedis.pool.min-idle = 0 ＃目标是池中维护的最小空闲连接数。此设置仅在其为正时才有效。</span><br><span class="line">spring.redis.lettuce.pool.max-active = 8＃池在给定时间可以分配的最大连接数。使用负值无限制。</span><br><span class="line">spring.redis.lettuce.pool.max-idle = 8 ＃池中“空闲”连接的最大数量。使用负值表示无限数量的空闲连接。</span><br><span class="line">spring.redis.lettuce.pool.max -wait = -1ms ＃在池耗尽时，在抛出异常之前连接分配应阻塞的最长时间。使用负值无限期阻止。</span><br><span class="line">spring.redis.lettuce.pool.min-idle = 0 ＃目标是池中维护的最小空闲连接数。此设置仅在其为正时才有效。</span><br><span class="line">spring.redis.lettuce.shutdown-timeout = 100ms＃关机超时。</span><br><span class="line">spring.redis.password = ＃redis服务器的登录密码。</span><br><span class="line">spring.redis.port = 6379 #Redis服务器端口。</span><br><span class="line">spring.redis.sentinel.master = #Redis服务器的名称。</span><br><span class="line">spring.redis.sentinel.nodes = ＃逗号分隔的“host：port”对列表。</span><br><span class="line">spring.redis.ssl = false ＃是否启用SSL支持。</span><br><span class="line">spring.redis.timeout = ＃连接超时。</span><br><span class="line"></span><br><span class="line">#TRANSACTION （TransactionProperties）</span><br><span class="line">spring.transaction.default-timeout = ＃默认事务超时。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">spring.transaction.rollback-on-commit-failure = ＃是否回滚提交失败。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">＃---------------------------------------- </span><br><span class="line">＃INTEGRATION PROPERTIES </span><br><span class="line">＃----- -----------------------------------</span><br><span class="line"></span><br><span class="line">#ACTIVEMQ（ActiveMQProperties）</span><br><span class="line">spring.activemq.broker-url = ActiveMQ代理的URL。默认情况下自动生成。</span><br><span class="line">spring.activemq.close-timeout = 15s ＃在考虑结束完成之前等待的时间。</span><br><span class="line">spring.activemq.in-memory = true ＃默认代理URL是否应该在内存中。如果已指定显式代理，则忽略。</span><br><span class="line">spring.activemq.non-blocking-redelivery = false ＃是否在从回滚事务重新传递消息之前停止消息传递。这意味着启用此消息顺序时不会保留消息顺序。</span><br><span class="line">spring.activemq.password = ＃代理的登录密码。</span><br><span class="line">spring.activemq.send-timeout = 0ms ＃等待消息发送响应的时间。将其设置为0以永远等待。</span><br><span class="line">spring.activemq.user = ＃代理的登录用户。</span><br><span class="line">spring.activemq.packages.trust-all = ＃是否信任所有包。</span><br><span class="line">spring.activemq.packages.trusted = ＃逗号分隔的要信任的特定包列表（不信任所有包时）。</span><br><span class="line">spring.activemq.pool.block-if-full = true ＃是否阻止请求连接并且池已满。将其设置为false以改为抛出“JMSException”。</span><br><span class="line">spring.activemq.pool.block-if-full-timeout = -1ms＃如果池仍然满，则在抛出异常之前阻塞。</span><br><span class="line">spring.activemq.pool.enabled = false ＃是否应创建JmsPoolConnectionFactory，而不是常规ConnectionFactory。</span><br><span class="line">spring.activemq.pool.idle-timeout = 30s ＃连接空闲超时。</span><br><span class="line">spring.activemq.pool.max-connections = 1 ＃最大池化连接数。</span><br><span class="line">spring.activemq.pool.max-sessions-per-connection = 500 ＃池中每个连接的最大池化会话数。</span><br><span class="line">spring.activemq.pool.time-between-expiration-check = -1ms ＃在空闲连接驱逐线程的运行之间休眠的时间。当为负时，没有空闲连接驱逐线程运行。</span><br><span class="line">spring.activemq.pool.use-anonymous-producer = true ＃是否只使用一个匿名“MessageProducer”实例。将其设置为false以在每次需要时创建一个“MessageProducer”。</span><br><span class="line"></span><br><span class="line">#ARTEMIS （ArtemisProperties）</span><br><span class="line">spring.artemis.embedded.cluster-password = ＃群集密码。默认情况下在启动时随机生成。</span><br><span class="line">spring.artemis.embedded.data-directory = #Journal 文件目录。如果关闭持久性，则没有必要。</span><br><span class="line">spring.artemis.embedded.enabled = true ＃如果Artemis服务器API可用，是否启用嵌入模式。</span><br><span class="line">spring.artemis.embedded.persistent = false ＃是否启用持久存储。</span><br><span class="line">spring.artemis.embedded.queues = ＃逗号分隔的队列，在启动时创建。</span><br><span class="line">spring.artemis.embedded.server-id =＃服务器ID。默认情况下，使用自动递增的计数器。</span><br><span class="line">spring.artemis.embedded.topics = ＃在启动时要创建的以逗号分隔的主题列表。</span><br><span class="line">spring.artemis.host = localhost ＃Artemis broker主机。</span><br><span class="line">spring.artemis.mode = ＃Artemis部署模式，默认情况下自动检测。</span><br><span class="line">spring.artemis.password = ＃代理的登录密码。</span><br><span class="line">spring.artemis.pool.block-if-full = true ＃是否在请求连接且池已满时阻止。将其设置为false以改为抛出“JMSException”。</span><br><span class="line">spring.artemis.pool.block-if-full-timeout = -1ms ＃如果池仍然满，则在抛出异常之前阻塞。</span><br><span class="line">spring.artemis.pool.enabled = false ＃是否应创建JmsPoolConnectionFactory，而不是常规ConnectionFactory。</span><br><span class="line">spring.artemis.pool.idle-timeout = 30s ＃连接空闲超时。</span><br><span class="line">spring.artemis.pool.max-connections = 1 ＃池化连接的最大数量。</span><br><span class="line">spring.artemis.pool.max-sessions-per-connection = 500 ＃池中每个连接的最大池化会话数。</span><br><span class="line">spring.artemis.pool.time-between-expiration-check = -1ms ＃在空闲连接驱逐线程的运行之间休眠的时间。当为负时，没有空闲连接驱逐线程运行。</span><br><span class="line">spring.artemis.pool.use-anonymous-producers = true＃是否只使用一个匿名“MessageProducer”实例。将其设置为false以在每次需要时创建一个“MessageProducer”。</span><br><span class="line">spring.artemis.port = 61616 #Artemis 经纪人端口。</span><br><span class="line">spring.artemis.user = ＃代理的登录用户。</span><br><span class="line"></span><br><span class="line">#SPRING BATCH（BatchProperties）</span><br><span class="line">spring.batch.initialize-schema = embedded ＃数据库模式初始化模式。</span><br><span class="line">spring.batch.job.enabled = true ＃在启动时执行上下文中的所有Spring Batch作业。</span><br><span class="line">spring.batch.job.names = ＃逗号分隔的要在启动时执行的作业名称列表（例如，`job1，job2`）。默认情况下，将执行上下文中找到的所有作业。</span><br><span class="line">spring.batch.schema = classpath中：组织/ springframework的/批号/核心/ schema- @ @ 平台@ @ .SQL ＃的路径SQL文件，以用于初始化数据库架构。</span><br><span class="line">spring.batch.table-prefix =＃所有批次元数据表的表前缀。</span><br><span class="line"></span><br><span class="line">#SPRING INTEGRATION（IntegrationProperties）</span><br><span class="line">spring.integration.jdbc.initialize-schema = embedded ＃数据库模式初始化模式。</span><br><span class="line">spring.integration.jdbc.schema = classpath中：组织/ springframework的/集成/ JDBC / schema- @ @ 平台@ @ .SQL ＃的路径SQL文件，以用于初始化数据库架构。</span><br><span class="line"></span><br><span class="line">#JMS （JmsProperties）</span><br><span class="line">spring.jms.cache.consumers = false ＃是否缓存消息使用者。</span><br><span class="line">spring.jms.cache.enabled = true ＃是否缓存会话。</span><br><span class="line">spring.jms.cache.producers = true ＃是否缓存消息生成器。</span><br><span class="line">spring.jms.cache.session-cache-size = 1 ＃会话缓存的大小（根据JMS会话类型）。</span><br><span class="line">spring.jms.jndi-name = ＃连接工厂JNDI名称。设置时，优先于其他连接工厂自动配置。</span><br><span class="line">spring.jms.listener.acknowledge-mode = ＃容器的确认模式。默认情况下，侦听器使用自动确认进行事务处理。</span><br><span class="line">spring.jms.listener.auto-startup = true ＃启动时自动启动容器。</span><br><span class="line">spring.jms.listener.concurrency = ＃最小并发使用者数。</span><br><span class="line">spring.jms.listener.max-concurrency = ＃最大并发使用者数。</span><br><span class="line">spring.jms.pub-sub-domain = false ＃默认目标类型是否为topic。</span><br><span class="line">spring.jms.template.default-destination = ＃用于没有目标参数的发送和接收操作的默认目标。</span><br><span class="line">spring.jms.template.delivery-delay = ＃用于发送呼叫的传递延迟。</span><br><span class="line">spring.jms.template.delivery-mode =＃交付模式。设置时启用QoS（服务质量）。</span><br><span class="line">spring.jms.template.priority = ＃发送时消息的优先级。设置时启用QoS（服务质量）。</span><br><span class="line">spring.jms.template.qos-enabled = ＃发送消息时是否启用显式QoS（服务质量）。</span><br><span class="line">spring.jms.template.receive-timeout = ＃用于接收呼叫的超时。</span><br><span class="line">spring.jms.template.time-to-live = ＃发送时消息的生存时间。设置时启用QoS（服务质量）。</span><br><span class="line"></span><br><span class="line">#APACHE KAFKA（KafkaProperties）</span><br><span class="line">spring.kafka.admin.client-id = #ID 在发出请求时传递给服务器。用于服务器端日志记录。</span><br><span class="line">spring.kafka.admin.fail-fast = false ＃如果代理在启动时不可用，是否快速失败。</span><br><span class="line">spring.kafka.admin.properties。* = ＃用于配置客户端的其他特定于管理员的属性。</span><br><span class="line">spring.kafka.admin.ssl.key-password = ＃密钥库文件中私钥的密码。</span><br><span class="line">spring.kafka.admin.ssl.key-store-location = ＃密钥库文件的位置。</span><br><span class="line">spring.kafka.admin.ssl.key-store-password =＃存储密钥库文件的密码。</span><br><span class="line">spring.kafka.admin.ssl.key-store-type = ＃密钥库的类型。</span><br><span class="line">spring.kafka.admin.ssl.protocol = ＃要使用的SSL协议。</span><br><span class="line">spring.kafka.admin.ssl.trust-store-location = ＃信任库文件的位置。</span><br><span class="line">spring.kafka.admin.ssl.trust-store-password = ＃存储信任存储文件的密码。</span><br><span class="line">spring.kafka.admin.ssl.trust-store-type = ＃信任库的类型。</span><br><span class="line">spring.kafka.bootstrap-servers = ＃逗号分隔的主机：端口对列表，用于建立与Kafka集群的初始连接。除非被覆盖，否则适用于所有组件。</span><br><span class="line">spring.kafka.client-id = #ID 在发出请求时传递给服务器。用于服务器端日志记录。</span><br><span class="line">spring.kafka.consumer.auto-commit-interval = ＃如果&apos;enable.auto.commit&apos;设置为true，则将消费者偏移自动提交给Kafka的频率。</span><br><span class="line">spring.kafka.consumer.auto-offset-reset = ＃当Kafka中没有初始偏移量或者服务器上不再存在当前偏移量时该怎么办。</span><br><span class="line">spring.kafka.consumer.bootstrap-servers = ＃逗号分隔的主机：端口对列表，用于建立与Kafka集群的初始连接。为消费者覆盖全球财产。</span><br><span class="line">spring.kafka.consumer.client-id =#ID在发出请求时传递给服务器。用于服务器端日志记录。</span><br><span class="line">spring.kafka.consumer.enable-auto-commit = ＃是否在后台定期提交消费者的偏移量。</span><br><span class="line">spring.kafka.consumer.fetch-max-wait = ＃如果没有足够的数据立即满足“fetch-min-size”给出的要求，服务器在回答获取请求之前会阻塞的最长时间。</span><br><span class="line">spring.kafka.consumer.fetch-min-size = ＃服务器应为获取请求返回的最小数据量。</span><br><span class="line">spring.kafka.consumer.group-id = ＃唯一字符串，用于标识此使用者所属的使用者组。</span><br><span class="line">spring.kafka.consumer.heartbeat间隔= ＃心跳与消费者协调员之间的预期时间。</span><br><span class="line">spring.kafka.consumer.key-deserializer = #Deserializer 类的键。</span><br><span class="line">spring.kafka.consumer.max-poll-records = ＃一次调用poll（）时返回的最大记录数。</span><br><span class="line">spring.kafka.consumer.properties。* = ＃用于配置客户端的其他特定于使用者的属性。</span><br><span class="line">spring.kafka.consumer.ssl.key-password = ＃密钥库文件中私钥的密码。</span><br><span class="line">spring.kafka.consumer.ssl.key-store-location = ＃密钥库文件的位置。</span><br><span class="line">spring.kafka.consumer.ssl.key-store-password =＃存储密钥库文件的密码。</span><br><span class="line">spring.kafka.consumer.ssl.key-store-type = ＃密钥库的类型。</span><br><span class="line">spring.kafka.consumer.ssl.protocol = ＃要使用的SSL协议。</span><br><span class="line">spring.kafka.consumer.ssl.trust-store-location = ＃信任存储文件的位置。</span><br><span class="line">spring.kafka.consumer.ssl.trust-store-password = ＃存储信任存储文件的密码。</span><br><span class="line">spring.kafka.consumer.ssl.trust-store-type = ＃信任库的类型。</span><br><span class="line">spring.kafka.consumer.value-deserializer = #Deserializer 类的值。</span><br><span class="line">spring.kafka.jaas.control-flag = required ＃登录配置的控制标志。</span><br><span class="line">spring.kafka.jaas.enabled = false ＃是否启用JAAS配置。</span><br><span class="line">spring.kafka.jaas.login-module = com.sun.security.auth.module.Krb5LoginModule ＃登录模块。</span><br><span class="line">spring.kafka.jaas.options = ＃其他JAAS选项。</span><br><span class="line">spring.kafka.listener.ack-count = ＃当ackMode为“COUNT”或“COUNT_TIME”时，偏移提交之间的记录数。</span><br><span class="line">spring.kafka.listener.ack-mode = ＃Listener AckMode。请参阅spring-kafka文档。</span><br><span class="line">spring.kafka.listener.ack-time = ＃当ackMode为“TIME”或“COUNT_TIME”时，偏移提交之间的时间。</span><br><span class="line">spring.kafka.listener.client-id =＃侦听器的使用者client.id属性的前缀。</span><br><span class="line">spring.kafka.listener.concurrency = ＃在侦听器容器中运行的线程数。</span><br><span class="line">spring.kafka.listener.idle-event-interval = ＃发布空闲消费者事件（未收到数据）之间的时间。</span><br><span class="line">spring.kafka.listener.log-container-config = ＃是否在初始化期间记录容器配置（INFO级别）。</span><br><span class="line">spring.kafka.listener.monitor-interval = ＃检查无响应的消费者之间的时间。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">spring.kafka.listener.no-poll-threshold =#Multiplier应用于“pollTimeout”以确定消费者是否无响应。</span><br><span class="line">spring.kafka.listener.poll-timeout = ＃轮询消费者时使用的超时。</span><br><span class="line">spring.kafka.listener.type = single ＃Listener类型。</span><br><span class="line">spring.kafka.producer.acks = ＃生产者要求领导者在考虑完成请求之前收到的确认数。</span><br><span class="line">spring.kafka.producer.batch-size = ＃默认批量大小。</span><br><span class="line">spring.kafka.producer.bootstrap-servers = ＃逗号分隔的主机：端口对列表，用于建立与Kafka集群的初始连接。为生产者覆盖全球财产。</span><br><span class="line">spring.kafka.producer.buffer-memory = ＃生产者可用于缓冲等待发送到服务器的记录的总内存大小。</span><br><span class="line">spring.kafka.producer.client-id = #ID 在发出请求时传递给服务器。用于服务器端日志记录。</span><br><span class="line">spring.kafka.producer.compression-type = ＃生产者生成的所有数据的压缩类型。</span><br><span class="line">spring.kafka.producer.key-serializer = ＃密码的Serializer类。</span><br><span class="line">spring.kafka.producer.properties。* = ＃用于配置客户端的其他特定于生产者的属性。</span><br><span class="line">spring.kafka.producer.retries = ＃大于零时，启用重试失败的发送。</span><br><span class="line">spring.kafka.producer.ssl.key-password = ＃密钥库文件中私钥的密码。</span><br><span class="line">spring.kafka.producer.ssl.key-store-location = ＃密钥库文件的位置。</span><br><span class="line">spring.kafka.producer.ssl.key-store-password = ＃存储密钥库文件的密码。</span><br><span class="line">spring.kafka.producer.ssl.key-store-type = ＃密钥库的类型。</span><br><span class="line">spring.kafka.producer.ssl.protocol = ＃要使用的SSL协议。</span><br><span class="line">spring.kafka.producer.ssl.trust-store-location = ＃信任库文件的位置。</span><br><span class="line">spring.kafka.producer.ssl.trust-store-password = ＃存储信任存储文件的密码。</span><br><span class="line">spring.kafka.producer.ssl.trust-store-type = ＃信任库的类型。</span><br><span class="line">spring.kafka.producer.transaction-id-prefix = ＃非空时，为生产者启用事务支持。</span><br><span class="line">spring.kafka.producer.value-serializer = #Serializer 类的值。</span><br><span class="line">spring.kafka.properties。* = ＃用于配置客户端的生产者和使用者共有的附加属性。</span><br><span class="line">spring.kafka.ssl.key-password = ＃密钥库文件中私钥的密码。</span><br><span class="line">spring.kafka.ssl.key-store-location = ＃密钥库文件的位置。</span><br><span class="line">spring.kafka.ssl.key-store-password =＃存储密钥库文件的密码。</span><br><span class="line">spring.kafka.ssl.key-store-type = ＃密钥库的类型。</span><br><span class="line">spring.kafka.ssl.protocol = ＃要使用的SSL协议。</span><br><span class="line">spring.kafka.ssl.trust-store-location = ＃信任库文件的位置。</span><br><span class="line">spring.kafka.ssl.trust-store-password = ＃存储信任存储文件的密码。</span><br><span class="line">spring.kafka.ssl.trust-store-type = ＃信任库的类型。</span><br><span class="line">spring.kafka.streams.application-id = #Kafka streams application.id property; 默认spring.application.name。</span><br><span class="line">spring.kafka.streams.auto-startup = true ＃是否自动启动流工厂bean。</span><br><span class="line">spring.kafka.streams.bootstrap-servers = ＃逗号分隔的主机：端口对列表，用于建立与Kafka集群的初始连接。覆盖流的全局属性。</span><br><span class="line">spring.kafka.streams.cache-max-size-buffering = ＃用于跨所有线程缓冲的最大内存大小。</span><br><span class="line">spring.kafka.streams.client-id = #ID 在发出请求时传递给服务器。用于服务器端日志记录。</span><br><span class="line">spring.kafka.streams.properties。* = ＃用于配置流的其他Kafka属性。</span><br><span class="line">spring.kafka.streams.replication-factor =＃流处理应用程序创建的更改日志主题和重新分区主题的复制因子。</span><br><span class="line">spring.kafka.streams.ssl.key-password = ＃密钥库文件中私钥的密码。</span><br><span class="line">spring.kafka.streams.ssl.key-store-location = ＃密钥库文件的位置。</span><br><span class="line">spring.kafka.streams.ssl.key-store-password = ＃存储密钥库文件的密码。</span><br><span class="line">spring.kafka.streams.ssl.key-store-type = ＃密钥库的类型。</span><br><span class="line">spring.kafka.streams.ssl.protocol = ＃要使用的SSL协议。</span><br><span class="line">spring.kafka.streams.ssl.trust-store-location = ＃信任库文件的位置。</span><br><span class="line">spring.kafka.streams.ssl.trust-store-password = ＃存储信任存储文件的密码。</span><br><span class="line">spring.kafka.streams.ssl.trust-store-type = ＃信任库的类型。</span><br><span class="line">spring.kafka.streams.state-dir = ＃状态存储的目录位置。</span><br><span class="line">spring.kafka.template.default-topic = ＃发送消息的默认主题。</span><br><span class="line"></span><br><span class="line">#RABBIT（RabbitProperties）</span><br><span class="line">spring.rabbitmq.addresses = ＃逗号分隔的客户端应连接的地址列表。</span><br><span class="line">spring.rabbitmq.cache.channel.checkout-timeout = ＃达到缓存大小后等待获取通道的持续时间。</span><br><span class="line">spring.rabbitmq.cache.channel.size = ＃要在缓存中保留的通道数。</span><br><span class="line">spring.rabbitmq.cache.connection.mode = channel ＃连接工厂缓存模式。</span><br><span class="line">spring.rabbitmq.cache.connection.size = ＃缓存的连接数。</span><br><span class="line">spring.rabbitmq.connection-timeout = ＃连接超时。将其设置为零以永远等待。</span><br><span class="line">spring.rabbitmq.dynamic = true ＃是否创建AmqpAdmin bean。</span><br><span class="line">spring.rabbitmq.host = localhost ＃RabbitMQ主机。</span><br><span class="line">spring.rabbitmq.listener.direct.acknowledge-mode = ＃容器的确认模式。</span><br><span class="line">spring.rabbitmq.listener.direct.auto-startup = true ＃是否在启动时自动启动容器。</span><br><span class="line">spring.rabbitmq.listener.direct.consumers-per-queue = ＃每个队列的消费者数量。</span><br><span class="line">spring.rabbitmq.listener.direct.default-requeue-rejected = ＃默认情况下，拒绝的交付是否重新排队。</span><br><span class="line">spring.rabbitmq.listener.direct.idle-event-interval =＃应该发布空闲容器事件的频率。</span><br><span class="line">spring.rabbitmq.listener.direct.missing-queues-fatal = false ＃如果容器声明的队列在代理上不可用，则是否失败。</span><br><span class="line">spring.rabbitmq.listener.direct.prefetch = ＃每个消费者可能未完成的未确认消息的最大数量。</span><br><span class="line">spring.rabbitmq.listener.direct.retry.enabled = false ＃是否启用发布重试。</span><br><span class="line">spring.rabbitmq.listener.direct.retry.initial-interval = 1000ms ＃第一次和第二次尝试传递消息之间的持续时间。</span><br><span class="line">spring.rabbitmq.listener.direct.retry.max-attempts = 3＃传递邮件的最大尝试次数。</span><br><span class="line">spring.rabbitmq.listener.direct.retry.max -interval = 10000ms ＃尝试之间的最长持续时间。</span><br><span class="line">spring.rabbitmq.listener.direct.retry.multiplier = 1 ＃乘数应用于先前的重试间隔。</span><br><span class="line">spring.rabbitmq.listener.direct.retry.stateless = true ＃重试是无状态还是有状态。</span><br><span class="line">spring.rabbitmq.listener.simple.acknowledge-mode = ＃容器的确认模式。</span><br><span class="line">spring.rabbitmq.listener.simple.auto-startup = true ＃是否在启动时自动启动容器。</span><br><span class="line">spring.rabbitmq.listener.simple.concurrency =＃侦听器调用者线程的最小数量。</span><br><span class="line">spring.rabbitmq.listener.simple.default-requeue-rejected = ＃默认情况下，拒绝的交付是否重新排队。</span><br><span class="line">spring.rabbitmq.listener.simple.idle-event-interval = ＃应该发布空闲容器事件的频率。</span><br><span class="line">spring.rabbitmq.listener.simple.max-concurrency = ＃侦听器调用者线程的最大数量。</span><br><span class="line">spring.rabbitmq.listener.simple.missing-queues-fatal = true ＃如果容器声明的队列在代理上不可用，则是否失败和/或如果在运行时删除一个或多个队列，是否停止容器。</span><br><span class="line">spring.rabbitmq.listener.simple.prefetch =＃每个消费者可能未完成的未确认消息的最大数量。</span><br><span class="line">spring.rabbitmq.listener.simple.retry.enabled = false ＃是否启用发布重试。</span><br><span class="line">spring.rabbitmq.listener.simple.retry.initial-interval = 1000ms ＃第一次和第二次尝试传递消息之间的持续时间。</span><br><span class="line">spring.rabbitmq.listener.simple.retry.max-attempts = 3 ＃传递邮件的最大尝试次数。</span><br><span class="line">spring.rabbitmq.listener.simple.retry.max -interval = 10000ms ＃尝试之间的最长持续时间。</span><br><span class="line">spring.rabbitmq.listener.simple.retry.multiplier = 1 ＃乘数应用于上一个重试间隔。</span><br><span class="line">spring.rabbitmq.listener.simple.retry.stateless = true ＃重试是无状态还是有状态。</span><br><span class="line">spring.rabbitmq.listener.simple.transaction-size = ＃确认模式为AUTO时要在acks之间处理的消息数。如果大于预取，则预取将增加到此值。</span><br><span class="line">spring.rabbitmq.listener.type = simple ＃Listener容器类型。</span><br><span class="line">spring.rabbitmq.password = guest ＃登录以对代理进行身份验证。</span><br><span class="line">spring.rabbitmq.port = 5672 ＃RabbitMQ端口。</span><br><span class="line">spring.rabbitmq.publisher-confirms = false ＃是否启用发布者确认。</span><br><span class="line">spring.rabbitmq.publisher-returns = false＃是否启用发布者返回。</span><br><span class="line">spring.rabbitmq.requested-heartbeat = ＃请求心跳超时; 零，没有。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line">spring.rabbitmq.ssl.algorithm = #SSL 算法使用。默认情况下，由Rabbit客户端库配置。</span><br><span class="line">spring.rabbitmq.ssl.enabled = false ＃是否启用SSL支持。</span><br><span class="line">spring.rabbitmq.ssl.key-store = ＃保存SSL证书的密钥库的路径。</span><br><span class="line">spring.rabbitmq.ssl.key-store-password = ＃用于访问密钥库的密码。</span><br><span class="line">spring.rabbitmq.ssl.key-store-type = PKCS12 ＃密钥库类型。</span><br><span class="line">spring.rabbitmq.ssl.trust-store = ＃持有SSL证书的信任存储。</span><br><span class="line">spring.rabbitmq.ssl.trust-store-password = ＃用于访问信任库的密码。</span><br><span class="line">spring.rabbitmq.ssl.trust-store-type = JKS #Trust store type。</span><br><span class="line">spring.rabbitmq.ssl.validate-server-certificate = true ＃是否启用服务器端证书验证。</span><br><span class="line">spring.rabbitmq.ssl.verify-hostname = true ＃是否启用主机名验证。</span><br><span class="line">spring.rabbitmq.template.default-receive-queue = ＃从明确指定none时接收消息的默认队列的名称。</span><br><span class="line">spring.rabbitmq.template.exchange =＃用于发送操作的默认交换的名称。</span><br><span class="line">spring.rabbitmq.template.mandatory = ＃是否启用强制消息。</span><br><span class="line">spring.rabbitmq.template.receive-timeout = ＃receive（）`操作的超时。</span><br><span class="line">spring.rabbitmq.template.reply-timeout = #outoutout用于`sendAndReceive（）`操作。</span><br><span class="line">spring.rabbitmq.template.retry.enabled = false ＃是否启用发布重试。</span><br><span class="line">spring.rabbitmq.template.retry.initial-interval = 1000ms ＃第一次和第二次尝试传递消息之间的持续时间。</span><br><span class="line">spring.rabbitmq.template.retry.max-attempts = 3 ＃传递邮件的最大尝试次数。</span><br><span class="line">spring.rabbitmq.template.retry.max -interval = 10000ms ＃尝试之间的最长持续时间。</span><br><span class="line">spring.rabbitmq.template.retry.multiplier = 1 ＃乘数应用于先前的重试间隔。</span><br><span class="line">spring.rabbitmq.template.routing-key = ＃用于发送操作的默认路由密钥的值。</span><br><span class="line">spring.rabbitmq.username = guest ＃登录用户以对代理进行身份验证。</span><br><span class="line">spring.rabbitmq.virtual-host = ＃连接到代理时使用的虚拟主机。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">＃---------------------------------------- </span><br><span class="line">＃ACTUATOR PROPERTIES </span><br><span class="line">＃----- -----------------------------------</span><br><span class="line"></span><br><span class="line">#MANAGEMENT HTTP SERVER（ManagementServerProperties）</span><br><span class="line">management.server.add-application-context-header = false ＃在每个响应中添加“X-Application-Context”HTTP标头。</span><br><span class="line">management.server.address = ＃管理端点应绑定到的网络地址。需要自定义management.server.port。</span><br><span class="line">management.server.port = ＃管理端点HTTP端口（默认情况下使用与应用程序相同的端口）。配置其他端口以使用特定于管理的SSL。</span><br><span class="line">management.server.servlet.context-path = ＃管理端点context-path（例如，`/ management`）。需要自定义management.server.port。</span><br><span class="line">management.server.ssl.ciphers= ＃支持的SSL密码。</span><br><span class="line">management.server.ssl.client-auth = ＃客户端身份验证模式。</span><br><span class="line">management.server.ssl.enabled = true ＃是否启用SSL支持。</span><br><span class="line">management.server.ssl.enabled-protocols = ＃启用SSL协议。</span><br><span class="line">management.server.ssl.key-alias = ＃标识密钥库中密钥的别名。</span><br><span class="line">management.server.ssl.key-password = ＃用于访问密钥库中密钥的密码。</span><br><span class="line">management.server.ssl.key-store = ＃保存SSL证书的密钥库的路径（通常是jks文件）。</span><br><span class="line">management.server.ssl.key-store-password =＃用于访问密钥库的密码。</span><br><span class="line">management.server.ssl.key-store-provider = ＃密钥库的提供者。</span><br><span class="line">management.server.ssl.key-store-type = ＃密钥库的类型。</span><br><span class="line">management.server.ssl.protocol = TLS ＃要使用的SSL协议。</span><br><span class="line">management.server.ssl.trust-store = ＃持有SSL证书的信任存储。</span><br><span class="line">management.server.ssl.trust-store-password = ＃用于访问信任库的密码。</span><br><span class="line">management.server.ssl.trust-store-provider = ＃信任存储的提供者。</span><br><span class="line">management.server.ssl.trust-store-type = ＃信任库的类型。</span><br><span class="line"></span><br><span class="line">#CLOUDFOUNDRY </span><br><span class="line">management.cloudfoundry.enabled = true ＃是否启用扩展的Cloud Foundry执行器端点。</span><br><span class="line">management.cloudfoundry.skip-ssl-validation = false ＃是否跳过Cloud Foundry执行器端点安全调用的SSL验证。</span><br><span class="line"></span><br><span class="line">#ENDPOINTS GENERAL CONFIGURATION </span><br><span class="line">management.endpoints.enabled-by-default = ＃默认情况下是否启用或禁用所有端点。</span><br><span class="line"></span><br><span class="line">#ENDPOINTS JMX CONFIGURATION（JmxEndpointProperties）</span><br><span class="line">management.endpoints.jmx.domain = org.springframework.boot #Endpoints JMX域名。如果设置，则回退到&apos;spring.jmx.default-domain&apos;。</span><br><span class="line">management.endpoints.jmx.exposure.include = * ＃应包含的端点ID或所有的“*”。</span><br><span class="line">management.endpoints.jmx.exposure.exclude = ＃应排除的端点ID或所有的&apos;*&apos;。</span><br><span class="line">management.endpoints.jmx.static-names = ＃附加的静态属性，附加到表示端点的MBean的所有ObjectName。</span><br><span class="line"></span><br><span class="line">#ENDPOINTS WEB CONFIGURATION（WebEndpointProperties）</span><br><span class="line">management.endpoints.web.exposure.include = health，info ＃应包含的端点ID或所有的“*”。</span><br><span class="line">management.endpoints.web.exposure.exclude = ＃应排除的端点ID或所有的&apos;*&apos;。</span><br><span class="line">management.endpoints.web.base-path = / actuator #Web端点的基本路径。相对于server.servlet.context-path或management.server.servlet.context-path，如果配置了management.server.port。</span><br><span class="line">management.endpoints.web.path-mapping = ＃端点ID与应公开它们的路径之间的映射。</span><br><span class="line"></span><br><span class="line">#ENDPOINTS CORS CONFIGURATION（CorsEndpointProperties）</span><br><span class="line">management.endpoints.web.cors.allow-credentials = ＃是否支持凭据。未设置时，不支持凭据。</span><br><span class="line">management.endpoints.web.cors.allowed-headers = ＃逗号分隔的请求中允许的标头列表。&apos;*&apos;允许所有标题。</span><br><span class="line">management.endpoints.web.cors.allowed-methods = ＃逗号分隔的允许方法列表。&apos;*&apos;允许所有方法。未设置时，默认为GET。</span><br><span class="line">management.endpoints.web.cors.allowed-origins = ＃逗号分隔的原始列表允许。&apos;*&apos;允许所有来源。未设置时，将禁用CORS支持。</span><br><span class="line">management.endpoints.web.cors.exposed-headers = ＃逗号分隔的标题列表，包含在响应中。</span><br><span class="line">management.endpoints.web.cors.max-age = 1800s ＃客户端缓存来自飞行前请求的响应的时间。如果未指定持续时间后缀，则将使用秒。</span><br><span class="line"></span><br><span class="line">#AUDIT EVENTS ENDPOINT（AuditEventsEndpoint）</span><br><span class="line">management.endpoint.auditevents.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.auditevents.enabled = true ＃是否启用auditevents端点。</span><br><span class="line"></span><br><span class="line">#BEANS ENDPOINT（BeansEndpoint）</span><br><span class="line">management.endpoint.beans.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.beans.enabled = true ＃是否启用beans端点。</span><br><span class="line"></span><br><span class="line">#CACHES ENDPOINT（CachesEndpoint）</span><br><span class="line">management.endpoint.caches.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.caches.enabled = true ＃是否启用缓存端点。</span><br><span class="line"></span><br><span class="line">#条件报告ENDPOINT（ConditionsReportEndpoint）</span><br><span class="line">management.endpoint.conditions.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.conditions.enabled = true ＃是否启用条件端点。</span><br><span class="line"></span><br><span class="line">#CONFIGURATION PROPERTIES REPORT ENDPOINT（ConfigurationPropertiesReportEndpoint，ConfigurationPropertiesReportEndpointProperties）</span><br><span class="line">management.endpoint.configprops.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.configprops.enabled = true ＃是否启用configprops端点。</span><br><span class="line">management.endpoint.configprops.keys-to-sanitize = password，secret，key，token，。* credentials。*，vcap_services，sun.java.command ＃应该清理的密钥。键可以是属性结尾的简单字符串或正则表达式。</span><br><span class="line"></span><br><span class="line">#ENVEST ENDPOINT（EnvironmentEndpoint，EnvironmentEndpointProperties）</span><br><span class="line">management.endpoint.env.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.env.enabled = true ＃是否启用env端点。</span><br><span class="line">management.endpoint.env.keys-to-sanitize = password，secret，key，token，。* credentials。*，vcap_services，sun.java.command ＃应该清理的密钥。键可以是属性结尾的简单字符串或正则表达式。</span><br><span class="line"></span><br><span class="line">#FLYWAY ENDPOINT（FlywayEndpoint）</span><br><span class="line"> management.endpoint.flyway.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.flyway.enabled = true ＃是否启用flyway端点。</span><br><span class="line"></span><br><span class="line">#HEEC ENDPOINT（HealthEndpoint，HealthEndpointProperties）</span><br><span class="line">management.endpoint.health.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.health.enabled = true ＃是否启用运行状况端点。</span><br><span class="line">management.endpoint.health.roles = ＃用于确定是否授权用户显示详细信息的角色。为空时，所有经过身份验证的用户都被授权。</span><br><span class="line">management.endpoint.health.show-details = never ＃何时显示完整的健康详细信息。</span><br><span class="line"></span><br><span class="line">#HEAP DUMP ENDPOINT（HeapDumpWebEndpoint）</span><br><span class="line">management.endpoint.heapdump.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.heapdump.enabled = true ＃是否启用heapdump端点。</span><br><span class="line"></span><br><span class="line">#HTTP TRACE ENDPOINT（HttpTraceEndpoint）</span><br><span class="line">management.endpoint.httptrace.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.httptrace.enabled = true ＃是否启用httptrace端点。</span><br><span class="line"></span><br><span class="line">#INFO ENDPOINT（InfoEndpoint）</span><br><span class="line">info = ＃要添加到信息端点的任意属性。</span><br><span class="line">management.endpoint.info.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.info.enabled = true ＃是否启用信息端点。</span><br><span class="line"></span><br><span class="line">#INTEGRATION GRAPH ENDPOINT（IntegrationGraphEndpoint）</span><br><span class="line">management.endpoint.integrationgraph.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.integrationgraph.enabled = true ＃是否启用集成图终结点。</span><br><span class="line"></span><br><span class="line">#JOLOKIA ENDPOINT（JolokiaProperties）</span><br><span class="line">management.endpoint.jolokia.config。* = ＃Jolokia设置。有关更多详细信息，请参阅Jolokia的文档。</span><br><span class="line">management.endpoint.jolokia.enabled = true ＃是否启用jolokia端点。</span><br><span class="line"></span><br><span class="line">#LIQUIBASE ENDPOINT（LiquibaseEndpoint）</span><br><span class="line">management.endpoint.liquibase.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.liquibase.enabled = true ＃是否启用liquibase端点。</span><br><span class="line"></span><br><span class="line">＃LOG FILE ENDPOINT（LogFileWebEndpoint，LogFileWebEndpointProperties）</span><br><span class="line">management.endpoint.logfile.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.logfile.enabled = true ＃是否启用日志文件端点。</span><br><span class="line">management.endpoint.logfile.external-file = ＃要访问的外部日志文件。如果日志文件由输出重定向而不是日志记录系统本身写入，则可以使用。</span><br><span class="line"></span><br><span class="line">＃LOGGERS ENDPOINT（LoggersEndpoint）</span><br><span class="line">management.endpoint.loggers.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.loggers.enabled = true ＃是否启用记录器端点。</span><br><span class="line"></span><br><span class="line">#REQUEST MAPPING ENDPOINT（MappingsEndpoint）</span><br><span class="line">management.endpoint.mappings.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.mappings.enabled = true ＃是否启用映射端点。</span><br><span class="line"></span><br><span class="line">#METRICS ENDPOINT（MetricsEndpoint）</span><br><span class="line">management.endpoint.metrics.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.metrics.enabled = true ＃是否启用指标端点。</span><br><span class="line"></span><br><span class="line">#PROMETHEUS ENDPOINT（PrometheusScrapeEndpoint）</span><br><span class="line">management.endpoint.prometheus.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.prometheus.enabled = true ＃是否启用prometheus端点。</span><br><span class="line"></span><br><span class="line">#STEEDEDED TASKS ENDPOINT（ScheduledTasksEndpoint）</span><br><span class="line">management.endpoint.scheduledtasks.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.scheduledtasks.enabled = true ＃是否启用scheduledtasks端点。</span><br><span class="line"></span><br><span class="line">#SESSIONS ENDPOINT（SessionsEndpoint）</span><br><span class="line">management.endpoint.sessions.enabled = true ＃是否启用会话端点。</span><br><span class="line"></span><br><span class="line">#SHUTDOWN ENDPOINT（ShutdownEndpoint）</span><br><span class="line">management.endpoint.shutdown.enabled = false ＃是否启用关闭端点。</span><br><span class="line"></span><br><span class="line">#THREAD DUMP ENDPOINT（ThreadDumpEndpoint）</span><br><span class="line">management.endpoint.threaddump.cache.time-to-live = 0ms ＃可以缓存响应的最长时间。</span><br><span class="line">management.endpoint.threaddump.enabled = true ＃是否启用threaddump端点。</span><br><span class="line"></span><br><span class="line">#HEALTH INDICATORS </span><br><span class="line">management.health.db.enabled = true ＃是否启用数据库运行状况检查。</span><br><span class="line">management.health.cassandra.enabled = true ＃是否启用Cassandra运行状况检查。</span><br><span class="line">management.health.couchbase.enabled = true ＃是否启用Couchbase运行状况检查。</span><br><span class="line">management.health.defaults.enabled = true ＃是否启用默认健康指标。</span><br><span class="line">management.health.diskspace.enabled = true ＃是否启用磁盘空间运行状况检查。</span><br><span class="line">management.health.diskspace.path = ＃用于计算可用磁盘空间的路径。</span><br><span class="line">management.health.diskspace.threshold = 10MB＃应该可用的最小磁盘空间。</span><br><span class="line">management.health.elasticsearch.enabled = true ＃是否启用Elasticsearch运行状况检查。</span><br><span class="line">management.health.elasticsearch.indices = ＃逗号分隔的索引名称。</span><br><span class="line">management.health.elasticsearch.response-timeout = 100ms ＃等待集群响应的时间。</span><br><span class="line">management.health.influxdb.enabled = true ＃是否启用InfluxDB运行状况检查。</span><br><span class="line">management.health.jms.enabled = true ＃是否启用JMS运行状况检查。</span><br><span class="line">management.health.ldap.enabled = true ＃是否启用LDAP运行状况检查。</span><br><span class="line">management.health.mail.enabled = true＃是否启用邮件健康检查。</span><br><span class="line">management.health.mongo.enabled = true ＃是否启用MongoDB运行状况检查。</span><br><span class="line">management.health.neo4j.enabled = true ＃是否启用Neo4j运行状况检查。</span><br><span class="line">management.health.rabbit.enabled = true ＃是否启用RabbitMQ运行状况检查。</span><br><span class="line">management.health.redis.enabled = true ＃是否启用Redis运行状况检查。</span><br><span class="line">management.health.solr.enabled = true ＃是否启用Solr运行状况检查。</span><br><span class="line">management.health.status.http-mapping = ＃将健康状态映射到HTTP状态代码。默认情况下，已注册的运行状况映射到合理的默认值（例如，UP映射到200）。</span><br><span class="line">management.health.status.order = DOWN，OUT_OF_SERVICE，UP，UNKNOWN ＃以逗号分隔的健康状态列表，按严重程度排序。</span><br><span class="line"></span><br><span class="line">#HTTP TRACING（HttpTraceProperties）</span><br><span class="line">management.trace.http.enabled = true ＃是否启用HTTP请求 - 响应跟踪。</span><br><span class="line">management.trace.http.include =请求标头，响应标头，cookie，错误＃要包含在跟踪中的项目。</span><br><span class="line"></span><br><span class="line">#INFO CONTRIBUTORS（InfoContributorProperties）</span><br><span class="line">management.info.build.enabled = true ＃是否启用构建信息。</span><br><span class="line">management.info.defaults.enabled = true ＃是否启用默认信息贡献者。</span><br><span class="line">management.info.env.enabled = true ＃是否启用环境信息。</span><br><span class="line">management.info.git.enabled = true ＃是否启用git信息。</span><br><span class="line">management.info.git.mode = simple ＃用于公开git信息的模式。</span><br><span class="line"></span><br><span class="line">#METRICS </span><br><span class="line">management.metrics.distribution.maximum-expected-value。* = ＃预计将以指定名称开始计量ID的最大值。</span><br><span class="line">management.metrics.distribution.minimum-expected-value。* = ＃预计将以指定名称开始的仪表ID的最小值。</span><br><span class="line">management.metrics.distribution.percentiles。* = ＃特定计算的非可聚合百分位数，用于以指定名称开始的仪表ID发送到后端。</span><br><span class="line">management.metrics.distribution.percentiles-histogram。* = ＃是否以指定名称开头的米ID应发布百分位直方图。</span><br><span class="line">management.metrics.distribution.sla。* =＃以指定名称开头的仪表ID的特定SLA边界。最长的比赛获胜。</span><br><span class="line">management.metrics.enable。* = ＃应启用是否以指定名称开始的仪表ID。最长的匹配获胜，关键的“all”也可以用于配置所有的米。</span><br><span class="line">management.metrics.export.appoptics.api-token = #AppOptics API令牌。</span><br><span class="line">management.metrics.export.appoptics.batch-size = 500 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.appoptics.connect-timeout = 5s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.appoptics.enabled= true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.appoptics.host-tag = instance ＃将指标发送到AppOptics时将映射到“@host”的标记。</span><br><span class="line">management.metrics.export.appoptics.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.appoptics.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.appoptics.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.appoptics.uri = https://api.appoptics.com/v1/measurements# 将指标发送到的URI。</span><br><span class="line">management.metrics.export.atlas.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.atlas.config-refresh-frequency = 10s ＃从LWC服务刷新配置设置的频率。</span><br><span class="line">management.metrics.export.atlas.config-time-to-live = 150s #LWC服务订阅的生存时间。</span><br><span class="line">management.metrics.export.atlas.config-uri = http：// localhost：7101 / lwc / api / v1 / expressions / local-dev #Atlas LWC端点的URI，用于检索当前订阅。</span><br><span class="line">management.metrics.export.atlas.connect-timeout = 1s＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.atlas.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.atlas.eval-uri = http：// localhost：7101 / lwc / api / v1 / evaluate ＃用于评估订阅数据的Atlas LWC端点的URI。</span><br><span class="line">management.metrics.export.atlas.lwc-enabled = false ＃是否启用流式传输到Atlas LWC。</span><br><span class="line">management.metrics.export.atlas.meter-time-to-live = 15m ＃没有任何活动的米的生存时间。在此期限之后，仪表将被视为已过期且不会报告。</span><br><span class="line">management.metrics.export.atlas.num-threads = 2＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.atlas.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.atlas.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.atlas.uri = http：// localhost：7101 / api / v1 / publish #Atlas服务器的URI。</span><br><span class="line">management.metrics.export.datadog.api-key = ＃Datadog API密钥。</span><br><span class="line">management.metrics.export.datadog.application-key = ＃Datadog应用程序密钥。不是严格要求，但通过向Datadog发送仪表描述，类型和基本单位来改进Datadog体验。</span><br><span class="line">management.metrics.export.datadog.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.datadog.connect-timeout = 1s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.datadog.descriptions = true ＃是否将描述元数据发布到Datadog。将其关闭以最小化发送的元数据量。</span><br><span class="line">management.metrics.export.datadog.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.datadog.host-tag = instance＃将指标发送到Datadog时将映射到“主机”的标记。</span><br><span class="line">management.metrics.export.datadog.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.datadog.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.datadog.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.datadog.uri = https://app.datadoghq.com# 将指标发送到的URI。如果需要将指标发布到到Datadog的内部代理，则可以使用此方法定义代理的位置。</span><br><span class="line">management.metrics.export.dynatrace.api-token =#Dynatrace身份验证令牌。</span><br><span class="line">management.metrics.export.dynatrace.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.dynatrace.connect-timeout = 1s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.dynatrace.device-id = 将度量标准导出到Dynatrace的自定义设备的ID。</span><br><span class="line">management.metrics.export.dynatrace.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.dynatrace.num-threads = 2＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.dynatrace.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.dynatrace.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.dynatrace.technology-type = java ＃导出的指标的技术类型。用于在Dynatrace UI中对逻辑技术名称下的度量标准进行分组。</span><br><span class="line">management.metrics.export.dynatrace.uri = 将指标发送到的URI。应该用于SaaS，自我管理的实例或通过内部代理途径。</span><br><span class="line">management.metrics.export.elastic.auto-create-index = true＃是否自动创建索引（如果不存在）。</span><br><span class="line">management.metrics.export.elastic.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.elastic.connect-timeout = 1s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.elastic.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.elastic.host = http：// localhost：9200 ＃将指标导出到的主机。</span><br><span class="line">management.metrics.export.elastic.index = metrics ＃将指标导出到的索引。</span><br><span class="line">management.metrics.export.elastic.index-date-format = yyyy-MM ＃用于滚动索引的索引日期格式。附加到索引名称后面加一个&apos; - &apos;。</span><br><span class="line">management.metrics.export.elastic.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.elastic.password = ＃弹性服务器的登录密码。</span><br><span class="line">management.metrics.export.elastic.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.elastic.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.elastic.timestamp-field-name = @ timestamp ＃时间戳字段的名称。 </span><br><span class="line">management.metrics.export.elastic.user-name = ＃弹性服务器的登录用户。</span><br><span class="line">management.metrics.export.ganglia.addressing-mode = multicast ＃UDP寻址模式，单播或多播。</span><br><span class="line">management.metrics.export.ganglia.duration- units =毫秒＃用于报告持续时间的基本时间单位。</span><br><span class="line">management.metrics.export.ganglia.enabled = true ＃是否启用向Ganglia导出指标。</span><br><span class="line">management.metrics.export.ganglia.host = localhost ＃Ganglia服务器的主机，用于接收导出的指标。</span><br><span class="line">management.metrics.export.ganglia.port = 8649 ＃Ganglia服务器端口，用于接收导出的指标。</span><br><span class="line">management.metrics.export.ganglia.protocol-version = 3.1 ＃Ganglia协议版本。必须是3.1或3.0。</span><br><span class="line">management.metrics.export.ganglia.rate- units = seconds ＃用于报告费率的基本时间单位。</span><br><span class="line">management.metrics.export.ganglia.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.ganglia.time-to-live = 1 ＃生活在Ganglia上的指标的时间。将多播生存时间设置为大于主机之间的跳数（路由器）的数量。</span><br><span class="line">management.metrics.export.graphite.duration-units =毫秒＃用于报告持续时间的基本时间单位。</span><br><span class="line">management.metrics.export.graphite.enabled = true＃是否启用将指标导出到Graphite。</span><br><span class="line">management.metrics.export.graphite.host = localhost ＃Graphite服务器的主机，用于接收导出的指标。</span><br><span class="line">management.metrics.export.graphite.port = 2004 ＃Graphite服务器的端口，用于接收导出的指标。</span><br><span class="line">management.metrics.export.graphite.protocol = pickled ＃在将数据发送到Graphite时使用的协议。</span><br><span class="line">management.metrics.export.graphite.rate-units = seconds ＃用于报告费率的基本时间单位。</span><br><span class="line">management.metrics.export.graphite.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.graphite.tags-as-prefix =＃对于默认命名约定，将指定的标记键转换为度量标准前缀的一部分。</span><br><span class="line">management.metrics.export.humio.api-token = ＃Humio API令牌。</span><br><span class="line">management.metrics.export.humio.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.humio.connect-timeout = 5s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.humio.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.humio.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.humio.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.humio.repository = sandbox ＃要将指标发布到的存储库的名称。</span><br><span class="line">management.metrics.export.humio.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.humio.tags。* = ＃Humio标签，用于描述将存储指标的数据源。Humio标签是与Micrometer标签不同的概念。千分尺的标签用于沿尺寸边界划分度量。</span><br><span class="line">management.metrics.export.humio.uri = https://cloud.humio.com#idex将指标发送到。如果您需要将指标发布到Humio的内部代理，您可以使用此方法定义代理的位置。</span><br><span class="line">management.metrics.export.influx.auto-create-db = true ＃在尝试向其发布指标之前，是否创建Influx数据库是否存在。</span><br><span class="line">management.metrics.export.influx.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.influx.compressed = true ＃是否对发布到Influx的度量批次启用GZIP压缩。</span><br><span class="line">management.metrics.export.influx.connect-timeout = 1s＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.influx.consistency = one ＃为每个点写一致性。</span><br><span class="line">management.metrics.export.influx.db = mydb ＃将指标发送到Influx时将映射到“主机”的标记。</span><br><span class="line">management.metrics.export.influx.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.influx.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.influx.password = ＃Influx服务器的登录密码。</span><br><span class="line">management.metrics.export.influx.read-timeout = 10s＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.influx.retention-duration = ＃Influx应在当前数据库中保留数据的时间段。</span><br><span class="line">management.metrics.export.influx.retention-shard-duration = ＃分片组覆盖的时间范围。</span><br><span class="line">management.metrics.export.influx.retention-policy = ＃要使用的保留策略（如果未指定，则Influx写入DEFAULT保留策略）。</span><br><span class="line">management.metrics.export.influx.retention-replication-factor = ＃在群集中存储了多少份数据副本。</span><br><span class="line">management.metrics.export.influx.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.influx.uri = http：// localhost：8086 ＃Influx服务器的URI。</span><br><span class="line">management.metrics.export.influx.user-name = ＃Influx服务器的登录用户。</span><br><span class="line">management.metrics.export.jmx.domain = metrics ＃Metrics JMX域名。</span><br><span class="line">management.metrics.export.jmx.enabled = true ＃是否已启用将度量标准导出到JMX。</span><br><span class="line">management.metrics.export.jmx.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.kairos.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.kairos.connect-timeout = 1s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.kairos.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.kairos.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.kairos.password = #KairosDB服务器的登录密码。</span><br><span class="line">management.metrics.export.kairos.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.kairos.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.kairos.uri = localhost：8080 / api / v1 /  datapoints #KairosDB服务器的URI。</span><br><span class="line">management.metrics.export.kairos.user-name = #KairosDB服务器的登录用户。</span><br><span class="line">management.metrics.export.newrelic.account-id = ＃新Relic帐户ID。</span><br><span class="line">management.metrics.export.newrelic.api-key = #New Relic API密钥。</span><br><span class="line">management.metrics.export.newrelic.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.newrelic.connect-timeout = 1s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.newrelic.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.newrelic.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.newrelic.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.newrelic.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.newrelic.uri = https：//insights-collector.newrelic.com #idex 将指标发送到。</span><br><span class="line">management.metrics.export.prometheus.descriptions = true＃是否将发布描述作为scrape有效负载的一部分启用到Prometheus。将其关闭以最小化每次刮擦发送的数据量。</span><br><span class="line">management.metrics.export.prometheus.enabled = true ＃是否启用将指标导出到Prometheus。</span><br><span class="line">management.metrics.export.prometheus.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.prometheus.pushgateway.base-url = localhost：9091 ＃Pushgateway的基本URL。</span><br><span class="line">management.metrics.export.prometheus.pushgateway.enabled = false ＃通过Prometheus Pushgateway启用发布。</span><br><span class="line">management.metrics.export.prometheus.pushgateway.grouping-key =＃为推送的指标分组键。</span><br><span class="line">management.metrics.export.prometheus.pushgateway.job = ＃此应用程序实例的作业标识符。</span><br><span class="line">management.metrics.export.prometheus.pushgateway.push-rate = 1m ＃用于推送指标的频率。</span><br><span class="line">management.metrics.export.prometheus.pushgateway.shutdown-operation = ＃应该在关机时执行的操作。</span><br><span class="line">management.metrics.export.signalfx.access-token = #SignalFX访问令牌。</span><br><span class="line">management.metrics.export.signalfx.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.signalfx.connect-timeout = 1s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.signalfx.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.signalfx.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.signalfx.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.signalfx.source = ＃唯一标识正在向SignalFx发布指标的应用实例。默认为本地主机名。</span><br><span class="line">management.metrics.export.signalfx.step = 10s＃步骤大小（即报告频率）使用。</span><br><span class="line">management.metrics.export.signalfx.uri = https：//ingest.signalfx.com# 将指标发送到的URI。</span><br><span class="line">management.metrics.export.simple.enabled = true ＃在没有任何其他导出器的情况下，是否启用将指标导出到内存后端。</span><br><span class="line">management.metrics.export.simple.mode =累积＃计数模式。</span><br><span class="line">management.metrics.export.simple.step = 1m ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.statsd.enabled = true ＃是否启用将度量标准导出到StatsD。</span><br><span class="line">management.metrics.export.statsd.flavor = datadog#StatsD线路协议使用。</span><br><span class="line">management.metrics.export.statsd.host = localhost ＃StatsD服务器的主机，用于接收导出的指标。</span><br><span class="line">management.metrics.export.statsd.max-packet-length = 1400 ＃单个有效负载的总长度应保持在网络的MTU中。</span><br><span class="line">management.metrics.export.statsd.polling-frequency = 10s ＃测量仪表的频率。轮询仪表时，会重新计算其值，如果值已更改（或者publishUnchangedMeters为true），则会将其发送到StatsD服务器。</span><br><span class="line">management.metrics.export.statsd.port = 8125 ＃StatsD服务器的端口，用于接收导出的指标。</span><br><span class="line">management.metrics.export.statsd.publish-不变米= true ＃是否将未更改的计量表发送到StatsD服务器。</span><br><span class="line">management.metrics.export.wavefront.api-token = ＃将指标直接发布到Wavefront API主机时使用的API令牌。</span><br><span class="line">management.metrics.export.wavefront.batch-size = 10000 ＃每个请求用于此后端的度量数。如果找到更多测量值，则将发出多个请求。</span><br><span class="line">management.metrics.export.wavefront.connect-timeout = 1s ＃对此后端的请求的连接超时。</span><br><span class="line">management.metrics.export.wavefront.enabled = true ＃是否启用将度量标准导出到此后端。</span><br><span class="line">management.metrics.export.wavefront.global-prefix =＃全局前缀用于将源自此应用程序的白盒工具的度量标准与在Wavefront UI中查看时源自其他Wavefront集成的度量标准分开。</span><br><span class="line">management.metrics.export.wavefront.num-threads = 2 ＃指标发布计划程序使用的线程数。</span><br><span class="line">management.metrics.export.wavefront.read-timeout = 10s ＃读取此后端请求的超时时间。</span><br><span class="line">management.metrics.export.wavefront.source = ＃应用程序实例的唯一标识符，该实例是发布到Wavefront的度量标准的来源。默认为本地主机名。</span><br><span class="line">management.metrics.export.wavefront.step = 10s ＃要使用的步长（即报告频率）。</span><br><span class="line">management.metrics.export.wavefront.uri = https://longboard.wavefront.com# 将指标发送到的URI。</span><br><span class="line">management.metrics.use-global-registry = true ＃是否应将自动配置的MeterRegistry实现绑定到Metrics上的全局静态注册表。</span><br><span class="line">management.metrics.tags。* = ＃应用于每个仪表的公共标签。</span><br><span class="line">management.metrics.web.client.max-uri-tags = 100 ＃允许的唯一URI标记值的最大数量。达到最大标记值数后，过滤器将拒绝具有其他标记值的度量标准。</span><br><span class="line">management.metrics.web.client.requests-metric-name = http.client.requests ＃已发送请求的度量标准的名称。</span><br><span class="line">management.metrics.web.server.auto-time-requests = true ＃是否应自动为Spring MVC，WebFlux或Jersey处理的请求定时。</span><br><span class="line">management.metrics.web.server.max-uri-tags = 100 ＃允许的唯一URI标记值的最大数量。达到最大标记值数后，过滤器将拒绝具有其他标记值的度量标准。</span><br><span class="line">management.metrics.web.server.requests-metric-name = http.server.requests ＃已接收请求的度量标准的名称。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">＃---------------------------------------- </span><br><span class="line">#DEDTOOLS PROPERTIES </span><br><span class="line">＃----------------------------------------</span><br><span class="line"></span><br><span class="line">#DESTOOLS（DevToolsProperties）</span><br><span class="line">spring.devtools.add-properties = true ＃是否启用开发属性默认值。</span><br><span class="line">spring.devtools.livereload.enabled = true ＃是否启用livereload.com兼容服务器。</span><br><span class="line">spring.devtools.livereload.port = 35729 ＃服务器端口。</span><br><span class="line">spring.devtools.restart.additional-exclude = ＃应该从触发完全重启中排除的其他模式。</span><br><span class="line">spring.devtools.restart.additional-paths = ＃要监视更改的其他路径。</span><br><span class="line">spring.devtools.restart.enabled = true ＃是否启用自动重启。</span><br><span class="line">spring.devtools.restart.exclude= META-INF /行家/ **，META-INF /资源/ **，资源/ **，静态/ **，公共/ **，模板/ **，** / *的Test.class，** / * Tests.class，git.properties，META-INF / build-info.properties ＃应该从触发完全重启中排除的模式。</span><br><span class="line">spring.devtools.restart.log-condition-evaluation-delta = true ＃是否在重新启动时记录条件评估增量。</span><br><span class="line">spring.devtools.restart.poll-interval = 1s ＃轮询类路径更改之间等待的时间。</span><br><span class="line">spring.devtools.restart.quiet-period = 400ms ＃触发重启之前没有任何类路径更改所需的安静时间量。</span><br><span class="line">spring.devtools.restart.trigger-file =＃特定文件的名称，当更改时，触发重新启动检查。如果未指定，则任何类路径文件更改都会触发重新启动。</span><br><span class="line"></span><br><span class="line">#remote DEVTOOLS（RemoteDevToolsProperties）</span><br><span class="line">spring.devtools.remote.context-path = /。~~ spring-boot！〜＃用于处理远程连接的上下文路径。</span><br><span class="line">spring.devtools.remote.proxy.host = ＃用于连接远程应用程序的代理主机。</span><br><span class="line">spring.devtools.remote.proxy.port = ＃用于连接远程应用程序的代理端口。</span><br><span class="line">spring.devtools.remote.restart.enabled = true ＃是否启用远程重启。</span><br><span class="line">spring.devtools.remote.secret = ＃建立连接所需的共享密钥（启用远程支持所需）。</span><br><span class="line">spring.devtools.remote.secret头名= X-AUTH-TOKEN ＃用于传输共享密钥的HTTP头。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">＃---------------------------------------- </span><br><span class="line">#TESTING PROPERTIES </span><br><span class="line">＃----- -----------------------------------</span><br><span class="line"></span><br><span class="line">spring.test.database.replace = any ＃要替换的现有DataSource的类型。</span><br><span class="line">spring.test.mockmvc.print =default #MVC 打印选项。</span><br></pre></td></tr></table></figure>
</div></div><a class="button-hover more" href="/2019/03/21/使用SpringBoot-附录A/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/21/使用SpringBoot-SpringMVC/">使用SpringBoot-SpringMVC</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-21</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/rest/">rest</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/spring/">spring</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/mvc/">mvc</a></div></div><div class="post-content"><div class="main-content content"><h1 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring MVC"></a>Spring MVC</h1><p>Spring Boot有许多包含Spring MVC的启动器。请注意，一些启动器包含对Spring MVC的依赖，而不是直接包含它。本节回答有关Spring MVC和Spring Boot的常见问题。</p>
<h2 id="编写JSON-REST服务"><a href="#编写JSON-REST服务" class="headerlink" title="编写JSON REST服务"></a>编写JSON REST服务</h2><p><code>@RestController</code>只要Jackson2在类路径中，Spring Boot应用程序中的任何Spring 都应默认呈现JSON响应，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/thing"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> MyThing <span class="title">thing</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> MyThing();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>只要<code>MyThing</code>可以通过Jackson2序列化（对于普通的POJO或Groovy对象都是如此），则<code>localhost:8080/thing</code>默认为它提供JSON表示。请注意，在浏览器中，您有时可能会看到XML响应，因为浏览器倾向于发送更喜欢XML的接受标头。</p>
<h2 id="编写XML-REST服务"><a href="#编写XML-REST服务" class="headerlink" title="编写XML REST服务"></a>编写XML REST服务</h2><p>如果<code>jackson-dataformat-xml</code>在类路径上有Jackson XML扩展（），则可以使用它来呈现XML响应。我们用于JSON的前一个示例可以使用。要使用Jackson XML渲染器，请将以下依赖项添加到项目中：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果Jackson的XML扩展不可用，则使用JAXB（默认情况下在JDK中提供），并附加要求<code>MyThing</code>注释为 <code>@XmlRootElement</code>，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@XmlRootElement</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThing</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="comment">// .. getters and setters</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>要使服务器呈现XML而不是JSON，您可能必须发送 <code>Accept: text/xml</code>标头（或使用浏览器）。</p>
<h2 id="自定义Jackson-ObjectMapper"><a href="#自定义Jackson-ObjectMapper" class="headerlink" title="自定义Jackson ObjectMapper"></a>自定义Jackson ObjectMapper</h2><p>Spring MVC（客户端和服务器端）用于<code>HttpMessageConverters</code>协商HTTP交换中的内容转换。如果Jackson在类路径上，您已经获得了由其提供的默认转换器<code>Jackson2ObjectMapperBuilder</code>，其实例将自动为您配置。</p>
<p>该<code>ObjectMapper</code>（或<code>XmlMapper</code>为JacksonXML转换器）实例（默认创建）具有以下定义的属性：</p>
<ul>
<li><code>MapperFeature.DEFAULT_VIEW_INCLUSION</code> 被禁用</li>
<li><code>DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES</code> 被禁用</li>
<li><code>SerializationFeature.WRITE_DATES_AS_TIMESTAMPS</code> 被禁用</li>
</ul>
<p>Spring Boot还具有一些功能，可以更轻松地自定义此行为。</p>
<p>您可以使用环境配置<code>ObjectMapper</code>和<code>XmlMapper</code>实例。Jackson提供了一套广泛的简单开/关功能，可用于配置其处理的各个方面。这些功能在六个enum（在Jackson中）中描述，它们映射到环境中的属性：</p>
<table>
<thead>
<tr>
<th style="text-align:center">枚举</th>
<th style="text-align:center">属性</th>
<th style="text-align:center">值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>com.fasterxml.jackson.databind.DeserializationFeature</code></td>
<td style="text-align:center"><code>spring.jackson.deserialization.&lt;feature_name&gt;</code></td>
<td style="text-align:center"><code>true</code>， <code>false</code></td>
</tr>
<tr>
<td style="text-align:center"><code>com.fasterxml.jackson.core.JsonGenerator.Feature</code></td>
<td style="text-align:center"><code>spring.jackson.generator.&lt;feature_name&gt;</code></td>
<td style="text-align:center"><code>true</code>， <code>false</code></td>
</tr>
<tr>
<td style="text-align:center"><code>com.fasterxml.jackson.databind.MapperFeature</code></td>
<td style="text-align:center"><code>spring.jackson.mapper.&lt;feature_name&gt;</code></td>
<td style="text-align:center"><code>true</code>， <code>false</code></td>
</tr>
<tr>
<td style="text-align:center"><code>com.fasterxml.jackson.core.JsonParser.Feature</code></td>
<td style="text-align:center"><code>spring.jackson.parser.&lt;feature_name&gt;</code></td>
<td style="text-align:center"><code>true</code>， <code>false</code></td>
</tr>
<tr>
<td style="text-align:center"><code>com.fasterxml.jackson.databind.SerializationFeature</code></td>
<td style="text-align:center"><code>spring.jackson.serialization.&lt;feature_name&gt;</code></td>
<td style="text-align:center"><code>true</code>， <code>false</code></td>
</tr>
<tr>
<td style="text-align:center"><code>com.fasterxml.jackson.annotation.JsonInclude.Include</code></td>
<td style="text-align:center"><code>spring.jackson.default-property-inclusion</code></td>
<td style="text-align:center"><code>always</code>，<code>non_null</code>，<code>non_absent</code>，<code>non_default</code>，<code>non_empty</code></td>
</tr>
</tbody>
</table>
<p>例如，要启用漂亮打印，请设置<code>spring.jackson.serialization.indent_output=true</code>。需要注意的是，由于使用了<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-external-config-relaxed-binding" target="_blank" rel="noopener">松弛绑定</a>，所以<code>indent_output</code>不必匹配相应枚举常量的情况，即<code>INDENT_OUTPUT</code>。</p>
<p>此基于环境的配置应用于自动配置的 <code>Jackson2ObjectMapperBuilder</code>bean，并应用于使用构建器创建的任何映射器，包括自动配置的<code>ObjectMapper</code>bean。</p>
<p>上下文<code>Jackson2ObjectMapperBuilder</code>可以由一个或多个<code>Jackson2ObjectMapperBuilderCustomizer</code>bean 自定义 。可以订购这样的定制器bean（Boot自己的定制器的顺序为0），允许在Boot定制之前和之后应用其他定制。</p>
<p>任何类型的bean都会<code>com.fasterxml.jackson.databind.Module</code>自动注册自动配置<code>Jackson2ObjectMapperBuilder</code>，并应用于<code>ObjectMapper</code> 它创建的任何实例。这为您在应用程序中添加新功能时提供了一种提供自定义模块的全局机制。</p>
<p>如果要<code>ObjectMapper</code>完全替换默认值，请定义<code>@Bean</code>该类型的一个并将其标记为，<code>@Primary</code>或者，如果您更喜欢基于构建器的方法，请定义一个<code>Jackson2ObjectMapperBuilder</code> <code>@Bean</code>。请注意，在任何一种情况下，这样做都会禁用所有的自动配置<code>ObjectMapper</code>。</p>
<p>如果提供任何<code>@Beans</code>类型<code>MappingJackson2HttpMessageConverter</code>，则它们将替换MVC配置中的默认值。此外，<code>HttpMessageConverters</code>还提供了类型的便利bean （如果使用默认的MVC配置，则始终可用）。它有一些有用的方法来访问默认和用户增强的消息转换器。</p>
<p>有关详细信息，请参阅“ <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-customize-the-responsebody-rendering" target="_blank" rel="noopener">第79.4节</a> ” <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-customize-the-responsebody-rendering" target="_blank" rel="noopener">，“自定义@ResponseBody渲染</a> ”部分和 <a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration.java" target="_blank" rel="noopener"><code>WebMvcAutoConfiguration</code></a> 源代码。</p>
<h2 id="自定义-ResponseBody渲染"><a href="#自定义-ResponseBody渲染" class="headerlink" title="自定义@ResponseBody渲染"></a>自定义@ResponseBody渲染</h2><p>Spring用于<code>HttpMessageConverters</code>渲染<code>@ResponseBody</code>（或响应 <code>@RestController</code>）。您可以通过在Spring Boot上下文中添加适当类型的bean来提供其他转换器。如果您添加的bean是默认包含的类型（例如<code>MappingJackson2HttpMessageConverter</code>JSON转换），则它将替换默认值。<code>HttpMessageConverters</code>提供了类型的便利bean， 如果您使用默认的MVC配置，它始终可用。它有一些有用的方法来访问默认和用户增强的消息转换器（例如，如果要手动将它们注入自定义，它可能很有用<code>RestTemplate</code>）。</p>
<p>与正常的MVC使用情况一样，<code>WebMvcConfigurer</code>您提供的任何bean也可以通过覆盖该<code>configureMessageConverters</code>方法来提供转换器。但是，与普通的MVC不同，您只能提供所需的其他转换器（因为Spring Boot使用相同的机制来提供其默认值）。最后，如果您通过提供自己的<code>@EnableWebMvc</code>配置选择退出Spring Boot默认MVC 配置，则可以完全控制并使用<code>getMessageConverters</code>from 手动完成所有操作 <code>WebMvcConfigurationSupport</code>。</p>
<p>有关<a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration.java" target="_blank" rel="noopener"><code>WebMvcAutoConfiguration</code></a> 更多详细信息，请参阅 源代码。</p>
<h2 id="处理多部分文件上传"><a href="#处理多部分文件上传" class="headerlink" title="处理多部分文件上传"></a>处理多部分文件上传</h2><p>Spring Boot包含Servlet 3 <code>javax.servlet.http.Part</code>API以支持上传文件。默认情况下，Spring Boot配置Spring MVC，每个文件的最大大小为1MB，单个请求中的文件数据最大为10MB。您可以覆盖这些值，中间数据的存储位置（例如，到<code>/tmp</code> 目录），以及使用<code>MultipartProperties</code>类中公开的属性将数据刷新到磁盘的阈值。例如，如果要指定文件不受限制，请将<code>spring.servlet.multipart.max-file-size</code>属性设置为<code>-1</code>。</p>
<p>当您希望在Spring MVC控制器处理程序方法中接收多部分编码文件数据作为<code>@RequestParam</code>类型的注释参数时，多部分支持很有用<code>MultipartFile</code>。</p>
<p>有关<a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/servlet/MultipartAutoConfiguration.java" target="_blank" rel="noopener"><code>MultipartAutoConfiguration</code></a> 详细信息，请参阅 源代码。</p>
<blockquote>
<p>建议使用容器的内置支持进行分段上传，而不是引入其他依赖项，例如Apache Commons File Upload。</p>
</blockquote>
<h2 id="关闭Spring-MVC-DispatcherServlet"><a href="#关闭Spring-MVC-DispatcherServlet" class="headerlink" title="关闭Spring MVC DispatcherServlet"></a>关闭Spring MVC DispatcherServlet</h2><p>默认情况下，所有内容都是从应用程序的根目录（<code>/</code>）提供的。如果您希望映射到其他路径，可以按如下方式配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.mvc.servlet.path=/acme</span><br></pre></td></tr></table></figure>
<p>如果你有额外的servlet，你可以声明一个<code>@Bean</code>类型<code>Servlet</code>或 <code>ServletRegistrationBean</code>每个servlet ，Spring Boot会将它们透明地注册到容器中。因为servlet是以这种方式注册的，所以可以将它们映射到<code>DispatcherServlet</code>不调用它的子上下文。</p>
<p>配置<code>DispatcherServlet</code>你自己是不寻常的，但如果你真的需要这样做，还必须提供一种 <code>@Bean</code>类型<code>DispatcherServletPath</code>来提供自定义的路径<code>DispatcherServlet</code>。</p>
<h2 id="关闭默认MVC配置"><a href="#关闭默认MVC配置" class="headerlink" title="关闭默认MVC配置"></a>关闭默认MVC配置</h2><p>完全控制MVC配置的最简单方法是为您自己 <code>@Configuration</code>提供<code>@EnableWebMvc</code>注释。这样做会将所有MVC配置留在您的手中。</p>
<h2 id="自定义ViewResolvers"><a href="#自定义ViewResolvers" class="headerlink" title="自定义ViewResolvers"></a>自定义ViewResolvers</h2><p>A<code>ViewResolver</code>是Spring MVC的一个核心组件，将视图名称转换 <code>@Controller</code>为实际<code>View</code>实现。请注意，<code>ViewResolvers</code>主要用于UI应用程序，而不是REST样式的服务（<code>View</code>不用于呈现 <code>@ResponseBody</code>）。有许多实现<code>ViewResolver</code>可供选择，而Spring本身并不反对你应该使用哪些实现。另一方面，Spring Boot会为您安装一个或两个，具体取决于它在类路径和应用程序上下文中找到的内容。它<code>DispatcherServlet</code>使用它在应用程序上下文中找到的所有解析器，依次尝试每个解析器直到获得结果，因此，如果添加自己的解析器，则必须知道顺序以及添加解析器的位置。</p>
<p><code>WebMvcAutoConfiguration</code>在<code>ViewResolvers</code>您的上下文中添加以下内容：</p>
<ul>
<li>一个<code>InternalResourceViewResolver</code>名为’defaultViewResolver’。这个可以通过使用<code>DefaultServlet</code>（包括静态资源和JSP页面，如果您使用它们）来查找可以呈现的物理资源。它将前缀和后缀应用于视图名称，然后在servlet上下文中查找具有该路径的物理资源（默认值为空，但可通过<code>spring.mvc.view.prefix</code>和访问外部配置 <code>spring.mvc.view.suffix</code>）。您可以通过提供相同类型的bean来覆盖它。</li>
<li>一个<code>BeanNameViewResolver</code>名为’beanNameViewResolver’。这是视图解析器链的一个有用成员，并获取与<code>View</code>正在解析的名称相同的任何bean 。没有必要覆盖或替换它。</li>
<li>一个<code>ContentNegotiatingViewResolver</code>名为“ViewResolver的”只如果有添加<strong>的</strong> 实际类型的豆类<code>View</code>存在。这是一个“主”解析器，委托给所有其他人，并尝试找到客户端发送的“Accept”HTTP标头的匹配项。有一个有用的 <a href="https://spring.io/blog/2013/06/03/content-negotiation-using-views" target="_blank" rel="noopener">博客 <code>ContentNegotiatingViewResolver</code></a>，您可能想要学习以了解更多信息，您也可以查看源代码以获取详细信息。您可以<code>ContentNegotiatingViewResolver</code>通过定义名为“viewResolver”的bean 来关闭自动配置 。</li>
<li>如果你使用Thymeleaf，你也有一个<code>ThymeleafViewResolver</code>名为’thymeleafViewResolver’。它通过使用前缀和后缀包围视图名称来查找资源。前缀是<code>spring.thymeleaf.prefix</code>，后缀是 <code>spring.thymeleaf.suffix</code>。前缀和后缀的值分别默认为“classpath：/ templates /”和“.html”。您可以<code>ThymeleafViewResolver</code>通过提供相同名称的bean 来覆盖 。</li>
<li>如果您使用FreeMarker，您还有一个<code>FreeMarkerViewResolver</code>名为’freeMarkerViewResolver’。它<code>spring.freemarker.templateLoaderPath</code>通过用前缀和后缀包围视图名称来查找加载器路径中的资源（外部化并具有默认值’classpath：/ templates /‘）。前缀外部<code>spring.freemarker.prefix</code>化为，后缀外部化为 <code>spring.freemarker.suffix</code>。前缀和后缀的默认值分别为空和“.ftl”。您可以<code>FreeMarkerViewResolver</code>通过提供相同名称的bean 来覆盖。<ul>
<li>如果您使用Groovy模板（实际上，如果<code>groovy-templates</code>在您的类路径中），您还有一个<code>GroovyMarkupViewResolver</code>名为<code>groovyMarkupViewResolver</code>。它通过用前缀和后缀（外部化为<code>spring.groovy.template.prefix</code>和<code>spring.groovy.template.suffix</code>）包围视图名称来查找加载器路径中的资源。前缀和后缀分别具有“classpath：/ templates /”和“.tpl”的默认值。您可以<code>GroovyMarkupViewResolver</code>通过提供相同名称的bean 来覆盖。</li>
</ul>
</li>
</ul>
<p>有关更多详细信息，请参阅以下部分：</p>
<ul>
<li><a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration.java" target="_blank" rel="noopener"><code>WebMvcAutoConfiguration</code></a></li>
<li><a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/thymeleaf/ThymeleafAutoConfiguration.java" target="_blank" rel="noopener"><code>ThymeleafAutoConfiguration</code></a></li>
<li><a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/freemarker/FreeMarkerAutoConfiguration.java" target="_blank" rel="noopener"><code>FreeMarkerAutoConfiguration</code></a></li>
<li><a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/groovy/template/GroovyTemplateAutoConfiguration.java" target="_blank" rel="noopener"><code>GroovyTemplateAutoConfiguration</code></a></li>
</ul>
</div></div><a class="button-hover more" href="/2019/03/21/使用SpringBoot-SpringMVC/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/21/使用SpringBoot-嵌入式Web服务器/">使用SpringBoot-嵌入式Web服务器</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-21</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/http/">http</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/http2/">http2</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/web/">web</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/compression/">compression</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/ssl/">ssl</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/servlet/">servlet</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/filter/">filter</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/listener/">listener</a></div></div><div class="post-content"><div class="main-content content"><h1 id="嵌入式Web服务器"><a href="#嵌入式Web服务器" class="headerlink" title="嵌入式Web服务器"></a>嵌入式Web服务器</h1><p>每个Spring Boot Web应用程序都包含一个嵌入式Web服务器。此功能会导致许多操作方法问题，包括如何更改嵌入式服务器以及如何配置嵌入式服务器。本节回答了这些问题。</p>
<h2 id="使用其他Web服务器"><a href="#使用其他Web服务器" class="headerlink" title="使用其他Web服务器"></a>使用其他Web服务器</h2><p>许多Spring Boot启动器都包含默认的嵌入式容器。</p>
<ul>
<li>对于servlet堆栈应用程序，<code>spring-boot-starter-web</code>包括Tomcat <code>spring-boot-starter-tomcat</code>，但您可以使用<code>spring-boot-starter-jetty</code>或<code>spring-boot-starter-undertow</code>替代。</li>
<li>对于反应栈的应用，<code>spring-boot-starter-webflux</code>包括反应堆的Netty通过包括<code>spring-boot-starter-reactor-netty</code>，但你可以使用<code>spring-boot-starter-tomcat</code>， <code>spring-boot-starter-jetty</code>或<code>spring-boot-starter-undertow</code>代替。</li>
</ul>
<p>切换到其他HTTP服务器时，除了包含所需的依赖项外，还需要排除默认依赖项。Spring Boot为HTTP服务器提供单独的启动程序，以帮助使此过程尽可能简单。</p>
<p>以下Maven示例显示如何排除Tomcat并为Spring MVC包含Jetty：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-api.version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">servlet-api.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 排除Tomcat依赖项 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使用Jetty --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Servlet API的版本已被覆盖，因为与Tomcat 9和Undertow 2.0不同，Jetty 9.4不支持Servlet 4.0。</p>
</blockquote>
<p>以下Gradle示例显示如何排除Netty并包含Spring WebFlux的Undertow：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">configurations</span> &#123;</span><br><span class="line">	<span class="comment">//排除Reactor Netty</span></span><br><span class="line">	<span class="keyword">compile</span>.<span class="keyword">exclude</span> module: <span class="string">'spring-boot-starter-reactor-netty'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">	<span class="keyword">compile</span> <span class="string">'org.springframework.boot:spring-boot-starter-webflux'</span></span><br><span class="line">	<span class="comment">//使用Undertow</span></span><br><span class="line">	<span class="keyword">compile</span> <span class="string">'org.springframework.boot:spring-boot-starter-undertow'</span></span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>spring-boot-starter-reactor-netty</code>需要使用<code>WebClient</code>该类，因此即使您需要包含不同的HTTP服务器，也可能需要依赖Netty。</p>
</blockquote>
<h2 id="禁用Web服务器"><a href="#禁用Web服务器" class="headerlink" title="禁用Web服务器"></a>禁用Web服务器</h2><p>如果您的类路径包含启动Web服务器所需的位，Spring Boot将自动启动它。要禁用此行为，请<code>WebApplicationType</code>在您的配置中进行配置<code>application.properties</code>，如以下示例所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.main.web-application-type=none</span><br></pre></td></tr></table></figure>
<h2 id="更改HTTP端口"><a href="#更改HTTP端口" class="headerlink" title="更改HTTP端口"></a>更改HTTP端口</h2><p>在独立应用程序中，主HTTP端口默认为<code>8080</code>但可以设置 <code>server.port</code>（例如，<code>application.properties</code>作为System属性或作为System属性）。由于轻松绑定<code>Environment</code>值，您还可以使用<code>SERVER_PORT</code>（例如，作为OS环境变量）。</p>
<p>要完全关闭HTTP端点但仍然创建一个<code>WebApplicationContext</code>，请使用<code>server.port=-1</code>。（这样做有时对测试很有用。）</p>
<p>有关更多详细信息，请参阅“ Spring Boot功能”部分中的“ <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-customizing-embedded-containers" target="_blank" rel="noopener">第29.4.4节”“自定义嵌入式Servlet容器”</a>或 <a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/ServerProperties.java" target="_blank" rel="noopener"><code>ServerProperties</code></a>源代码。</p>
<h2 id="使用随机未分配的HTTP端口"><a href="#使用随机未分配的HTTP端口" class="headerlink" title="使用随机未分配的HTTP端口"></a>使用随机未分配的HTTP端口</h2><p>要扫描一个空闲端口（使用OS本机来防止冲突），请使用<code>server.port=0</code>。</p>
<h2 id="在运行时发现HTTP端口"><a href="#在运行时发现HTTP端口" class="headerlink" title="在运行时发现HTTP端口"></a>在运行时发现HTTP端口</h2><p>您可以从日志输出或<code>ServletWebServerApplicationContext</code>通过其输出访问服务器正在运行的端口 <code>WebServer</code>。获得它并确保它已被初始化的最佳方法是添加一个<code>@Bean</code>类型， <code>ApplicationListener&lt;ServletWebServerInitializedEvent&gt;</code>并在发布时将容器拉出事件。</p>
<p>使用的测试<code>@SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT)</code>还可以使用<code>@LocalServerPort</code>注释将实际端口注入字段，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span>(webEnvironment=WebEnvironment.RANDOM_PORT)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyWebIntegrationTests</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	ServletWebServerApplicationContext server;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@LocalServerPort</span></span><br><span class="line">	<span class="keyword">int</span> port;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>@LocalServerPort</code>是一个元注释<code>@Value(&quot;${local.server.port}&quot;)</code>。不要尝试在常规应用程序中注入端口。正如我们刚刚看到的那样，只有在容器初始化之后才设置该值。与测试相反，应用程序代码回调会尽早处理（在值实际可用之前）。</p>
</blockquote>
<h2 id="启用HTTP响应压缩"><a href="#启用HTTP响应压缩" class="headerlink" title="启用HTTP响应压缩"></a>启用HTTP响应压缩</h2><p>Jetty，Tomcat和Undertow支持HTTP响应压缩。它可以启用<code>application.properties</code>，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.compression.enabled=true</span><br></pre></td></tr></table></figure>
<p>默认情况下，响应必须至少为2048字节，才能执行压缩。您可以通过设置<code>server.compression.min-response-size</code>属性来配置此行为 。</p>
<p>默认情况下，只有在内容类型为以下内容之一时才会压缩响应：</p>
<ul>
<li><code>text/html</code></li>
<li><code>text/xml</code></li>
<li><code>text/plain</code></li>
<li><code>text/css</code></li>
<li><code>text/javascript</code></li>
<li><code>application/javascript</code></li>
<li><code>application/json</code></li>
<li><code>application/xml</code></li>
</ul>
<p>您可以通过设置<code>server.compression.mime-types</code>属性来配置此行为。</p>
<h2 id="配置SSL"><a href="#配置SSL" class="headerlink" title="配置SSL"></a>配置SSL</h2><p>可以通过设置各种<code>server.ssl.*</code>属性以声明方式配置SSL ，通常在<code>application.properties</code>或中<code>application.yml</code>。以下示例显示了在以下位置设置SSL属性<code>application.properties</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">server.port=8443</span><br><span class="line">server.ssl.key-store=classpath:keystore.jks</span><br><span class="line">server.ssl.key-store-password=secret</span><br><span class="line">server.ssl.key-password=another-secret</span><br></pre></td></tr></table></figure>
<p>有关<a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/web/server/Ssl.java" target="_blank" rel="noopener"><code>Ssl</code></a>所有支持的属性的详细信息，请参阅。</p>
<p>使用上述示例之类的配置意味着应用程序不再支持端口8080上的普通HTTP连接器.Spring Boot不支持HTTP连接器和HTTPS连接器的配置<code>application.properties</code>。如果要同时使用两者，则需要以编程方式配置其中一个。我们建议使用 <code>application.properties</code>配置HTTPS，因为HTTP连接器更容易以编程方式配置。有关<a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-samples/spring-boot-sample-tomcat-multi-connectors" target="_blank" rel="noopener"><code>spring-boot-sample-tomcat-multi-connectors</code></a> 示例，请参阅 示例项目。</p>
<h2 id="配置HTTP-2"><a href="#配置HTTP-2" class="headerlink" title="配置HTTP / 2"></a>配置HTTP / 2</h2><p>您可以使用<code>server.http2.enabled</code>配置属性在Spring Boot应用程序中启用HTTP / 2支持 。此支持取决于所选的Web服务器和应用程序环境，因为JDK8不支持该协议。</p>
<blockquote>
<p>Spring Boot不支持<code>h2c</code>HTTP / 2协议的明文版本。因此，您必须先<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-configure-ssl" target="_blank" rel="noopener">配置SSL</a>。</p>
</blockquote>
<h3 id="Undertow的HTTP-2"><a href="#Undertow的HTTP-2" class="headerlink" title="Undertow的HTTP / 2"></a>Undertow的HTTP / 2</h3><p>从Undertow 1.4.0+开始，支持HTTP / 2，对JDK8没有任何额外要求。</p>
<h3 id="Jetty的HTTP-2"><a href="#Jetty的HTTP-2" class="headerlink" title="Jetty的HTTP / 2"></a>Jetty的HTTP / 2</h3><p>从Jetty 9.4.8开始，<a href="https://www.conscrypt.org/" target="_blank" rel="noopener">Conscrypt库</a>也支持HTTP / 2 。要启用该支持，您的应用程序需要有两个额外的依赖项：<code>org.eclipse.jetty:jetty-alpn-conscrypt-server</code>和<code>org.eclipse.jetty.http2:http2-server</code>。</p>
<h3 id="Tomcat的HTTP-2"><a href="#Tomcat的HTTP-2" class="headerlink" title="Tomcat的HTTP / 2"></a>Tomcat的HTTP / 2</h3><p>Spring Boot默认使用Tomcat 9.0.x，它在使用JDK 9或更高版本时支持HTTP / 2开箱即用。或者，如果<code>libtcnative</code> 库及其依赖项安装在主机操作系统上，则可以在JDK 8上使用HTTP / 2 。</p>
<p>必须使库文件夹（如果尚未可用）到JVM库路径。您可以使用JVM参数来完成此操作 <code>-Djava.library.path=/usr/local/opt/tomcat-native/lib</code>。有关<a href="https://tomcat.apache.org/tomcat-9.0-doc/apr.html" target="_blank" rel="noopener">Tomcat官方文档的</a>更多 <a href="https://tomcat.apache.org/tomcat-9.0-doc/apr.html" target="_blank" rel="noopener">信息</a>。</p>
<p>在没有该本机支持的情况下在JDK 8上启动Tomcat 9.0.x会记录以下错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 8787 --- [           main] o.a.coyote.http11.Http11NioProtocol      : The upgrade handler [org.apache.coyote.http2.Http2Protocol] for [h2] only supports upgrade via ALPN but has beenconfigured for the ["https-jsse-nio-8443"] connector that does not support ALPN.</span><br></pre></td></tr></table></figure>
<p>此错误不是致命错误，应用程序仍以HTTP / 1.1 SSL支持启动。</p>
<h3 id="Reactor-Netty的HTTP-2"><a href="#Reactor-Netty的HTTP-2" class="headerlink" title="Reactor Netty的HTTP / 2"></a>Reactor Netty的HTTP / 2</h3><p>在<code>spring-boot-webflux-starter</code>默认情况下，反应堆的Netty作为服务器使用。可以使用JDK 9或更高版本的JDK支持为Reactor Netty配置HTTP / 2。对于JDK 8环境或最佳运行时性能，此服务器还支持具有本机库的HTTP / 2。要启用它，您的应用程序需要具有其他依赖项。</p>
<p>Spring Boot管理<code>io.netty:netty-tcnative-boringssl-static</code>“超级jar” 的版本 ，包含所有平台的本机库。开发人员可以选择使用分类器仅导入所需的依赖项（请参阅<a href="http://netty.io/wiki/forked-tomcat-native.html" target="_blank" rel="noopener">Netty官方文档</a>）。</p>
<h2 id="配置Web服务器"><a href="#配置Web服务器" class="headerlink" title="配置Web服务器"></a>配置Web服务器</h2><p>通常，您应首先考虑使用众多可用配置键中的一个，并通过在您的<code>application.properties</code>（ <code>application.yml</code>或环境等）中添加新条目来自定义您的Web服务器，请参阅“ <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-discover-build-in-options-for-external-properties" target="_blank" rel="noopener">第77.8节”，“发现外部属性的内置选项”</a> “） 。该<code>server.*</code> 命名空间是非常有用的在这里，它包括命名空间一样<code>server.tomcat.*</code>，<code>server.jetty.*</code>和其他人，了解特定服务器的功能。请参阅<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#common-application-properties" target="_blank" rel="noopener">附录A，<em>常见应用程序属性</em></a>列表。</p>
<p>前面的部分介绍了许多常见用例，例如压缩，SSL或HTTP / 2。但是，如果您的用例不存在配置密钥，则应该查看 <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/api/org/springframework/boot/web/server/WebServerFactoryCustomizer.html" target="_blank" rel="noopener"><code>WebServerFactoryCustomizer</code></a>。您可以声明这样的组件并获得与您选择的服务器工厂相关的访问权限：您应该为所选服务器（Tomcat，Jetty，Reactor Netty，Undertow）和所选Web堆栈（Servlet或Reactive）选择变体。</p>
<p>以下示例适用于具有<code>spring-boot-starter-web</code>（Servlet堆栈）的Tomcat ：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTomcatWebServerCustomizer</span></span></span><br><span class="line"><span class="class">		<span class="keyword">implements</span> <span class="title">WebServerFactoryCustomizer</span>&lt;<span class="title">TomcatServletWebServerFactory</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(TomcatServletWebServerFactory factory)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// customize the factory here</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>另外Spring Boot提供：</p>
<table>
<thead>
<tr>
<th style="text-align:center">服务器</th>
<th style="text-align:center">Servlet Stack</th>
<th style="text-align:center">Reactive Stack</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Tomcat的</td>
<td style="text-align:center"><code>TomcatServletWebServerFactory</code></td>
<td style="text-align:center"><code>TomcatReactiveWebServerFactory</code></td>
</tr>
<tr>
<td style="text-align:center">码头</td>
<td style="text-align:center"><code>JettyServletWebServerFactory</code></td>
<td style="text-align:center"><code>JettyReactiveWebServerFactory</code></td>
</tr>
<tr>
<td style="text-align:center">暗潮</td>
<td style="text-align:center"><code>UndertowServletWebServerFactory</code></td>
<td style="text-align:center"><code>UndertowReactiveWebServerFactory</code></td>
</tr>
<tr>
<td style="text-align:center">反应堆</td>
<td style="text-align:center">N / A</td>
<td style="text-align:center"><code>NettyReactiveWebServerFactory</code></td>
</tr>
</tbody>
</table>
<p>一旦您有权访问a <code>WebServerFactory</code>，您通常可以向其添加定制器以配置特定部件，例如连接器，服务器资源或服务器本身 - 所有这些都使用特定于服务器的API。</p>
<p>作为最后的手段，您还可以声明自己的<code>WebServerFactory</code>组件，它将覆盖Spring Boot提供的组件。在这种情况下，您不能再依赖<code>server</code>命名空间中的配置属性。</p>
<h2 id="向应用程序添加Servlet，Filter或Listener"><a href="#向应用程序添加Servlet，Filter或Listener" class="headerlink" title="向应用程序添加Servlet，Filter或Listener"></a>向应用程序添加Servlet，Filter或Listener</h2><p>在servlet堆栈应用程序中，即使用<code>spring-boot-starter-web</code>，有两种方法可以向应用程序添加<code>Servlet</code>，<code>Filter</code>和<code>ServletContextListener</code>，以及Servlet API支持的其他侦听器：</p>
<ul>
<li><a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-add-a-servlet-filter-or-listener-as-spring-bean" target="_blank" rel="noopener">部分78.10.1，“使用Spring Bean添加Servlet，过滤器或监听器”</a></li>
<li><a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-add-a-servlet-filter-or-listener-using-scanning" target="_blank" rel="noopener">部分78.10.2，“使用类路径扫描添加Servlet，过滤器和监听器”</a></li>
</ul>
<h3 id="使用Spring-Bean添加"><a href="#使用Spring-Bean添加" class="headerlink" title="使用Spring Bean添加"></a>使用Spring Bean添加</h3><p>要添加<code>Servlet</code>，<code>Filter</code>或servlet <code>*Listener</code>使用的Spring bean，你必须提供一个<code>@Bean</code>它的定义。当您想要注入配置或依赖项时，这样做非常有用。但是，您必须非常小心，它们不会导致太多其他bean的初始化，因为它们必须在应用程序生命周期的早期安装在容器中。（例如，让它们依赖于您的<code>DataSource</code>或JPA配置并不是一个好主意。）您可以通过在首次使用而不是初始化时懒惰地初始化bean来解决此类限制。</p>
<p>在的情况下<code>Filters</code>和<code>Servlets</code>，还可以通过添加添加映射和初始化参数<code>FilterRegistrationBean</code>或<code>ServletRegistrationBean</code>代替或除了下面的部件。</p>
<blockquote>
<p>如果<code>dispatcherType</code>在过滤器注册中指定了no ，<code>REQUEST</code>则使用。这与Servlet规范的默认调度程序类型一致。</p>
</blockquote>
<p>像任何其他Spring bean一样，您可以定义Servlet过滤器bean的顺序; 请务必检查“ <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-embedded-container-servlets-filters-listeners-beans" target="_blank" rel="noopener">名为”将Servlet，过滤器和监听器注册为Spring Beans</a> “部分。</p>
<h4 id="禁用Servlet或过滤器的注册"><a href="#禁用Servlet或过滤器的注册" class="headerlink" title="禁用Servlet或过滤器的注册"></a>禁用Servlet或过滤器的注册</h4><p>正如<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-add-a-servlet-filter-or-listener-as-spring-bean" target="_blank" rel="noopener">前面所述</a>，任何 <code>Servlet</code>或<code>Filter</code>豆与servlet容器自动注册。要禁用特定<code>Filter</code>或<code>Servlet</code>bean的注册，请为其创建注册Bean并将其标记为已禁用，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">registration</span><span class="params">(MyFilter filter)</span> </span>&#123;</span><br><span class="line">	FilterRegistrationBean registration = <span class="keyword">new</span> FilterRegistrationBean(filter);</span><br><span class="line">	registration.setEnabled(<span class="keyword">false</span>);</span><br><span class="line">	<span class="keyword">return</span> registration;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用类路径扫描添加"><a href="#使用类路径扫描添加" class="headerlink" title="使用类路径扫描添加"></a>使用类路径扫描添加</h3><p><code>@WebServlet</code>，<code>@WebFilter</code>和带<code>@WebListener</code>注释的类可以通过使用一个<code>@Configuration</code>类注释<code>@ServletComponentScan</code>并指定包含要注册的组件的包来自动注册嵌入式servlet容器。默认情况下，<code>@ServletComponentScan</code>从带注释的类的包中进行扫描。</p>
<h2 id="配置访问日志记录"><a href="#配置访问日志记录" class="headerlink" title="配置访问日志记录"></a>配置访问日志记录</h2><p>以通过各自的命名空间为Tomcat，Undertow和Jetty配置访问日志。</p>
<p>例如，以下设置使用<a href="https://tomcat.apache.org/tomcat-8.5-doc/config/valve.html#Access_Logging" target="_blank" rel="noopener">自定义模式</a>在Tomcat上记录访问权限 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.tomcat.basedir=my-tomcat</span><br><span class="line">server.tomcat.accesslog.enabled=true</span><br><span class="line">server.tomcat.accesslog.pattern=%t %a &quot;%r&quot; %s (%D ms)</span><br></pre></td></tr></table></figure>
<p>日志存储在<code>logs</code>相对于应用程序工作目录的目录中。您可以通过设置<code>server.undertow.accesslog.directory</code>属性来自定义此位置 。</p>
<p>最后，Jetty的访问日志记录也可以配置如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server.jetty.accesslog.enabled=true</span><br><span class="line">server.jetty.accesslog.filename=/var/log/jetty-access.log</span><br></pre></td></tr></table></figure>
<p>默认情况下，日志会重定向到<code>System.err</code>。有关更多详细信息，请参阅 <a href="https://www.eclipse.org/jetty/documentation/9.4.x/configuring-jetty-request-logs.html" target="_blank" rel="noopener">Jetty文档</a>。</p>
<h2 id="在前端代理服务器后面运行"><a href="#在前端代理服务器后面运行" class="headerlink" title="在前端代理服务器后面运行"></a>在前端代理服务器后面运行</h2><p>您的应用程序可能需要发送<code>302</code>重定向或使用绝对链接呈现内容。在代理后面运行时，调用者需要指向代理的链接，而不是托管应用程序的计算机的物理地址。通常，这种情况是通过与代理的合同来处理的，代理会添加标题以告诉后端如何构建自己的链接。</p>
<p>如果代理添加了常规<code>X-Forwarded-For</code>和<code>X-Forwarded-Proto</code>头文件（大多数代理服务器都这样做），则应该正确呈现绝对链接，前提<code>server.use-forward-headers</code>是<code>true</code>在您的中设置<code>application.properties</code>。</p>
<blockquote>
<p>如果您的应用程序在Cloud Foundry或Heroku中运行，则该 <code>server.use-forward-headers</code>属性默认为<code>true</code>。在所有其他情况下，默认为<code>false</code>。</p>
</blockquote>
<h3 id="自定义Tomcat的代理配置"><a href="#自定义Tomcat的代理配置" class="headerlink" title="自定义Tomcat的代理配置"></a>自定义Tomcat的代理配置</h3><p>如果使用Tomcat，还可以配置用于携带“转发”信息的标头名称，如以下示例所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server.tomcat.remote-ip-header=x-your-remote-ip-header</span><br><span class="line">server.tomcat.protocol-header=x-your-protocol-header</span><br></pre></td></tr></table></figure>
<p>Tomcat还配置了一个默认的正则表达式，该表达式匹配要信任的内部代理。默认情况下，IP地址中<code>10/8</code>，<code>192.168/16</code>， <code>169.254/16</code>和<code>127/8</code>是值得信赖的。您可以通过添加条目来自定义阀门的配置<code>application.properties</code>，如以下示例所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.tomcat.internal-proxies=192\\.168\\.\\d&#123;1,3&#125;\\.\\d&#123;1,3&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>仅当使用属性文件进行配置时，才需要双反斜杠。如果使用YAML，则单个反斜杠就足够了，并且值等于前面示例中显示的值<code>192\.168\.\d{1,3}\.\d{1,3}</code>。</p>
</blockquote>
<blockquote>
<p>您可以通过将其设置<code>internal-proxies</code>为空来信任所有代理（但在生产中不这样做）。</p>
</blockquote>
<p>您可以<code>RemoteIpValve</code>通过关闭自动关闭（为此，设置<code>server.use-forward-headers=false</code>）并在<code>TomcatServletWebServerFactory</code>bean中添加新的阀门实例来完全控制Tomcat的配置。</p>
<h2 id="使用Tomcat启用多个连接器"><a href="#使用Tomcat启用多个连接器" class="headerlink" title="使用Tomcat启用多个连接器"></a>使用Tomcat启用多个连接器</h2><p>可以添加<code>org.apache.catalina.connector.Connector</code>到 <code>TomcatServletWebServerFactory</code>，这可以允许多个连接器，包括HTTP和HTTPS连接器，显示在下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServletWebServerFactory <span class="title">servletContainer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	TomcatServletWebServerFactory tomcat = <span class="keyword">new</span> TomcatServletWebServerFactory();</span><br><span class="line">	tomcat.addAdditionalTomcatConnectors(createSslConnector());</span><br><span class="line">	<span class="keyword">return</span> tomcat;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> Connector <span class="title">createSslConnector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Connector connector = <span class="keyword">new</span> Connector(<span class="string">"org.apache.coyote.http11.Http11NioProtocol"</span>);</span><br><span class="line">	Http11NioProtocol protocol = (Http11NioProtocol) connector.getProtocolHandler();</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		File keystore = <span class="keyword">new</span> ClassPathResource(<span class="string">"keystore"</span>).getFile();</span><br><span class="line">		File truststore = <span class="keyword">new</span> ClassPathResource(<span class="string">"keystore"</span>).getFile();</span><br><span class="line">		connector.setScheme(<span class="string">"https"</span>);</span><br><span class="line">		connector.setSecure(<span class="keyword">true</span>);</span><br><span class="line">		connector.setPort(<span class="number">8443</span>);</span><br><span class="line">		protocol.setSSLEnabled(<span class="keyword">true</span>);</span><br><span class="line">		protocol.setKeystoreFile(keystore.getAbsolutePath());</span><br><span class="line">		protocol.setKeystorePass(<span class="string">"changeit"</span>);</span><br><span class="line">		protocol.setTruststoreFile(truststore.getAbsolutePath());</span><br><span class="line">		protocol.setTruststorePass(<span class="string">"changeit"</span>);</span><br><span class="line">		protocol.setKeyAlias(<span class="string">"apitester"</span>);</span><br><span class="line">		<span class="keyword">return</span> connector;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"can't access keystore: ["</span> + <span class="string">"keystore"</span></span><br><span class="line">				+ <span class="string">"] or truststore: ["</span> + <span class="string">"keystore"</span> + <span class="string">"]"</span>, ex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用Tomcat的LegacyCookieProcessor"><a href="#使用Tomcat的LegacyCookieProcessor" class="headerlink" title="使用Tomcat的LegacyCookieProcessor"></a>使用Tomcat的LegacyCookieProcessor</h2><p>默认情况下，Spring Boot使用的嵌入式Tomcat不支持Cookie格式的“Version 0”，因此您可能会看到以下错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.IllegalArgumentException: An invalid character [32] was present in the Cookie value</span><br></pre></td></tr></table></figure>
<p>如果可能的话，您应该考虑将代码更新为仅存储符合以后Cookie规范的值。但是，如果您无法更改cookie的写入方式，则可以将Tomcat配置为使用<code>LegacyCookieProcessor</code>。要切换到<code>LegacyCookieProcessor</code>，请使用<code>WebServerFactoryCustomizer</code>添加a 的 bean <code>TomcatContextCustomizer</code>，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt;cookieProcessorCustomizer() &#123;</span><br><span class="line">	<span class="keyword">return</span> (factory) -&gt; factory.addContextCustomizers(</span><br><span class="line">			(context) -&gt; context.setCookieProcessor(<span class="keyword">new</span> LegacyCookieProcessor()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用Undertow启用多个侦听器"><a href="#使用Undertow启用多个侦听器" class="headerlink" title="使用Undertow启用多个侦听器"></a>使用Undertow启用多个侦听器</h2><p>一个添加<code>UndertowBuilderCustomizer</code>到<code>UndertowServletWebServerFactory</code>与收听添加到<code>Builder</code>，如图所示在下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> UndertowServletWebServerFactory <span class="title">servletWebServerFactory</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	UndertowServletWebServerFactory factory = <span class="keyword">new</span> UndertowServletWebServerFactory();</span><br><span class="line">	factory.addBuilderCustomizers(<span class="keyword">new</span> UndertowBuilderCustomizer() &#123;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customize</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">			builder.addHttpListener(<span class="number">8080</span>, <span class="string">"0.0.0.0"</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;);</span><br><span class="line">	<span class="keyword">return</span> factory;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用-ServerEndpoint创建WebSocket端点"><a href="#使用-ServerEndpoint创建WebSocket端点" class="headerlink" title="使用@ServerEndpoint创建WebSocket端点"></a>使用@ServerEndpoint创建WebSocket端点</h2><p>如果要在使用<code>@ServerEndpoint</code>嵌入式容器的Spring Boot应用程序中使用，则必须声明一个<code>ServerEndpointExporter</code> <code>@Bean</code>，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ServerEndpointExporter <span class="title">serverEndpointExporter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> ServerEndpointExporter();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>前面示例中显示的<code>@ServerEndpoint</code>bean使用基础WebSocket容器注册任何带注释的bean。当部署到独立的servlet容器时，此角色由servlet容器初始化程序执行，并且<code>ServerEndpointExporter</code>不需要该 bean。</p>
</div></div><a class="button-hover more" href="/2019/03/21/使用SpringBoot-嵌入式Web服务器/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/21/使用SpringBoot-属性和配置/">使用SpringBoot-属性和配置</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-21</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/properties/">properties</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/configuration/">configuration</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/maven/">maven</a></div></div><div class="post-content"><div class="main-content content"><h1 id="属性和配置-部分"><a href="#属性和配置-部分" class="headerlink" title="属性和配置(部分)"></a>属性和配置(部分)</h1><p>本节包括有关设置和读取属性和配置设置及其与Spring Boot应用程序交互的主题。</p>
<h2 id="在构建时自动展开属性"><a href="#在构建时自动展开属性" class="headerlink" title="在构建时自动展开属性"></a>在构建时自动展开属性</h2><p>您可以使用现有的构建配置自动扩展它们，而不是硬编码在项目的构建配置中也指定的某些属性。这在Maven和Gradle都是可行的。</p>
<h3 id="使用Maven自动扩展属性"><a href="#使用Maven自动扩展属性" class="headerlink" title="使用Maven自动扩展属性"></a>使用Maven自动扩展属性</h3><p>您可以使用资源过滤从Maven项目自动扩展属性。如果您使用<code>spring-boot-starter-parent</code>，则可以使用<code>@..@</code>占位符引用Maven“项目属性” ，如以下示例所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.encoding=@project.build.sourceEncoding@</span><br><span class="line">app.java.version=@java.version@</span><br></pre></td></tr></table></figure>
<blockquote>
<p>只有生产配置以这种方式过滤（换句话说，不应用过滤<code>src/test/resources</code>）。</p>
</blockquote>
<blockquote>
<p>如果启用该<code>addResources</code>标志，则<code>spring-boot:run</code>目标可以<code>src/main/resources</code>直接添加 到类路径（用于热重新加载）。这样做可以绕过资源过滤和此功能。相反，您可以使用<code>exec:java</code> 目标或自定义插件的配置。有关详细信息，请参阅 <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/maven-plugin/usage.html" target="_blank" rel="noopener">插件使用情况页面</a>。</p>
</blockquote>
<p>如果不使用起动机家长，你需要包括中引入下列元素<code>&lt;build/&gt;</code>的元素<code>pom.xml</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>您还需要在内部包含以下元素<code>&lt;plugins/&gt;</code>：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">delimiters</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">delimiter</span>&gt;</span>@<span class="tag">&lt;/<span class="name">delimiter</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">delimiters</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">useDefaultDelimiters</span>&gt;</span>false<span class="tag">&lt;/<span class="name">useDefaultDelimiters</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>useDefaultDelimiters</code>如果<code>${placeholder}</code>在配置中使用标准的Spring占位符（例如），则该属性很重要。如果该属性未设置为<code>false</code>，则可以通过构建扩展这些属性。</p>
</blockquote>
</div></div><a class="button-hover more" href="/2019/03/21/使用SpringBoot-属性和配置/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/21/使用SpringBoot-配置HTTP-2/">使用SpringBoot-配置HTTP/2</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-21</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/http2/">http2</a></div></div><div class="post-content"><div class="main-content content"><h1 id="配置HTTP-2"><a href="#配置HTTP-2" class="headerlink" title="配置HTTP / 2"></a>配置HTTP / 2</h1><p>您可以使用<code>server.http2.enabled</code>配置属性在Spring Boot应用程序中启用HTTP / 2支持 。此支持取决于所选的Web服务器和应用程序环境，因为JDK8不支持该协议。</p>
<blockquote>
<p>Spring Boot不支持<code>h2c</code>HTTP / 2协议的明文版本。因此，您必须先<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-configure-ssl" target="_blank" rel="noopener">配置SSL</a>。</p>
</blockquote>
<h2 id="Undertow的HTTP-2"><a href="#Undertow的HTTP-2" class="headerlink" title="Undertow的HTTP / 2"></a>Undertow的HTTP / 2</h2><p>从Undertow 1.4.0+开始，支持HTTP / 2，对JDK8没有任何额外要求。</p>
<h2 id="Jetty的HTTP-2"><a href="#Jetty的HTTP-2" class="headerlink" title="Jetty的HTTP / 2"></a>Jetty的HTTP / 2</h2><p>从Jetty 9.4.8开始，<a href="https://www.conscrypt.org/" target="_blank" rel="noopener">Conscrypt库</a>也支持HTTP / 2 。要启用该支持，您的应用程序需要有两个额外的依赖项：</p>
<ul>
<li><p><code>org.eclipse.jetty:jetty-alpn-conscrypt-server</code></p>
</li>
<li><p><code>org.eclipse.jetty.http2:http2-server</code></p>
</li>
</ul>
<h2 id="Tomcat的HTTP-2"><a href="#Tomcat的HTTP-2" class="headerlink" title="Tomcat的HTTP / 2"></a>Tomcat的HTTP / 2</h2><p>Spring Boot默认使用Tomcat 9.0.x，它在使用JDK 9或更高版本时支持HTTP / 2开箱即用。或者，如果<code>libtcnative</code> 库及其依赖项安装在主机操作系统上，则可以在JDK 8上使用HTTP / 2 。</p>
<p>必须使库文件夹（如果尚未可用）到JVM库路径。您可以使用JVM参数来完成此操作 <code>-Djava.library.path=/usr/local/opt/tomcat-native/lib</code>。有关<a href="https://tomcat.apache.org/tomcat-9.0-doc/apr.html" target="_blank" rel="noopener">Tomcat官方文档的</a>更多 <a href="https://tomcat.apache.org/tomcat-9.0-doc/apr.html" target="_blank" rel="noopener">信息</a>。</p>
<p>在没有该本机支持的情况下在JDK 8上启动Tomcat 9.0.x会记录以下错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR 8787 --- [           main] o.a.coyote.http11.Http11NioProtocol      : The upgrade handler [org.apache.coyote.http2.Http2Protocol] for [h2] only supports upgrade via ALPN but has beenconfigured for the ["https-jsse-nio-8443"] connector that does not support ALPN.</span><br></pre></td></tr></table></figure>
<p>此错误不是致命错误，应用程序仍以HTTP / 1.1 SSL支持启动。</p>
<h2 id="Reactor-Netty的HTTP-2"><a href="#Reactor-Netty的HTTP-2" class="headerlink" title="Reactor Netty的HTTP / 2"></a>Reactor Netty的HTTP / 2</h2><p>在<code>spring-boot-webflux-starter</code>默认情况下，反应堆的Netty作为服务器使用。可以使用JDK 9或更高版本的JDK支持为Reactor Netty配置HTTP / 2。对于JDK 8环境或最佳运行时性能，此服务器还支持具有本机库的HTTP / 2。要启用它，您的应用程序需要具有其他依赖项。</p>
<p>Spring Boot管理<code>io.netty:netty-tcnative-boringssl-static</code>“超级jar” 的版本 ，包含所有平台的本机库。开发人员可以选择使用分类器仅导入所需的依赖项（请参阅<a href="http://netty.io/wiki/forked-tomcat-native.html" target="_blank" rel="noopener">Netty官方文档</a>）。</p>
</div></div><a class="button-hover more" href="/2019/03/21/使用SpringBoot-配置HTTP-2/#more">阅读全文</a></div></div><div id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/"><i class="fas fa-angle-right"></i></a></div></div></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fas fa-user"></i></span><span id="busuanzi_value_site_uv"></span><span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fas fa-eye"></i></span><span id="busuanzi_value_site_pv"></span><span></span></div><div class="copyright">&copy;2019 By YoungDream</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/clicklove.js"></script><!--script(src=url)--><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><!--div#current-refined-values--><!--div#clear-all--><div id="search-box"></div><!--div#refinement-list--><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script></body></html>