<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="正忙着优秀~~~"><meta name="keywords" content><meta name="author" content="YoungDream,undefined"><meta name="copyright" content="YoungDream"><title>小小搬砖工【YD Blog】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="icon" href="/favicon-16x16-user.png"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><!--link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")--><!--link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css")--><!--script(src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer)--><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"0BGAOITLJQ","apiKey":"2c864a8b4720c83c2ddfc7e53d4c1711","indexName":"article_NAME","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
}</script></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="author-info"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/user.jpg"></div><div class="author-info-name">YoungDream</div><div class="author-info-description">正忙着优秀~~~</div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/qq994300880" target="_blank">GitHub<i class="icon-dot bg-color4"></i></a><a class="links-button button-hover" href="http://wpa.qq.com/msgrd?v=3&amp;uin=994300880&amp;site=qq&amp;menu=yes" target="_blank">QQ<i class="icon-dot bg-color8"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">47</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">57</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">5</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i><span> 搜索</span></a><a class="title-name" href="/">YD Blog</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><div id="recent-posts"><!-- each post in page.posts.sort('date', -1).limit(10).toArray()--><!-- config中配置按照什么排序--><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-Logging/">使用SpringBoot-Logging</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-20</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/logging/">logging</a></div></div><div class="post-content"><div class="main-content content"><h2 id="Logging"><a href="#Logging" class="headerlink" title="Logging"></a>Logging</h2><p>Spring Boot使用<a href="https://commons.apache.org/logging" target="_blank" rel="noopener">Commons Logging</a>进行所有内部日志记录，但保留底层日志实现。为<a href="https://docs.oracle.com/javase/8/docs/api//java/util/logging/package-summary.html" target="_blank" rel="noopener">Java Util Logging</a>，<a href="https://logging.apache.org/log4j/2.x/" target="_blank" rel="noopener">Log4J2</a>和 <a href="http://logback.qos.ch/" target="_blank" rel="noopener">Logback</a>提供了默认配置 。在每种情况下，记录器都预先配置为使用控制台输出，并且还提供可选的文件输出。</p>
<p>默认情况下，如果使用“Starters”，则使用Logback进行日志记录。还包括适当的Logback路由，以确保使用Java Util Logging，Commons Logging，Log4J或SLF4J的依赖库都能正常工作。</p>
<blockquote>
<p>Java有很多日志框架可供使用。如果以上列表看起来令人困惑，请不要担心。通常，您不需要更改日志记录依赖项，并且Spring Boot默认值可以正常工作。</p>
</blockquote>
<h3 id="日志格式"><a href="#日志格式" class="headerlink" title="日志格式"></a>日志格式</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2014-03-05 10:57:51.112  INFO 45469 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.52</span><br><span class="line">2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext</span><br><span class="line">2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1358 ms</span><br><span class="line">2014-03-05 10:57:51.698  INFO 45469 --- [ost-startStop-1] o.s.b.c.e.ServletRegistrationBean        : Mapping servlet: 'dispatcherServlet' to [/]</span><br><span class="line">2014-03-05 10:57:51.702  INFO 45469 --- [ost-startStop-1] o.s.b.c.embedded.FilterRegistrationBean  : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]</span><br></pre></td></tr></table></figure>
<p>输出以下信息：</p>
<ul>
<li>日期和时间：毫秒精度，易于排序。</li>
<li>日志级别：<code>ERROR</code>，<code>WARN</code>，<code>INFO</code>，<code>DEBUG</code>，或<code>TRACE</code>。</li>
<li>进程ID。</li>
<li>一个<code>---</code>分离器来区分实际日志消息的开始。</li>
<li>线程名称：用方括号括起来（可能会截断控制台输出）。</li>
<li>记录器名称：这通常是源类名称（通常缩写）。</li>
<li>日志消息。</li>
</ul>
<blockquote>
<p>Logback没有<code>FATAL</code>级别。它映射到<code>ERROR</code>。</p>
</blockquote>
<h3 id="控制台输出"><a href="#控制台输出" class="headerlink" title="控制台输出"></a>控制台输出</h3><p>默认日志配置会在写入时将消息回显到控制台。默认情况下，会记录<code>ERROR</code>-level，<code>WARN</code>-level和<code>INFO</code>-level消息。您还可以通过使用<code>--debug</code>标志启动应用程序来启用“调试”模式。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> java -jar myapp.jar --debug</span><br></pre></td></tr></table></figure>
<blockquote>
<p>你也可以<code>debug=true</code>在你的指定<code>application.properties</code>。</p>
</blockquote>
<p>启用调试模式后，将选择一些核心记录器（嵌入式容器，Hibernate和Spring Boot）以输出更多信息。启用调试模式并<em>没有</em>配置您的应用程序记录所有消息<code>DEBUG</code>的水平。</p>
<p>或者，您可以通过使用<code>--trace</code>标志（或<code>trace=true</code>在您的应用程序中）启动应用程序来启用“跟踪”模式 <code>application.properties</code>。这样做可以为选择的核心记录器（嵌入式容器，Hibernate模式生成和整个Spring组合）启用跟踪日志记录。</p>
<h3 id="彩色编码输出"><a href="#彩色编码输出" class="headerlink" title="彩色编码输出"></a>彩色编码输出</h3><p>如果您的终端支持ANSI，则使用颜色输出来提高可读性。您可以设置 <code>spring.output.ansi.enabled</code>为 <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/api/org/springframework/boot/ansi/AnsiOutput.Enabled.html" target="_blank" rel="noopener">支持的值</a>以覆盖自动检测。</p>
<p>通过使用<code>%clr</code>转换字配置颜色编码。在最简单的形式中，转换器根据日志级别为输出着色，如以下示例所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">%</span>clr(%5p)</span><br></pre></td></tr></table></figure>
<p>下表描述了日志级别到颜色的映射：</p>
<table>
<thead>
<tr>
<th style="text-align:center">水平</th>
<th style="text-align:center">颜色</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>FATAL</code></td>
<td style="text-align:center">红色</td>
</tr>
<tr>
<td style="text-align:center"><code>ERROR</code></td>
<td style="text-align:center">红色</td>
</tr>
<tr>
<td style="text-align:center"><code>WARN</code></td>
<td style="text-align:center">黄色</td>
</tr>
<tr>
<td style="text-align:center"><code>INFO</code></td>
<td style="text-align:center">绿色</td>
</tr>
<tr>
<td style="text-align:center"><code>DEBUG</code></td>
<td style="text-align:center">绿色</td>
</tr>
<tr>
<td style="text-align:center"><code>TRACE</code></td>
<td style="text-align:center">绿色</td>
</tr>
</tbody>
</table>
<p>或者，您可以通过将其作为转换选项指定应使用的颜色或样式。例如，要使文本变为黄色，请使用以下设置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">%</span>clr(%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;)&#123;yellow&#125;</span><br></pre></td></tr></table></figure>
<p>支持以下颜色和样式：</p>
<ul>
<li><code>blue</code></li>
<li><code>cyan</code></li>
<li><code>faint</code></li>
<li><code>green</code></li>
<li><code>magenta</code></li>
<li><code>red</code></li>
<li><code>yellow</code></li>
</ul>
<h3 id="文件输出"><a href="#文件输出" class="headerlink" title="文件输出"></a>文件输出</h3><p>默认情况下，Spring Boot仅记录到控制台，不会写入日志文件。如果除了控制台输出之外还要编写日志文件，则需要设置 <code>logging.file</code>或<code>logging.path</code>属性（例如，在您的中 <code>application.properties</code>）。</p>
<p>下表显示了如何<code>logging.*</code>一起使用这些属性：</p>
<p><strong>记录属性</strong></p>
<table>
<thead>
<tr>
<th style="text-align:center"><code>logging.file</code></th>
<th style="text-align:center"><code>logging.path</code></th>
<th style="text-align:center">例子</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><em>（没有）</em></td>
<td style="text-align:center"><em>（没有）</em></td>
<td style="text-align:center"></td>
<td style="text-align:center">仅控制台记录。</td>
</tr>
<tr>
<td style="text-align:center">具体文件</td>
<td style="text-align:center"><em>（没有）</em></td>
<td style="text-align:center"><code>my.log</code></td>
<td style="text-align:center">写入指定的日志文件。名称可以是精确位置或相对于当前目录。</td>
</tr>
<tr>
<td style="text-align:center"><em>（没有）</em></td>
<td style="text-align:center">具体目录</td>
<td style="text-align:center"><code>/var/log</code></td>
<td style="text-align:center">写入<code>spring.log</code>指定的目录。名称可以是精确位置或相对于当前目录。</td>
</tr>
</tbody>
</table>
<p>日志文件在达到10 MB时会轮换，与控制台输出一样，默认情况下会记录<code>ERROR</code>-level， <code>WARN</code>-level和<code>INFO</code>-level消息。可以使用<code>logging.file.max-size</code>属性更改大小限制。除非<code>logging.file.max-history</code>已设置属性，否则以前轮换的文件将无限期归档。</p>
<blockquote>
<p>日志记录系统在应用程序生命周期的早期初始化。因此，在通过<code>@PropertySource</code> 注释加载的属性文件中找不到日志记录属性。</p>
</blockquote>
<blockquote>
<p>日志记录属性独立于实际的日志记录基础结构。因此，<code>logback.configurationFile</code>spring Boot不管理特定的配置键（例如Logback）。</p>
</blockquote>
<h3 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h3><p>所有支持的日志系统可以在弹簧设置的记录器级别 <code>Environment</code>（例如，<code>application.properties</code>通过使用） <code>logging.level.&lt;logger-name&gt;=&lt;level&gt;</code>，其中<code>level</code>为TRACE，DEBUG，INFO，WARN，ERROR，FATAL或OFF之一。该<code>root</code>记录器可以通过使用被配置<code>logging.level.root</code>。</p>
<p>以下示例显示了潜在的日志记录设置<code>application.properties</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">logging.level.root=WARN</span><br><span class="line">logging.level.org.springframework.web=DEBUG</span><br><span class="line">logging.level.org.hibernate=ERROR</span><br></pre></td></tr></table></figure>
<h3 id="日志组"><a href="#日志组" class="headerlink" title="日志组"></a>日志组</h3><p>能够将相关记录器组合在一起以便可以同时配置它们通常很有用。例如，您通常可以更改<em>所有</em> Tomcat相关记录器的日志记录级别 ，但您无法轻松记住顶级软件包。</p>
<p>为了解决这个问题，Spring Boot允许您在Spring中定义日志记录组 <code>Environment</code>。例如，以下是如何通过将“Tomcat”组添加到您的<code>application.properties</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logging.group.tomcat = org.apache.catalina，org.apache.coyote，org.apache.tomcat</span><br></pre></td></tr></table></figure>
<p>定义后，您可以使用一行更改组中所有记录器的级别：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">logging.level.tomcat = TRACE</span><br></pre></td></tr></table></figure>
<p>Spring Boot包含以下预定义的日志记录组，可以直接使用：</p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">Loggers</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">WEB</td>
<td style="text-align:center"><code>org.springframework.core.codec</code>，<code>org.springframework.http</code>，<code>org.springframework.web</code></td>
</tr>
<tr>
<td style="text-align:center">SQL</td>
<td style="text-align:center"><code>org.springframework.jdbc.core</code>， <code>org.hibernate.SQL</code></td>
</tr>
</tbody>
</table>
<h3 id="自定义日志配置"><a href="#自定义日志配置" class="headerlink" title="自定义日志配置"></a>自定义日志配置</h3><p>可以通过在类路径中包含适当的库来激活各种日志记录系统，并且可以通过在类路径的根目录中或在以下Spring <code>Environment</code> 属性指定的位置提供合适的配置文件来进一步自定义：<code>logging.config</code>。</p>
<p>您可以使用<code>org.springframework.boot.logging.LoggingSystem</code>系统属性强制Spring Boot使用特定的日志记录系统 。该值应该是实现的完全限定类名<code>LoggingSystem</code>。您还可以通过使用值来完全禁用Spring Boot的日志记录配置<code>none</code>。</p>
<blockquote>
<p>由于记录被初始化<strong>之前</strong>的<code>ApplicationContext</code>创建，这是不可能控制来自伐木<code>@PropertySources</code>春季<code>@Configuration</code>文件。更改日志记录系统或完全禁用它的唯一方法是通过系统属性。</p>
</blockquote>
<p>根据您的日志记录系统，将加载以下文件：</p>
<table>
<thead>
<tr>
<th style="text-align:center">日志实现</th>
<th style="text-align:center">定制</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">logback</td>
<td style="text-align:center"><code>logback-spring.xml</code>，<code>logback-spring.groovy</code>，<code>logback.xml</code>，或者<code>logback.groovy</code></td>
</tr>
<tr>
<td style="text-align:center">Log4j2</td>
<td style="text-align:center"><code>log4j2-spring.xml</code> 或者 <code>log4j2.xml</code></td>
</tr>
<tr>
<td style="text-align:center">JDK（Java Util Logging）</td>
<td style="text-align:center"><code>logging.properties</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>如果可能，我们建议您使用<code>-spring</code>变量进行日志记录配置（例如，<code>logback-spring.xml</code>而不是<code>logback.xml</code>）。如果使用标准配置位置，Spring无法完全控制日志初始化。</p>
</blockquote>
<blockquote>
<p>Java Util Logging存在已知的类加载问题，从“可执行jar”运行时会导致问题。如果可能的话，我们建议您在从“可执行jar”运行时避免使用它。</p>
</blockquote>
<p>为了帮助进行自定义，一些其他属性从Spring转移 <code>Environment</code>到System属性，如下表所述：</p>
<table>
<thead>
<tr>
<th style="text-align:center">Spring环境</th>
<th style="text-align:center">系统属性</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>logging.exception-conversion-word</code></td>
<td style="text-align:center"><code>LOG_EXCEPTION_CONVERSION_WORD</code></td>
<td style="text-align:center">记录异常时使用的转换字。</td>
</tr>
<tr>
<td style="text-align:center"><code>logging.file</code></td>
<td style="text-align:center"><code>LOG_FILE</code></td>
<td style="text-align:center">如果已定义，则在默认日志配置中使用它。</td>
</tr>
<tr>
<td style="text-align:center"><code>logging.file.max-size</code></td>
<td style="text-align:center"><code>LOG_FILE_MAX_SIZE</code></td>
<td style="text-align:center">最大日志文件大小（如果启用了LOG_FILE）。（仅支持默认的Logback设置。）</td>
</tr>
<tr>
<td style="text-align:center"><code>logging.file.max-history</code></td>
<td style="text-align:center"><code>LOG_FILE_MAX_HISTORY</code></td>
<td style="text-align:center">要保留的最大归档日志文件数（如果启用了LOG_FILE）。（仅支持默认的Logback设置。）</td>
</tr>
<tr>
<td style="text-align:center"><code>logging.path</code></td>
<td style="text-align:center"><code>LOG_PATH</code></td>
<td style="text-align:center">如果已定义，则在默认日志配置中使用它。</td>
</tr>
<tr>
<td style="text-align:center"><code>logging.pattern.console</code></td>
<td style="text-align:center"><code>CONSOLE_LOG_PATTERN</code></td>
<td style="text-align:center">要在控制台上使用的日志模式（stdout）。（仅支持默认的Logback设置。）</td>
</tr>
<tr>
<td style="text-align:center"><code>logging.pattern.dateformat</code></td>
<td style="text-align:center"><code>LOG_DATEFORMAT_PATTERN</code></td>
<td style="text-align:center">日志日期格式的Appender模式。（仅支持默认的Logback设置。）</td>
</tr>
<tr>
<td style="text-align:center"><code>logging.pattern.file</code></td>
<td style="text-align:center"><code>FILE_LOG_PATTERN</code></td>
<td style="text-align:center">要在文件中使用的日志模式（如果<code>LOG_FILE</code>已启用）。（仅支持默认的Logback设置。）</td>
</tr>
<tr>
<td style="text-align:center"><code>logging.pattern.level</code></td>
<td style="text-align:center"><code>LOG_LEVEL_PATTERN</code></td>
<td style="text-align:center">呈现日志级别时使用的格式（默认<code>%5p</code>）。（仅支持默认的Logback设置。）</td>
</tr>
<tr>
<td style="text-align:center"><code>PID</code></td>
<td style="text-align:center"><code>PID</code></td>
<td style="text-align:center">当前进程ID（如果可能，则在未定义为OS环境变量时发现）。</td>
</tr>
</tbody>
</table>
<p>所有受支持的日志记录系统在分析其配置文件时都可以查阅系统属性。有关<code>spring-boot.jar</code>示例，请参阅默认配置：</p>
<ul>
<li><a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/logback/defaults.xml" target="_blank" rel="noopener">logback</a></li>
<li><a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/log4j2/log4j2.xml" target="_blank" rel="noopener">Log4j 2</a></li>
<li><a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/java/logging-file.properties" target="_blank" rel="noopener">Java Util日志记录</a></li>
</ul>
<blockquote>
<p>如果要在日志记录属性中使用占位符，则应使用 <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-external-config-placeholders-in-properties" target="_blank" rel="noopener">Spring Boot的语法</a>而不是底层框架的语法。值得注意的是，如果使用Logback，则应将其<code>:</code> 用作属性名称与其默认值之间的分隔符，而不是使用<code>:-</code>。</p>
</blockquote>
<blockquote>
<p>您可以通过仅覆盖<code>LOG_LEVEL_PATTERN</code>（或<code>logging.pattern.level</code>使用Logback）将MDC和其他临时内容添加到日志行 。例如，如果使用<code>logging.pattern.level=user:%X{user} %5p</code>，则默认日志格式包含“user”的MDC条目（如果存在），如以下示例所示。</p>
<p>2015-09-30 12:30:04.031 user:someone INFO 22174 — [  nio-8080-exec-0] demo.Controller<br>Handling authenticated request</p>
</blockquote>
<h3 id="Logback扩展"><a href="#Logback扩展" class="headerlink" title="Logback扩展"></a>Logback扩展</h3><p>Spring Boot包含许多Logback扩展，可以帮助进行高级配置。您可以在<code>logback-spring.xml</code>配置文件中使用这些扩展名。</p>
<blockquote>
<p>由于标准<code>logback.xml</code>配置文件加载过早，因此无法在其中使用扩展。您需要使用<code>logback-spring.xml</code>或定义 <code>logging.config</code>属性。</p>
</blockquote>
<blockquote>
<p>扩展不能与Logback的 <a href="http://logback.qos.ch/manual/configuration.html#autoScan" target="_blank" rel="noopener">配置扫描一起使用</a>。如果您尝试这样做，更改配置文件会导致类似于以下记录之一的错误：</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ERROR in ch.qos.logback.core.joran.spi.Interpreter@4:71 - no applicable action for [springProperty], current ElementPath is [[configuration][springProperty]]</span><br><span class="line">ERROR in ch.qos.logback.core.joran.spi.Interpreter@4:71 - no applicable action for [springProfile], current ElementPath is [[configuration][springProfile]]</span><br></pre></td></tr></table></figure>
<h4 id="特定于配置文件的配置"><a href="#特定于配置文件的配置" class="headerlink" title="特定于配置文件的配置"></a>特定于配置文件的配置</h4><p>该<code>&lt;springProfile&gt;</code>标签可以让你选择性地包括或排除基于主动春型材配置的部分。在<code>&lt;configuration&gt;</code>元素内的任何位置都支持配置文件节。使用该<code>name</code>属性指定哪个配置文件接受配置。所述<code>&lt;springProfile&gt;</code>标记可包含一个简单的配置文件的名称（例如<code>staging</code>）或轮廓表达。例如，简档表达式允许表达更复杂的简档逻辑 <code>production &amp; (eu-central | eu-west)</code>。有关详细信息，请查阅 <a href="https://docs.spring.io/spring/docs/5.1.5.RELEASE/spring-framework-reference/core.html#beans-definition-profiles-java" target="_blank" rel="noopener">参考指南</a>。以下清单显示了三个示例配置文件：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">springProfile</span>  <span class="attr">name</span> = <span class="string">“staging”</span> &gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">！</span> <span class="attr">-</span> “暂存”配置文件处于活动状态时要启用的配置 <span class="attr">-</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">springProfile</span>  <span class="attr">name</span> = <span class="string">“dev</span> | <span class="attr">staging</span>” &gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">！</span> <span class="attr">-</span> 在“<span class="attr">dev</span>”或“<span class="attr">staging</span>”配置文件处于活动状态时启用的配置 <span class="attr">-</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">springProfile</span>  <span class="attr">name</span> = <span class="string">“！production”</span> &gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">！</span> <span class="attr">-</span> “生产”配置文件未激活时要启用的配置 <span class="attr">-</span> &gt;</span> </span><br><span class="line"><span class="tag">&lt;/ <span class="attr">springProfile</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="环境属性"><a href="#环境属性" class="headerlink" title="环境属性"></a>环境属性</h4><p>该<code>&lt;springProperty&gt;</code>标记允许您公开Spring中的属性<code>Environment</code>以便在Logback中使用。如果要<code>application.properties</code>在Logback配置中访问文件中的值，则此操作非常有用 。标签的工作方式与Logback的标准<code>&lt;property&gt;</code>标签类似。但是，<code>value</code>您可以指定<code>source</code>属性（来自<code>Environment</code>），而不是指定直接 属性。如果需要将属性存储在<code>local</code>范围之外的其他位置，则可以使用该<code>scope</code> 属性。如果需要回退值（如果未在中设置属性 <code>Environment</code>），则可以使用该<code>defaultValue</code>属性。以下示例显示如何公开在Logback中使用的属性：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">springProperty</span>  <span class="attr">scope</span> = <span class="string">“context”</span>  <span class="attr">name</span> = <span class="string">“fluentHost”</span>  <span class="attr">source</span> = <span class="string">“myapp.fluentd.host”</span> </span></span><br><span class="line"><span class="tag">		<span class="attr">defaultValue</span> = <span class="string">“localhost”</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">“FLUENT”</span> <span class="attr">class</span>=<span class="string">“ch.qos.logback.more.appenders.DataFluentAppender”</span> &gt;</span> </span><br><span class="line">	<span class="tag">&lt;<span class="name">remoteHost</span>&gt;</span> $ &#123;fluentHost&#125; <span class="tag">&lt;/ <span class="attr">remoteHost</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line"><span class="tag">&lt;/<span class="name">springProperty</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>在<code>source</code>必须在串的情况下（如指定<code>my.property-name</code>）。但是，可以<code>Environment</code>使用宽松规则将属性添加到属性中。</p>
</blockquote>
</div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-Logging/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/个人想说一/">个人想说一</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-20</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/live/">live</a></div></div><div class="post-content"><div class="main-content content"><p>​    虽说纯看文档无聊，对于我个人来说，大部分都已经使用过的，因此理解起来并没有太大难度。在后续会推出相应的学习Demo，以便复习和具体应用</p>
</div></div><a class="button-hover more" href="/2019/03/20/个人想说一/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-Profiles/">使用SpringBoot-Profiles</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-20</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/profiles/">profiles</a></div></div><div class="post-content"><div class="main-content content"><h2 id="Profiles"><a href="#Profiles" class="headerlink" title="Profiles"></a>Profiles</h2><p>Spring Profiles提供了一种隔离应用程序配置部分并使其仅在特定环境中可用的方法。任何<code>@Component</code>或<code>@Configuration</code> 可以标记<code>@Profile</code>以限制何时加载，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Profile</span>(<span class="string">"production"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProductionConfiguration</span> </span>&#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>您可以使用<code>spring.profiles.active</code> <code>Environment</code>属性指定哪些配置文件处于活动状态。您可以使用本章前面介绍的任何方法指定属性。例如，您可以将其包含在您的中<code>application.properties</code>，如以下示例所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.profiles.active = dev，hsqldb</span><br></pre></td></tr></table></figure>
<p>您还可以使用以下开关在命令行上指定它： <code>--spring.profiles.active=dev,hsqldb</code>。</p>
<h3 id="添加活动配置文件"><a href="#添加活动配置文件" class="headerlink" title="添加活动配置文件"></a>添加活动配置文件</h3><p>该<code>spring.profiles.active</code>属性遵循与其他属性相同的排序规则：最高<code>PropertySource</code>胜利。这意味着您可以在其中指定活动配置文件<code>application.properties</code>，然后使用命令行开关<strong>替换</strong>它们。</p>
<p>有时，将特定于配置文件的属性<strong>添加</strong>到活动配置文件而不是替换它们是有用的。该<code>spring.profiles.include</code>属性可用于无条件添加活动配置文件。该<code>SpringApplication</code>入口点还设置附加配置文件的Java API（即那些由活化的顶级 <code>spring.profiles.active</code>属性）。请参阅<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/api/org/springframework/boot/SpringApplication.html" target="_blank" rel="noopener">SpringApplication中</a>的<code>setAdditionalProfiles()</code>方法 。</p>
<p>例如，当使用开关运行具有以下属性的应用程序时<code>--spring.profiles.active=prod</code>，也会激活<code>proddb</code>和<code>prodmq</code>配置文件：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">my.property:</span> <span class="string">fromyamlfile</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">spring.profiles:</span> <span class="string">prod</span></span><br><span class="line"><span class="string">spring.profiles.include:</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">proddb</span></span><br><span class="line"><span class="bullet">  -</span> <span class="string">prodmq</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>请记住，<code>spring.profiles</code>可以在YAML文档中定义属性，以确定此特定文档何时包含在配置中。有关更多详细信息<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-change-configuration-depending-on-the-environment" target="_blank" rel="noopener">，</a>请参见 <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#howto-change-configuration-depending-on-the-environment" target="_blank" rel="noopener">第77.7节“根据环境更改配置”</a></p>
</blockquote>
<h3 id="以编程方式设置配置文件"><a href="#以编程方式设置配置文件" class="headerlink" title="以编程方式设置配置文件"></a>以编程方式设置配置文件</h3><p>您可以<code>SpringApplication.setAdditionalProfiles(…)</code>在应用程序运行之前通过调用以编程方式设置活动配置文 也可以使用Spring的<code>ConfigurableEnvironment</code>界面激活配置文件。</p>
<h3 id="特定于配置文件的配置文件"><a href="#特定于配置文件的配置文件" class="headerlink" title="特定于配置文件的配置文件"></a>特定于配置文件的配置文件</h3><p>引用的<code>application.properties</code>（或<code>application.yml</code>）和文件的特定于配置文件的变体<code>@ConfigurationProperties</code>被视为文件并加载。有关详细信息<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties" target="_blank" rel="noopener">，</a>请参见“ <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties" target="_blank" rel="noopener">第24.4节”“特定</a>于<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-external-config-profile-specific-properties" target="_blank" rel="noopener">配置文件的属性”</a>。</p>
</div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-Profiles/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-类型安全配置属性/">使用SpringBoot-类型安全配置属性</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-20</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/properties/">properties</a><span>&nbsp;|&nbsp;</span><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/yaml/">yaml</a></div></div><div class="post-content"><div class="main-content content"><h2 id="类型安全配置属性"><a href="#类型安全配置属性" class="headerlink" title="类型安全配置属性"></a>类型安全配置属性</h2><p>使用<code>@Value(&quot;${property}&quot;)</code>注释注入配置属性有时会很麻烦，尤其是在使用多个属性或数据本质上是分层的情况下。Spring Boot提供了一种使用属性的替代方法，该方法允许强类型bean管理和验证应用程序的配置，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">"acme"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AcmeProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> enabled;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> InetAddress remoteAddress;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Security security = <span class="keyword">new</span> Security();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEnabled</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEnabled</span><span class="params">(<span class="keyword">boolean</span> enabled)</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> InetAddress <span class="title">getRemoteAddress</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRemoteAddress</span><span class="params">(InetAddress remoteAddress)</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Security <span class="title">getSecurity</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Security</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> List&lt;String&gt; roles = <span class="keyword">new</span> ArrayList&lt;&gt;(Collections.singleton(<span class="string">"USER"</span>));</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getRoles</span><span class="params">()</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRoles</span><span class="params">(List&lt;String&gt; roles)</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>前面的POJO定义了以下属性：</p>
<ul>
<li><code>acme.enabled</code>，默认值为<code>false</code>。</li>
<li><code>acme.remote-address</code>，具有可以强制的类型<code>String</code>。</li>
<li><code>acme.security.username</code>，使用嵌套的“安全”对象，其名称由属性名称决定。特别是，那里根本没有使用返回类型<code>SecurityProperties</code>。</li>
<li><code>acme.security.password</code>。</li>
<li><code>acme.security.roles</code>，收集<code>String</code>。</li>
</ul>
<blockquote>
<p>getter和setter通常是必需的，因为绑定是通过标准的Java Beans属性描述符，就像在Spring MVC中一样。在下列情况下可以省略setter：</p>
<ul>
<li>映射，只要它们被初始化，就需要一个getter但不一定是setter，因为它们可以被绑定器变异。</li>
<li>可以通过索引（通常使用YAML）或使用单个逗号分隔值（属性）访问集合和数组。在后一种情况下，必须设置一个setter。我们建议始终为这些类型添加setter。如果初始化集合，请确保它不是不可变的（如上例所示）。</li>
<li>如果初始化嵌套的POJO属性（如<code>Security</code>前面示例中的字段），则不需要setter。如果您希望绑定器使用其默认构造函数动态创建实例，则需要一个setter。</li>
</ul>
<p>有些人使用Project Lombok自动添加getter和setter。确保Lombok不为此类型生成任何特定构造函数，因为容器会自动使用它来实例化对象。</p>
<p>最后，仅考虑标准Java Bean属性，并且不支持对静态属性的绑定。</p>
</blockquote>
<p>您还需要列出要在<code>@EnableConfigurationProperties</code>注释中注册的属性类 ，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> </span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span>（AcmeProperties.class）</span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当<code>@ConfigurationProperties</code>bean以这种方式注册时，bean具有常规名称：<code>&lt;prefix&gt;-&lt;fqn&gt;</code>，其中<code>&lt;prefix&gt;</code>是<code>@ConfigurationProperties</code>注释中指定的环境键前缀，并且<code>&lt;fqn&gt;</code>是bean的完全限定名称。如果注释未提供任何前缀，则仅使用bean的完全限定名称。</p>
<p>上例中的bean名称是<code>acme-com.example.AcmeProperties</code>。</p>
</blockquote>
<p>即使前面的配置创建了常规bean <code>AcmeProperties</code>，我们也建议<code>@ConfigurationProperties</code>只处理环境，特别是不从上下文中注入其他bean。话虽如此，<code>@EnableConfigurationProperties</code>注释<em>也会</em>自动应用于您的项目，以便从中配置任何注释的<em>现有</em> bean 。您可以通过确保 已经是bean 来快捷方式，如以下示例所示：<code>@ConfigurationProperties</code></p>
<p><code>Environment</code></p>
<p><code>MyConfiguration</code></p>
<p><code>AcmeProperties</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> </span><br><span class="line"><span class="meta">@ConfigurationProperties</span>（prefix =“acme”）</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AcmeProperties</span> </span>&#123;</span><br><span class="line">	<span class="comment">// ...参见前面的例子</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种配置风格特别适用于<code>SpringApplication</code>外部YAML配置，如以下示例所示：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># application.yml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">acme:</span></span><br><span class="line">	<span class="attr">remote-address:</span> <span class="number">192.168</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">	<span class="attr">security:</span></span><br><span class="line">		<span class="attr">username:</span> <span class="string">admin</span></span><br><span class="line">		<span class="attr">roles:</span></span><br><span class="line">		  <span class="bullet">-</span> <span class="string">USER</span></span><br><span class="line">		  <span class="bullet">-</span> <span class="string">ADMIN</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># additional configuration as required</span></span><br></pre></td></tr></table></figure>
<p>要使用<code>@ConfigurationProperties</code>bean，可以使用与任何其他bean相同的方式注入它们，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> AcmeProperties properties;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MyService</span><span class="params">(AcmeProperties properties)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">this</span>.properties = properties;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"> 	<span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">@PostConstruct</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">openConnection</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Server server = <span class="keyword">new</span> Server(<span class="keyword">this</span>.properties.getRemoteAddress());</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用<code>@ConfigurationProperties</code>还可以生成元数据文件，IDE可以使用这些文件为您自己的密钥提供自动完成功能。有关详细信息<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#configuration-metadata" target="_blank" rel="noopener">，</a>请参阅 <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#configuration-metadata" target="_blank" rel="noopener">附录B，</a><a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#configuration-metadata" target="_blank" rel="noopener"><em>配置元数据</em></a>附录。</p>
</blockquote>
<h2 id="第三方配置"><a href="#第三方配置" class="headerlink" title="第三方配置"></a>第三方配置</h2><p>除了<code>@ConfigurationProperties</code>用于注释类之外，您还可以在公共<code>@Bean</code>方法上使用它。当您想要将属性绑定到控件之外的第三方组件时，这样做会特别有用。</p>
<p>要从<code>Environment</code>属性配置bean ，请添加<code>@ConfigurationProperties</code>到其bean注册，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>（prefix =“another”）</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"> <span class="keyword">public</span> AnotherComponent anotherComponent（）&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用<code>another</code>前缀定义的任何属性都<code>AnotherComponent</code>以与前面<code>AcmeProperties</code>示例类似的方式映射到该bean 。</p>
<h2 id="松弛结合"><a href="#松弛结合" class="headerlink" title="松弛结合"></a>松弛结合</h2><p>Spring Boot使用一些宽松的规则来绑定bean的<code>Environment</code>属性 <code>@ConfigurationProperties</code>，因此不需要在<code>Environment</code>属性名和bean属性名之间进行精确匹配 。这有用的常见示例包括破折号分隔的环境属性（例如，<code>context-path</code>绑定到<code>contextPath</code>）和大写环境属性（例如，<code>PORT</code>绑定到 <code>port</code>）。</p>
<p>例如，请考虑以下<code>@ConfigurationProperties</code>类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix=<span class="string">"acme.my-project.person"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OwnerProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String firstName;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getFirstName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.firstName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFirstName</span><span class="params">(String firstName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.firstName = firstName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在前面的示例中，可以使用以下属性名称：</p>
<table>
<thead>
<tr>
<th style="text-align:center">属性</th>
<th style="text-align:center">注意</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>acme.my-project.person.first-name</code></td>
<td style="text-align:center">建议用于<code>.properties</code>和<code>.yml</code>文件。</td>
</tr>
<tr>
<td style="text-align:center"><code>acme.myProject.person.firstName</code></td>
<td style="text-align:center">标准的驼峰案例语法。</td>
</tr>
<tr>
<td style="text-align:center"><code>acme.my_project.person.first_name</code></td>
<td style="text-align:center">下划线符号，这是在用另一种格式<code>.properties</code>和<code>.yml</code> 文件。</td>
</tr>
<tr>
<td style="text-align:center"><code>ACME_MYPROJECT_PERSON_FIRSTNAME</code></td>
<td style="text-align:center">大写格式，使用系统环境变量时建议使用。</td>
</tr>
</tbody>
</table>
<blockquote>
<p><code>prefix</code>注释的值<em>必须</em>是kebab大小写（小写并且用<code>-</code>，例如<code>acme.my-project.person</code>）。</p>
</blockquote>
<p>每个属性源放宽绑定规则：</p>
<table>
<thead>
<tr>
<th style="text-align:center">Property Source</th>
<th style="text-align:center">Simple</th>
<th style="text-align:center">List</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">属性文件</td>
<td style="text-align:center">骆驼案，kebab案例或下划线表示法</td>
<td style="text-align:center">标准列表语法使用<code>[ ]</code>或逗号分隔值</td>
</tr>
<tr>
<td style="text-align:center">YAML文件</td>
<td style="text-align:center">骆驼案，kebab案例或下划线表示法</td>
<td style="text-align:center">标准YAML列表语法或逗号分隔值</td>
</tr>
<tr>
<td style="text-align:center">环境变量</td>
<td style="text-align:center">大写格式，下划线作为分隔符。<code>_</code>不应在属性名称中使用</td>
<td style="text-align:center">由下划线包围的数字值，例如 <code>MY_ACME_1_OTHER = my.acme[1].other</code></td>
</tr>
<tr>
<td style="text-align:center">系统属性</td>
<td style="text-align:center">骆驼案，kebab案例或下划线表示法</td>
<td style="text-align:center">标准列表语法使用<code>[ ]</code>或逗号分隔值</td>
</tr>
</tbody>
</table>
<blockquote>
<p>我们建议，在可能的情况下，属性以小写的kebab格式存储，例如<code>my.property-name=acme</code>。</p>
</blockquote>
<p>绑定到<code>Map</code>属性时，如果<code>key</code>包含除小写字母数字字符以外的任何内容，则<code>-</code>需要使用括号表示法以保留原始值。如果密钥未被包围<code>[]</code>，则任何非字母数字或<code>-</code>删除的字符。例如，考虑将以下属性绑定到<code>Map</code>：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">acme:</span></span><br><span class="line"><span class="attr">  map:</span></span><br><span class="line">    <span class="string">"[/key1]"</span><span class="string">:</span> <span class="string">value1</span></span><br><span class="line">    <span class="string">"[/key2]"</span><span class="string">:</span> <span class="string">value2</span></span><br><span class="line">    <span class="string">/key3:</span> <span class="string">value3</span></span><br></pre></td></tr></table></figure>
<p>上面的属性将绑定到<code>Map</code>with <code>/key1</code>，<code>/key2</code>并<code>key3</code>作为地图中的键。</p>
<h2 id="合并复杂类型"><a href="#合并复杂类型" class="headerlink" title="合并复杂类型"></a>合并复杂类型</h2><p>当列表在多个位置配置时，覆盖通过替换整个列表来工作。</p>
<p>例如，假设一个<code>MyPojo</code>具有对象<code>name</code>和<code>description</code>那些属性 <code>null</code>默认。以下示例公开了以下<code>MyPojo</code>对象 列表<code>AcmeProperties</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">"acme"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AcmeProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> List&lt;MyPojo&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;MyPojo&gt; <span class="title">getList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.list;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请考虑以下配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">acme:</span></span><br><span class="line"><span class="attr">  list:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">my</span> <span class="string">name</span></span><br><span class="line"><span class="attr">      description:</span> <span class="string">my</span> <span class="string">description</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">acme:</span></span><br><span class="line"><span class="attr">  list:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">my</span> <span class="string">another</span> <span class="string">name</span></span><br></pre></td></tr></table></figure>
<p>如果<code>dev</code>配置文件未激活，则<code>AcmeProperties.list</code>包含一个<code>MyPojo</code>条目，如先前定义的那样。<code>dev</code>但是，如果启用了配置文件，则<code>list</code> <em>仍然</em> 只包含一个条目（名称<code>my another name</code>和描述<code>null</code>）。此配置<em>不会</em><code>MyPojo</code>向列表添加第二个实例，也不会合并项目。</p>
<p>当<code>List</code>在多个配置文件中指定a时，将使用具有最高优先级（并且仅具有该优先级）的配置文件。请考虑以下示例：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">acme:</span></span><br><span class="line"><span class="attr">  list:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">my</span> <span class="string">name</span></span><br><span class="line"><span class="attr">      description:</span> <span class="string">my</span> <span class="string">description</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">another</span> <span class="string">name</span></span><br><span class="line">	  <span class="attr">description:</span> <span class="string">another</span> <span class="string">description</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">acme:</span></span><br><span class="line"><span class="attr">  list:</span></span><br><span class="line"><span class="attr">    - name:</span> <span class="string">my</span> <span class="string">another</span> <span class="string">name</span></span><br></pre></td></tr></table></figure>
<p>在前面的示例中，如果<code>dev</code>配置文件处于活动状态，则<code>AcmeProperties.list</code>包含 <em>一个</em> <code>MyPojo</code>条目（名称<code>my another name</code>和描述<code>null</code>）。对于YAML，逗号分隔列表和YAML列表都可用于完全覆盖列表的内容。</p>
<p>对于<code>Map</code>属性，您可以绑定从多个源中提取的属性值。但是，对于多个源中的相同属性，使用具有最高优先级的属性。以下示例公开了一个<code>Map&lt;String, MyPojo&gt;</code>from <code>AcmeProperties</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">"acme"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AcmeProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, MyPojo&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Map&lt;String, MyPojo&gt; <span class="title">getMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.map;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请考虑以下配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">acme:</span></span><br><span class="line"><span class="attr">  map:</span></span><br><span class="line"><span class="attr">    key1:</span></span><br><span class="line"><span class="attr">      name:</span> <span class="string">my</span> <span class="string">name</span> <span class="number">1</span></span><br><span class="line"><span class="attr">      description:</span> <span class="string">my</span> <span class="string">description</span> <span class="number">1</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">  profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">acme:</span></span><br><span class="line"><span class="attr">  map:</span></span><br><span class="line"><span class="attr">    key1:</span></span><br><span class="line"><span class="attr">      name:</span> <span class="string">dev</span> <span class="string">name</span> <span class="number">1</span></span><br><span class="line"><span class="attr">    key2:</span></span><br><span class="line"><span class="attr">      name:</span> <span class="string">dev</span> <span class="string">name</span> <span class="number">2</span></span><br><span class="line"><span class="attr">      description:</span> <span class="string">dev</span> <span class="string">description</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>如果<code>dev</code>配置文件未处于活动状态，则<code>AcmeProperties.map</code>包含一个带密钥的条目<code>key1</code> （名称<code>my name 1</code>和描述<code>my description 1</code>）。<code>dev</code>但是，如果启用了配置文件，则<code>map</code>包含两个带有键的条目<code>key1</code> （名称<code>dev name 1</code>和描述<code>my description 1</code>）和 <code>key2</code>（名称<code>dev name 2</code>和描述<code>dev description 2</code>）。</p>
<blockquote>
<p>前面的合并规则适用于所有属性源的属性，而不仅仅适用于YAML文件。</p>
</blockquote>
<h2 id="属性转换"><a href="#属性转换" class="headerlink" title="属性转换"></a>属性转换</h2><p>Spring Boot尝试在绑定到<code>@ConfigurationProperties</code>bean 时将外部应用程序属性强制转换为正确的类型。如果需要自定义类型转换，则可以提供<code>ConversionService</code>bean（带有bean命名<code>conversionService</code>）或自定义属性编辑器（通过<code>CustomEditorConfigurer</code>bean）或自定义<code>Converters</code>（带有注释为bean的bean定义<code>@ConfigurationPropertiesBinding</code>）。</p>
<blockquote>
<p>由于在应用程序生命周期中很早就请求此bean，因此请确保限制您<code>ConversionService</code>正在使用的依赖项。通常，您在创建时可能无法完全初始化所需的任何依赖项。<code>ConversionService</code>如果配置密钥强制不需要，您可能需要重命名自定义，并且只依赖于合格的自定义转换器<code>@ConfigurationPropertiesBinding</code>。</p>
</blockquote>
<h3 id="转换持续时间"><a href="#转换持续时间" class="headerlink" title="转换持续时间"></a>转换持续时间</h3><p>Spring Boot专门支持表达持续时间。如果公开 <code>java.time.Duration</code>属性，则可以使用应用程序属性中的以下格式：</p>
<ul>
<li>常规<code>long</code>表示（除非<code>@DurationUnit</code>已指定，否则使用毫秒作为默认单位 ）</li>
<li>标准的ISO-8601格式 <a href="https://docs.oracle.com/javase/8/docs/api//java/time/Duration.html#parse-java.lang.CharSequence-" target="_blank" rel="noopener"> <code>java.util.Duration</code></a>的使用</li>
<li>一种更易读的格式，其中值和单位耦合（例如<code>10s</code>10秒）</li>
</ul>
<p>请考虑以下示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">"app.system"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppSystemProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@DurationUnit</span>(ChronoUnit.SECONDS)</span><br><span class="line">	<span class="keyword">private</span> Duration sessionTimeout = Duration.ofSeconds(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Duration readTimeout = Duration.ofMillis(<span class="number">1000</span>);</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Duration <span class="title">getSessionTimeout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.sessionTimeout;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSessionTimeout</span><span class="params">(Duration sessionTimeout)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.sessionTimeout = sessionTimeout;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Duration <span class="title">getReadTimeout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.readTimeout;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReadTimeout</span><span class="params">(Duration readTimeout)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.readTimeout = readTimeout;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>要指定30秒的会话超时<code>30</code>，<code>PT30S</code>并且<code>30s</code>都是等效的。的500ms的读超时可以以任何形式如下指定：<code>500</code>，<code>PT0.5S</code>和 <code>500ms</code>。</p>
<p>您也可以使用任何支持的单位。这些是：</p>
<ul>
<li><code>ns</code> 为纳秒</li>
<li><code>us</code> 微秒</li>
<li><code>ms</code> 毫秒</li>
<li><code>s</code> 几秒钟</li>
<li><code>m</code> 几分钟</li>
<li><code>h</code> 用了几个小时</li>
<li><code>d</code> 持续数天</li>
</ul>
<p>默认单位是毫秒，可以使用<code>@DurationUnit</code>上面的示例中所示进行覆盖。</p>
<blockquote>
<p>如果要从仅<code>Long</code>用于表示持续时间的先前版本升级，请确保定义单位（使用<code>@DurationUnit</code>），如果它不是交换机旁边的毫秒数<code>Duration</code>。这样做可以提供透明的升级路径，同时支持更丰富的格式。</p>
</blockquote>
<h3 id="转换数据大小"><a href="#转换数据大小" class="headerlink" title="转换数据大小"></a>转换数据大小</h3><p>Spring Framework有一个<code>DataSize</code>值类型，允许以字节为单位表示大小。如果公开<code>DataSize</code>属性，则可以使用应用程序属性中的以下格式：</p>
<ul>
<li>常规<code>long</code>表示（使用字节作为默认单位，除非 <code>@DataSizeUnit</code>已指定）</li>
<li>更可读的格式，其中值和单元耦合（例如，<code>10MB</code>意味着10兆字节）</li>
</ul>
<p>请考虑以下示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(<span class="string">"app.io"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppIoProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@DataSizeUnit</span>(DataUnit.MEGABYTES)</span><br><span class="line">	<span class="keyword">private</span> DataSize bufferSize = DataSize.ofMegabytes(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> DataSize sizeThreshold = DataSize.ofBytes(<span class="number">512</span>);</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataSize <span class="title">getBufferSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.bufferSize;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBufferSize</span><span class="params">(DataSize bufferSize)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.bufferSize = bufferSize;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> DataSize <span class="title">getSizeThreshold</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.sizeThreshold;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSizeThreshold</span><span class="params">(DataSize sizeThreshold)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.sizeThreshold = sizeThreshold;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>指定10兆字节的缓冲区大小，<code>10</code>并且<code>10MB</code>是等效的。可以将大小阈值256个字节指定为<code>256</code>或<code>256B</code>。</p>
<p>您也可以使用任何支持的单位。这些是：</p>
<ul>
<li><code>B</code> 用于字节</li>
<li><code>KB</code> 为千字节</li>
<li><code>MB</code> 对于兆字节</li>
<li><code>GB</code> 为千兆字节</li>
<li><code>TB</code> 对于太字节</li>
</ul>
<p>默认单位是字节，可以使用<code>@DataSizeUnit</code>上面的示例中所示进行覆盖。</p>
<blockquote>
<p>如果要从仅<code>Long</code>用于表示大小的先前版本升级，请确保定义单位（使用<code>@DataSizeUnit</code>），如果它不是交换机旁边的字节<code>DataSize</code>。这样做可以提供透明的升级路径，同时支持更丰富的格式。</p>
</blockquote>
<h2 id="ConfigurationProperties验证"><a href="#ConfigurationProperties验证" class="headerlink" title="@ConfigurationProperties验证"></a>@ConfigurationProperties验证</h2><p>Spring Boot尝试在<code>@ConfigurationProperties</code>使用Spring的<code>@Validated</code>注释注释时验证类。您可以<code>javax.validation</code> 直接在配置类上使用JSR-303 约束注释。为此，请确保符合条件的JSR-303实现位于类路径上，然后将约束注释添加到字段中，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix=<span class="string">"acme"</span>)</span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AcmeProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@NotNull</span></span><br><span class="line">	<span class="keyword">private</span> InetAddress remoteAddress;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ... getters and setters</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>您还可以通过注释<code>@Bean</code>创建配置属性的方法来触发验证<code>@Validated</code>。</p>
</blockquote>
<p>虽然嵌套属性也会在绑定时进行验证，但最好还是将关联字段注释为<code>@Valid</code>。这确保即使没有找到嵌套属性也会触发验证。以下示例基于前面的<code>AcmeProperties</code>示例构建 ：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix=<span class="string">"acme"</span>)</span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AcmeProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@NotNull</span></span><br><span class="line">	<span class="keyword">private</span> InetAddress remoteAddress;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Valid</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Security security = <span class="keyword">new</span> Security();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ... getters and setters</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Security</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@NotEmpty</span></span><br><span class="line">		<span class="keyword">public</span> String username;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// ... getters and setters</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>您还可以<code>Validator</code>通过创建名为的bean定义 来添加自定义Spring <code>configurationPropertiesValidator</code>。<code>@Bean</code>应声明该方法<code>static</code>。配置属性验证器是在应用程序生命周期的早期创建的，并且将该<code>@Bean</code>方法声明为static可以创建bean而无需实例化<code>@Configuration</code>该类。这样做可以避免早期实例化可能导致的任何问题。有一个 <a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-samples/spring-boot-sample-property-validation" target="_blank" rel="noopener">属性验证示例</a>，显示如何设置。</p>
<blockquote>
<p>该<code>spring-boot-actuator</code>模块包括一个暴露所有<code>@ConfigurationProperties</code>bean 的端点 。将Web浏览器指向 <code>/actuator/configprops</code>或使用等效的JMX端点。有关详细信息，请参阅“ <a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#production-ready-endpoints" target="_blank" rel="noopener">生产就绪功能</a> ”部分。</p>
</blockquote>
<h2 id="ConfigurationProperties与-Value"><a href="#ConfigurationProperties与-Value" class="headerlink" title="@ConfigurationProperties与@Value"></a>@ConfigurationProperties与@Value</h2><p><code>@Value</code>的注释是核心容器的功能，和它不提供相同的功能，类型安全配置属性。下表汇总了支持的功能<code>@ConfigurationProperties</code>和<code>@Value</code>：</p>
<table>
<thead>
<tr>
<th style="text-align:center">特征</th>
<th style="text-align:center"><code>@ConfigurationProperties</code></th>
<th style="text-align:center"><code>@Value</code></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-external-config-relaxed-binding" target="_blank" rel="noopener">轻松绑定</a></td>
<td style="text-align:center">是</td>
<td style="text-align:center">没有</td>
</tr>
<tr>
<td style="text-align:center"><a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#configuration-metadata" target="_blank" rel="noopener">元数据支持</a></td>
<td style="text-align:center">是</td>
<td style="text-align:center">没有</td>
</tr>
<tr>
<td style="text-align:center"><code>SpEL</code> 评测</td>
<td style="text-align:center">没有</td>
<td style="text-align:center">是</td>
</tr>
</tbody>
</table>
<p>如果为自己的组件定义一组配置键，我们建议您将它们分组到带注释的POJO中<code>@ConfigurationProperties</code>。您还应该知道，因为<code>@Value</code>不支持宽松绑定，所以如果您需要使用环境变量来提供值，则它不是一个好的候选者。</p>
<p>最后，虽然您可以编写<code>SpEL</code>表达式<code>@Value</code>，但不会从<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#boot-features-external-config-application-property-files" target="_blank" rel="noopener">应用程序属性文件中</a>处理此类表达式。</p>
</div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-类型安全配置属性/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-自定义Banner/">使用SpringBoot-自定义Banner</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-20</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Banner/">Banner</a></div></div><div class="post-content"><div class="main-content content"><h2 id="自定义横幅"><a href="#自定义横幅" class="headerlink" title="自定义横幅"></a>自定义横幅</h2><p>可以通过向<code>banner.txt</code>类路径添加文件或将<code>spring.banner.location</code>属性设置为此类文件的位置来更改启动时打印的横幅。如果文件的编码不是UTF-8，则可以进行设置<code>spring.banner.charset</code>。除了一个文本文件，你还可以添加一个<code>banner.gif</code>，<code>banner.jpg</code>或<code>banner.png</code> 图像文件到类路径或设置<code>spring.banner.image.location</code>属性。图像将转换为ASCII艺术表示，并打印在任何文本横幅上方。</p>
<p>在<code>banner.txt</code>文件中，您可以使用以下任何占位符：</p>
<table>
<thead>
<tr>
<th style="text-align:center">量</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>${application.version}</code></td>
<td style="text-align:center">应用程序的版本号，如声明中所声明的<code>MANIFEST.MF</code>。例如，<code>Implementation-Version: 1.0</code>打印为<code>1.0</code>。</td>
</tr>
<tr>
<td style="text-align:center"><code>${application.formatted-version}</code></td>
<td style="text-align:center">应用程序的版本号，在<code>MANIFEST.MF</code>显示中声明并格式化（用括号括起来并以前缀为例<code>v</code>）。例如<code>(v1.0)</code>。</td>
</tr>
<tr>
<td style="text-align:center"><code>${spring-boot.version}</code></td>
<td style="text-align:center">您正在使用的Spring Boot版本。例如<code>2.1.3.RELEASE</code>。</td>
</tr>
<tr>
<td style="text-align:center"><code>${spring-boot.formatted-version}</code></td>
<td style="text-align:center">您正在使用的Spring Boot版本，格式化显示（用括号括起来并带有前缀<code>v</code>）。例如<code>(v2.1.3.RELEASE)</code>。</td>
</tr>
<tr>
<td style="text-align:center"><code>${Ansi.NAME}</code></td>
</tr>
</tbody>
</table>
<p><code>${AnsiColor.NAME}</code><br><code>${AnsiBackground.NAME}</code><br><code>${AnsiStyle.NAME}</code> | <code>NAME</code>ANSI转义码的名称在哪里。详情<a href="https://github.com/spring-projects/spring-boot/tree/v2.1.3.RELEASE/spring-boot-project/spring-boot/src/main/java/org/springframework/boot/ansi/AnsiPropertySource.java" target="_blank" rel="noopener"><code>AnsiPropertySource</code></a>。 |<br>|                    <code>${application.title}</code>                    | 申请的标题，如声明中所述<code>MANIFEST.MF</code>。例如<code>Implementation-Title: MyApp</code>打印为<code>MyApp</code>。 |</p>
<blockquote>
<p><code>SpringApplication.setBanner(…)</code>如果要以编程方式生成横幅，则可以使用该方法。使用<code>org.springframework.boot.Banner</code>界面并实现自己的<code>printBanner()</code>方法。</p>
</blockquote>
<p>您还可以使用该<code>spring.main.banner-mode</code>属性来确定是否必须在<code>System.out</code>（<code>console</code>）上打印横幅，发送到配置的记录器（<code>log</code>），或者根本不生成横幅（<code>off</code>）。</p>
<p>打印的横幅在以下名称下注册为单例bean : <code>springBootBanner</code>.</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring：</span></span><br><span class="line">	<span class="string">main：</span></span><br><span class="line">		<span class="string">banner-mode：“off”</span></span><br></pre></td></tr></table></figure></div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-自定义Banner/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-SpringBootApplication/">使用SpringBoot-@SpringBootApplication</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-22</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Annotation/">Annotation</a></div></div><div class="post-content"><div class="main-content content"><h2 id="使用-SpringBootApplication-Annotation"><a href="#使用-SpringBootApplication-Annotation" class="headerlink" title="使用@SpringBootApplication Annotation"></a>使用@SpringBootApplication Annotation</h2><p>许多Spring Boot开发人员喜欢他们的应用程序使用自动配置，组件扫描，并能够在他们的“应用程序类”上定义额外的配置。<code>@SpringBootApplication</code>可以使用单个 注释来启用这三个功能，即：</p>
<ul>
<li><code>@EnableAutoConfiguration</code>：启用<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#using-boot-auto-configuration" target="_blank" rel="noopener">Spring Boot的自动配置机制</a></li>
<li><code>@ComponentScan</code>：<code>@Component</code>在应用程序所在的包上启用扫描（请参阅<a href="https://docs.spring.io/spring-boot/docs/2.1.3.RELEASE/reference/htmlsingle/#using-boot-structuring-your-code" target="_blank" rel="noopener">最佳实践</a>）</li>
<li><code>@Configuration</code>：允许在上下文中注册额外的bean或导入其他配置类</li>
</ul>
<p>的<code>@SpringBootApplication</code>注释是相当于使用<code>@Configuration</code>， <code>@EnableAutoConfiguration</code>以及<code>@ComponentScan</code>与他们的默认属性，如显示在下面的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapplication;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">//相当于@Configuration,@EnableAutoConfiguration和@ComponentScan一起使用</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span>  <span class="keyword">static</span>  <span class="keyword">void</span> main（String [] args）&#123;</span><br><span class="line">		SpringApplication.run（Application .class，args）;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>@SpringBootApplication</code>还提供了别名定制的属性 <code>@EnableAutoConfiguration</code>和<code>@ComponentScan</code>。</p>
</blockquote>
<blockquote>
<p>这些功能都不是必需的，您可以选择通过它启用的任何功能替换此单个注释。例如，您可能不希望在应用程序中使用组件扫描：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">package</span> com.example.myapplication;</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line">&gt; <span class="keyword">import</span> org.springframework.context.annotation.ComponentScan</span><br><span class="line">&gt; <span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line">&gt; <span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line">&gt; </span><br><span class="line">&gt; <span class="meta">@Configuration</span></span><br><span class="line">&gt; <span class="meta">@EnableAutoConfiguration</span></span><br><span class="line">&gt; <span class="meta">@Import</span>(&#123;MyConfig.class，MyAnotherConfig.class&#125;)</span><br><span class="line">&gt; <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">&gt;     <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main（String[] args）&#123;</span><br><span class="line">&gt;     	SpringApplication.run（Application .class，args）;</span><br><span class="line">&gt;     &#125;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p>在此示例中，<code>Application</code>与任何其他Spring Boot应用程序一样，除了 <code>@Component</code>未自动检测到注释类并且显式导入用户定义的bean（请参阅参考资料<code>@Import</code>）。</p>
</blockquote>
</div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-SpringBootApplication/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-依赖注入/">使用SpringBoot-依赖注入</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-20</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Autowired/">Autowired</a></div></div><div class="post-content"><div class="main-content content"><h2 id="Spring-Beans和依赖注入"><a href="#Spring-Beans和依赖注入" class="headerlink" title="Spring Beans和依赖注入"></a>Spring Beans和依赖注入</h2><p>您可以自由地使用任何标准的Spring Framework技术来定义bean及其注入的依赖项。为简单起见，我们经常发现使用 <code>@ComponentScan</code>（找到你的bean）和使用<code>@Autowired</code>（做构造函数注入）效果很好。</p>
<p>如果按照上面的建议构建代码（在根包中定位应用程序类），则可以添加<code>@ComponentScan</code>不带任何参数的代码。您的所有应用程序组件（的<code>@Component</code>，<code>@Service</code>，<code>@Repository</code>，<code>@Controller</code>等）自动注册为春豆。</p>
<p>以下示例显示了一个<code>@Service</code>使用构造函数注入来获取所需<code>RiskAssessor</code>bean的Bean：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseAccountService</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> RiskAssessor riskAssessor;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DatabaseAccountService</span><span class="params">(RiskAssessor riskAssessor)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.riskAssessor = riskAssessor;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果bean有一个构造函数，则可以省略<code>@Autowired</code>，如下例所示：(长知识了)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DatabaseAccountService</span> <span class="keyword">implements</span> <span class="title">AccountService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> RiskAssessor riskAssessor;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">DatabaseAccountService</span><span class="params">(RiskAssessor riskAssessor)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.riskAssessor = riskAssessor;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：使用构造函数注入如何将<code>riskAssessor</code>字段标记为 <code>final</code>，表示无法随后更改。</p>
</blockquote>
</div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-依赖注入/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-AutoConfiguration/">使用SpringBoot-AutoConfiguration</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-20</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/AutoConfiguration/">AutoConfiguration</a></div></div><div class="post-content"><div class="main-content content"><h2 id="自动配置"><a href="#自动配置" class="headerlink" title="自动配置"></a>自动配置</h2><p>​    Spring Boot自动配置尝试根据您添加的jar依赖项自动配置Spring应用程序。例如，如果<code>HSQLDB</code> 在您的类路径上，并且您尚未手动配置任何数据库连接bean，则Spring Boot会自动配置内存数据库。</p>
<p>​    您需要通过向其中一个类添加<code>@EnableAutoConfiguration</code>或 <code>@SpringBootApplication</code>注释来选择自动配置<code>@Configuration</code>。</p>
<blockquote>
<p>您应该只添加一个<code>@SpringBootApplication</code>或<code>@EnableAutoConfiguration</code> 注释。我们通常建议您仅将一个或另一个添加到主 <code>@Configuration</code>类。</p>
</blockquote>
<h2 id="更换自动配置"><a href="#更换自动配置" class="headerlink" title="更换自动配置"></a>更换自动配置</h2><p>​    自动配置是非侵入性的。在任何时候，您都可以开始定义自己的配置以替换自动配置的特定部分。例如，如果添加自己的<code>DataSource</code>bean，则默认的嵌入式数据库支持会退回。</p>
<p>​    如果您需要了解当前正在应用的自动配置以及原因，请使用<code>--debug</code>交换机启动应用程序。这样做可以为选择的核心记录器启用调试日志，并将条件报告记录到控制台。</p>
<h2 id="禁用特定的自动配置类"><a href="#禁用特定的自动配置类" class="headerlink" title="禁用特定的自动配置类"></a>禁用特定的自动配置类</h2><p>​    如果发现正在应用您不需要的特定自动配置类，则可以使用<code>@EnableAutoConfiguration</code>的<code>exclude</code>属性禁用它们，如以下示例所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure。*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.jdbc。*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation。*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> </span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span>（exclude = &#123;DataSourceAutoConfiguration.class&#125;）</span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">MyConfiguration</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果类不在类路径上，则可以使用<code>excludeName</code>注释的属性并指定完全限定名称。最后，您还可以使用该<code>spring.autoconfigure.exclude</code>属性控制要排除的自动配置类列表 。</p>
<blockquote>
<p>可以在注释级别和使用属性定义排除项。</p>
</blockquote>
</div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-AutoConfiguration/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-Configuration/">使用SpringBoot-Configuration</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-22</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Configuration/">Configuration</a></div></div><div class="post-content"><div class="main-content content"><h2 id="配置类"><a href="#配置类" class="headerlink" title="配置类"></a>配置类</h2><p>​    Spring Boot支持基于Java的配置。尽管可以使用 <code>SpringApplicationXML</code>源，但我们通常建议您的主要源是单个<code>@Configuration</code>类。通常，定义<code>main</code>方法的类是主要的候选者<code>@Configuration</code>。</p>
<blockquote>
<p>许多Spring配置示例已在Internet上发布，使用XML配置。如果可能，请始终尝试使用等效的基于Java的配置。搜索<code>Enable*</code>注释可能是一个很好的起点。</p>
</blockquote>
<h2 id="导入其他配置类"><a href="#导入其他配置类" class="headerlink" title="导入其他配置类"></a>导入其他配置类</h2><p>​    你不需要把所有的<code>@Configuration</code>都放在一个类里。<code>@Import</code>注释可以用于导入额外的配置类。或者，您可以使用 <code>@ComponentScan</code>自动获取所有Spring组件，包括 <code>@Configuration</code>类。</p>
<h2 id="导入XML配置文件"><a href="#导入XML配置文件" class="headerlink" title="导入XML配置文件"></a>导入XML配置文件</h2><p>​    如果您必须使用基于XML的配置，我们建议您仍然从一个<code>@Configuration</code>类开始。然后，您可以使用<code>@ImportResource</code>注释来加载XML配置文件</p>
</div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-Configuration/#more">阅读全文</a></div><div class="recent-post-item"><a class="post-title" href="/2019/03/20/使用SpringBoot-Starters/">使用SpringBoot-Starters</a><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 更新于 2019-03-20</time><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/springboot/">springboot</a></div><div class="button-hover tags"><i class="fa fa-tag article-icon" aria-hidden="true"></i><a class="link-a" href="/tags/Starters/">Starters</a></div></div><div class="post-content"><div class="main-content content"><h2 id="Starters简介"><a href="#Starters简介" class="headerlink" title="Starters简介"></a>Starters简介</h2><p>​    启动器是一组方便的依赖关系描述符，您可以在应用程序中包含这些描述符。您可以获得所需的所有Spring和相关技术的一站式服务，而无需查看示例代码和复制粘贴依赖描述符的负载。例如，如果要开始使用Spring和JPA进行数据库访问，请<code>spring-boot-starter-data-jpa</code>在项目中包含依赖项。</p>
<p>启动器包含许多依赖项，这些依赖项是使项目快速启动和运行所需的依赖项，以及一组受支持的托管传递依赖项。</p>
<blockquote>
<p>什么是名字</p>
<p>所有官方首发都遵循类似的命名模式; <code>spring-boot-starter-*</code>，这里<code>*</code>是特定类型的应用程序。此命名结构旨在帮助您找到启动器。许多IDE中的Maven集成允许您按名称搜索依赖项。例如，安装了适当的Eclipse或STS插件后，您可以<code>ctrl-space</code>在POM编辑器中输入“spring-boot-starter”以获取完整列表。</p>
<p>第三方启动者不应该开头为spring-boot，因为它是为官方Spring Boot工件保留的。相反，第三方启动器通常以项目名称开头。例如，<code>thirdpartyproject</code>通常会命名一个名为的第三方启动项目 <code>thirdpartyproject-spring-boot-starter</code>。</p>
</blockquote>
<p>以下应用程序启动程序由Spring Boot在<code>org.springframework.boot</code>组下提供 ：</p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">spring-boot-starter</td>
<td style="text-align:center">核心启动器，包括自动配置支持，日志记录和YAML</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-activemq</td>
<td style="text-align:center">Apache ActiveMQ进行JMS消息传递</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-amqp</td>
<td style="text-align:center">Spring AMQP和Rabbit MQ</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-aop</td>
<td style="text-align:center">Spring AOP和AspectJ进行面向方面编程</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-artemis</td>
<td style="text-align:center">Apache Artemis进行JMS消息传递</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-batch</td>
<td style="text-align:center">Spring Batch</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-cache</td>
<td style="text-align:center">Spring Framework的缓存支持</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-cloud-connectors</td>
<td style="text-align:center">Spring Cloud Connectors的启动器，简化了Cloud Foundry和Heroku等云平台中的服务连接</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-cassandra</td>
<td style="text-align:center">Cassandra分布式数据库和Spring Data Cassandra</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-cassandra-reactive</td>
<td style="text-align:center">Cassandra分布式数据库和Spring Data Cassandra Reactive</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-couchbase</td>
<td style="text-align:center">Couchbase面向文档的数据库和Spring Data Couchbase</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-couchbase-reactive</td>
<td style="text-align:center">Couchbase面向文档的数据库和Spring Data Couchbase Reactive</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-elasticsearch</td>
<td style="text-align:center">Elasticsearch搜索和分析引擎以及Spring Data Elasticsearch</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-jdbc</td>
<td style="text-align:center">Spring Data JDBC</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-jpa</td>
<td style="text-align:center">将Spring Data JPA与Hibernate一起使用</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-ldap</td>
<td style="text-align:center">Spring Data LDAP</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-mongodb</td>
<td style="text-align:center">MongoDB面向文档的数据库和Spring Data MongoDB</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-mongodb-reactive</td>
<td style="text-align:center">MongoDB面向文档的数据库和Spring Data MongoDB Reactive</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-neo4j</td>
<td style="text-align:center">Neo4j图形数据库和Spring Data Neo4j</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-redis</td>
<td style="text-align:center">在Spring Data Redis和Lettuce客户端上使用Redis键值数据存储</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-redis-reactive</td>
<td style="text-align:center">带有Spring Data Redis被动的Redis键值数据存储和Lettuce客户端</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-rest</td>
<td style="text-align:center">Spring Data REST通过REST公开Spring Data存储库</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-data-solr</td>
<td style="text-align:center">在Spring Data Solr中使用Apache Solr搜索平台</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-freemarker</td>
<td style="text-align:center">FreeMarker视图构建MVC Web应用程序</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-groovy-templates</td>
<td style="text-align:center">Groovy模板视图构建MVC Web应用程序</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-hateoas</td>
<td style="text-align:center">Spring MVC和Spring HATEOAS构建基于超媒体的RESTful Web应用程序</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-integration</td>
<td style="text-align:center">Spring Integration</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-jdbc</td>
<td style="text-align:center">将JDBC与HikariCP连接池一起使用</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-jersey</td>
<td style="text-align:center">JAX-RS和Jersey构建RESTful Web应用程序，替代spring-boot-starter-web</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-jooq</td>
<td style="text-align:center">jOOQ访问SQL数据库的启动器。替代spring-boot-starter-data-jpa或spring-boot-starter-jdbc</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-json</td>
<td style="text-align:center">阅读和写作json</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-jta-atomikos</td>
<td style="text-align:center">Atomikos进行JTA交易</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-jta-bitronix</td>
<td style="text-align:center">Bitronix进行JTA事务</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-mail</td>
<td style="text-align:center">Java Mail和Spring Framework的电子邮件发送支持</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-mustache</td>
<td style="text-align:center">Mustache视图构建Web应用程序</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-oauth2-client</td>
<td style="text-align:center">Spring Security的OAuth2 / OpenID Connect客户端功能</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-oauth2-resource-server</td>
<td style="text-align:center">Spring Security的OAuth2资源服务器功能</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-quartz</td>
<td style="text-align:center">Quartz调度程序</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-security</td>
<td style="text-align:center">Spring Security</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-test</td>
<td style="text-align:center">JUnit，Hamcrest和Mockito等库来测试Spring Boot应用程序</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-thymeleaf</td>
<td style="text-align:center">Thymeleaf视图构建MVC Web应用程序</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-validation</td>
<td style="text-align:center">Java Bean Validation和Hibernate Validator</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-web</td>
<td style="text-align:center">Spring MVC构建Web（包括RESTful）应用程序的启动器。使用Tomcat作为默认嵌入式容器</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-web-services</td>
<td style="text-align:center">Spring Web Services</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-webflux</td>
<td style="text-align:center">Spring Framework的Reactive Web支持构建WebFlux应用程序</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-websocket</td>
<td style="text-align:center">Spring Framework的WebSocket支持构建WebSocket应用程序</td>
</tr>
</tbody>
</table>
<p>生产模块功能：</p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">spring-boot-starter-actuator</td>
<td style="text-align:center">Spring Boot的Actuator的启动器，它提供生产就绪功能，帮助您监控和管理您的应用程序</td>
</tr>
</tbody>
</table>
<p>最后，如果要排除或交换特定的技术方面，Spring Boot还包括以下启动器：</p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">spring-boot-starter-jetty</td>
<td style="text-align:center">Jetty作为嵌入式servlet容器，替代spring-boot-starter-tomcat</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-log4j2</td>
<td style="text-align:center">Log4j2进行日志记录。替代spring-boot-starter-logging</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-logging</td>
<td style="text-align:center">Logback进行日志记录。默认日志启动器</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-reactor-netty</td>
<td style="text-align:center">Reactor Netty作为嵌入式响应式HTTP服务器</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-tomcat</td>
<td style="text-align:center">Tomcat作为嵌入式servlet容器。使用的默认servlet容器启动器spring-boot-starter-web</td>
</tr>
<tr>
<td style="text-align:center">spring-boot-starter-undertow</td>
<td style="text-align:center">Undertow作为嵌入式servlet容器。替代spring-boot-starter-tomcat</td>
</tr>
</tbody>
</table>
</div></div><a class="button-hover more" href="/2019/03/20/使用SpringBoot-Starters/#more">阅读全文</a></div></div><div id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/3/"><i class="fas fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fas fa-angle-right"></i></a></div></div></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fas fa-user"></i></span><span id="busuanzi_value_site_uv"></span><span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fas fa-eye"></i></span><span id="busuanzi_value_site_pv"></span><span></span></div><div class="copyright">&copy;2019 By YoungDream</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><!--div#current-refined-values--><!--div#clear-all--><div id="search-box"></div><!--div#refinement-list--><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script></body></html>