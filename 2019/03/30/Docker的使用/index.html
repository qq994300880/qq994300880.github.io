<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Docker的使用"><meta name="keywords" content><meta name="author" content="YoungDream,undefined"><meta name="copyright" content="YoungDream"><title>Docker的使用【YD Blog】</title><link rel="stylesheet" href="/css/fan.css"><link rel="stylesheet" href="/css/thirdparty/jquery.mCustomScrollbar.min.css"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script><!--link(rel="dns-prefetch" href="https://cdn.jsdelivr.net")--><!--link(rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css")--><!--script(src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer)--><script>var isPassword = '' || false;
if (isPassword) {
    if (prompt('请输入文章密码') !== '') {
        alert('密码错误！');
        history.back();
    }
}</script><script>window.GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"0BGAOITLJQ","apiKey":"2c864a8b4720c83c2ddfc7e53d4c1711","indexName":"article_NAME","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
}</script></head><body><canvas id="universe"></canvas><!--#body--><div id="sidebar"><div class="toggle-sidebar-info button-hover"><span data-toggle="文章目录">站点概览</span></div><div class="sidebar-toc"><div class="sidebar-toc-title">目录</div><div class="sidebar-toc-progress"><span class="progress-notice">您已阅读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc-progress-bar"></div></div><div class="sidebar-toc-content" id="sidebar-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker概念和安装"><span class="toc-number">1.</span> <span class="toc-text">Docker概念和安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本概念"><span class="toc-number">1.1.</span> <span class="toc-text">基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#镜像（Image）"><span class="toc-number">1.1.1.</span> <span class="toc-text">镜像（Image）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#容器（Container）"><span class="toc-number">1.1.2.</span> <span class="toc-text">容器（Container）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#仓库（Repository）"><span class="toc-number">1.1.3.</span> <span class="toc-text">仓库（Repository）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Docker的安装"><span class="toc-number">1.2.</span> <span class="toc-text">Docker的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#安装linux虚拟机"><span class="toc-number">1.2.1.</span> <span class="toc-text">安装linux虚拟机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装Dokcer"><span class="toc-number">1.2.2.</span> <span class="toc-text">安装Dokcer</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#事前准备"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">事前准备</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#安装Docker"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">安装Docker</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#基本操作命令"><span class="toc-number">2.</span> <span class="toc-text">基本操作命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#实际操作记录-展示部分"><span class="toc-number">3.</span> <span class="toc-text">实际操作记录(展示部分)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查看镜像列表"><span class="toc-number">3.1.</span> <span class="toc-text">查看镜像列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示容器"><span class="toc-number">3.2.</span> <span class="toc-text">显示容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动容器"><span class="toc-number">3.3.</span> <span class="toc-text">启动容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#停止容器"><span class="toc-number">3.4.</span> <span class="toc-text">停止容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#以交互式命令进入容器"><span class="toc-number">3.5.</span> <span class="toc-text">以交互式命令进入容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#容器日志"><span class="toc-number">3.6.</span> <span class="toc-text">容器日志</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#小技巧"><span class="toc-number">4.</span> <span class="toc-text">小技巧</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他命令"><span class="toc-number">5.</span> <span class="toc-text">其他命令</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info-avatar"><img class="author-info-avatar-img" src="/avatar.png"></div><div class="author-info-name">YoungDream</div><div class="author-info-description">正忙着优秀~~~</div><div class="links-buttons"><a class="links-button button-hover" href="https://github.com/qq994300880" target="_blank">GitHub<i class="icon-dot bg-color9"></i></a><a class="links-button button-hover" href="http://wpa.qq.com/msgrd?v=3&amp;uin=994300880&amp;site=qq&amp;menu=yes" target="_blank">QQ<i class="icon-dot bg-color9"></i></a></div><div class="author-info-articles"><a class="author-info-articles-archives article-meta" href="/archives"><span class="pull-top">日志</span><span class="pull-bottom">115</span></a><a class="author-info-articles-tags article-meta" href="/tags"><span class="pull-top">标签</span><span class="pull-bottom">75</span></a><a class="author-info-articles-categories article-meta" href="/categories"><span class="pull-top">分类</span><span class="pull-bottom">17</span></a></div></div></div><div id="main-container"><header><div id="menu-outer"><i class="menu-list-icon fas fa-bars"></i><nav id="menu-inner"><a class="menu-item" href="/">首页</a><a class="menu-item" href="/tags">标签</a><a class="menu-item" href="/categories">分类</a><a class="menu-item" href="/archives">归档</a><a class="menu-item" href="/about">关于</a></nav><div class="right-info"><a class="search social-icon"><i class="fas fa-search"></i><span> 搜索</span></a><a class="title-name" href="/">YD Blog</a><span id="now-time"></span></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><div class="post-header"><div class="title">Docker的使用</div><div class="container"><time class="button-hover post-date"><i class="fas fa-calendar-alt article-icon" aria-hidden="true"></i> 发表于 2019-03-30 | 更新于 2019-03-30</time><!--time.button-hover.post-date #[i.fas.fa-calendar-alt.article-icon(aria-hidden="true")] #[=__('post.modified')] #[=date(page['updated'], config.date_format)]--><div class="button-hover categories"><i class="fa fa-inbox article-icon" aria-hidden="true"></i><a class="link-a" href="/categories/docker/">docker</a></div><div class="button-hover tags"></div></div></div><div class="main-content"><h2 id="Docker概念和安装"><a href="#Docker概念和安装" class="headerlink" title="Docker概念和安装"></a>Docker概念和安装</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><h4 id="镜像（Image）"><a href="#镜像（Image）" class="headerlink" title="镜像（Image）"></a>镜像（Image）</h4><blockquote>
<p>Docker 镜像是一个特殊的文件系统，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。</p>
</blockquote>
<a id="more"></a>
<h4 id="容器（Container）"><a href="#容器（Container）" class="headerlink" title="容器（Container）"></a>容器（Container）</h4><blockquote>
<p>镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。<br>容器的实质是进程，但与直接在宿主执行的进程不同，容器进程运行于属于自己的独立的 命名空间。因此容器可以拥有自己的 root文件系统、自己的网络配置、自己的进程空间，甚至自己的用户 ID 空间。容器内的进程是运行在一个隔离的环境里，使用起来，就好像是在一个独立于宿主的系统下操作一样。这种特性使得容器封装的应用比直接在宿主运行更加安全。</p>
</blockquote>
<h4 id="仓库（Repository）"><a href="#仓库（Repository）" class="headerlink" title="仓库（Repository）"></a>仓库（Repository）</h4><blockquote>
<p>镜像构建完成后，可以很容易的在当前宿主上运行，但是，如果需要在其它服务器上使用这个镜像，我们就需要一个集中的存储、分发镜像的服务，Docker Registry 就是这样的服务。</p>
</blockquote>
<h3 id="Docker的安装"><a href="#Docker的安装" class="headerlink" title="Docker的安装"></a>Docker的安装</h3><h4 id="安装linux虚拟机"><a href="#安装linux虚拟机" class="headerlink" title="安装linux虚拟机"></a>安装linux虚拟机</h4><ol>
<li><p>安装常见的虚拟机软件，如：VMWare、VirtualBox</p>
</li>
<li><p>安装新系统或者导入虚拟机文件centos等</p>
</li>
<li><p>启动虚拟机，登录操作系统</p>
</li>
<li><p>准备客户端SSH、SmarTTY、Xshell等连上Linux服务器</p>
</li>
<li><p>设置虚拟机的网路</p>
<ul>
<li>桥接网络</li>
<li>选好网卡</li>
<li>接入网线</li>
</ul>
</li>
<li><p>设置好网络后重启虚拟机或者使用Shell命令重启网络</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看Linux的IP地址</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用客户端连接上Linux服务器</p>
</li>
</ol>
<h4 id="安装Dokcer"><a href="#安装Dokcer" class="headerlink" title="安装Dokcer"></a>安装Dokcer</h4><h5 id="事前准备"><a href="#事前准备" class="headerlink" title="事前准备"></a>事前准备</h5><ul>
<li>查看CentOS版本：<code>uname -r</code></li>
<li>Docker要求CentOS系统的内核版本要高于3.10，如果低于则要升级软件包和内核：<code>yum update</code></li>
</ul>
<h5 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h5><ol>
<li><p>这里遇到了坑，先是使用老方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install docker</span><br><span class="line">service docker start</span><br></pre></td></tr></table></figure>
<p>发现Docker启动失败</p>
</li>
<li><p>后查询得知Docker官方有安装的新方法</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum remove docker</span><br><span class="line">yum remove docker -selinux</span><br><span class="line">vim /etc/yum.repos.d/docker.repo</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">name=Docker Repository</span><br><span class="line">baseurl=https://yum.dockerproject.org/repo/main/centos/$releasever/</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=1</span><br><span class="line">gpgkey=https://yum.dockerproject.org/gpg</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install docker-engine</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br></pre></td></tr></table></figure>
<p>成功启动,查看docker的版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:           18.09.0</span><br><span class="line"> API version:       1.39</span><br><span class="line"> Go version:        go1.10.4</span><br><span class="line"> Git commit:        4d60db4</span><br><span class="line"> Built:             Wed Nov  7 00:48:22 2018</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Experimental:      false</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          18.09.0</span><br><span class="line">  API version:      1.39 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.10.4</span><br><span class="line">  Git commit:       4d60db4</span><br><span class="line">  Built:            Wed Nov  7 00:19:08 2018</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     false</span><br></pre></td></tr></table></figure>
<p>还有一种方法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>将Docker服务设为开机启动：<code>systemctl enable docker</code></p>
</li>
</ol>
<h2 id="基本操作命令"><a href="#基本操作命令" class="headerlink" title="基本操作命令"></a>基本操作命令</h2><table>
<thead>
<tr>
<th style="text-align:center">操作</th>
<th style="text-align:center">命令</th>
<th style="text-align:center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">检索</td>
<td style="text-align:center">docker search 关键字</td>
<td style="text-align:center">在docker hub上检索镜像的详情信息</td>
</tr>
<tr>
<td style="text-align:center">拉取</td>
<td style="text-align:center">docker pull 镜像名:tag</td>
<td style="text-align:center">:tag：软件版本，默认是latest</td>
</tr>
<tr>
<td style="text-align:center">镜像列表</td>
<td style="text-align:center">docker images</td>
<td style="text-align:center">查看本地所有镜像详情</td>
</tr>
<tr>
<td style="text-align:center">镜像删除</td>
<td style="text-align:center">docker rmi image-id</td>
<td style="text-align:center">删除指定的本地镜像</td>
</tr>
<tr>
<td style="text-align:center">容器删除</td>
<td style="text-align:center">docker rm base</td>
<td style="text-align:center">删除base容器，如果base正在运行，则可以使用-f进行强制删除</td>
</tr>
<tr>
<td style="text-align:center">显示容器</td>
<td style="text-align:center">docker ps -a</td>
<td style="text-align:center">显示当前宿主机所有容器；没有-a表示显示当前宿主机正在运行的容器</td>
</tr>
<tr>
<td style="text-align:center">运行容器</td>
<td style="text-align:center">docker run -d -p 宿主机端口:容器端口 -name 容器名 镜像名</td>
<td style="text-align:center">-d 表示以后台方式运行 -p代表映射端口 -name代表容器名</td>
</tr>
<tr>
<td style="text-align:center">以交互式命令进入容器</td>
<td style="text-align:center">docker exec -it 容器名 /bin/bash</td>
<td style="text-align:center">以交互式命令进入容器，可以执行/bin/bash命令</td>
</tr>
<tr>
<td style="text-align:center">停止容器</td>
<td style="text-align:center">docker stop 容器名/容器ID</td>
<td style="text-align:center">选定容器停止</td>
</tr>
<tr>
<td style="text-align:center">启动容器</td>
<td style="text-align:center">docker start 容器名/容器ID</td>
<td style="text-align:center">选定容器启动</td>
</tr>
<tr>
<td style="text-align:center">容器日志</td>
<td style="text-align:center">docker logs 容器名/容器ID</td>
<td style="text-align:center">容器的日志查看</td>
</tr>
<tr>
<td style="text-align:center">防火墙</td>
<td style="text-align:center">service firewalld status</td>
<td style="text-align:center">查看防火墙状态</td>
</tr>
<tr>
<td style="text-align:center">防火墙</td>
<td style="text-align:center">service firewalld stop</td>
<td style="text-align:center">关闭防火墙</td>
</tr>
<tr>
<td style="text-align:center">强制关闭docker</td>
<td style="text-align:center">killall Dokcer</td>
<td style="text-align:center">关闭Dokcer</td>
</tr>
</tbody>
</table>
<h2 id="实际操作记录-展示部分"><a href="#实际操作记录-展示部分" class="headerlink" title="实际操作记录(展示部分)"></a>实际操作记录(展示部分)</h2><h3 id="查看镜像列表"><a href="#查看镜像列表" class="headerlink" title="查看镜像列表"></a>查看镜像列表</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker images</span><br><span class="line">REPOSITORY                                     TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry.docker-cn.com/library/mongo           latest              10dce532716f        2 months ago        393MB</span><br><span class="line">redis                                          latest              ce25c7293564        2 months ago        95MB</span><br><span class="line">mysql                                          latest              f991c20cb508        3 months ago        486MB</span><br><span class="line">registry.docker-cn.com/library/rabbitmq        3-management        d69a5113ceae        4 months ago        149MB</span><br><span class="line">registry.docker-cn.com/library/zookeeper       latest              f336949ce7a1        4 months ago        148MB</span><br><span class="line">registry.docker-cn.com/library/elasticsearch   latest              5acf0e8da90b        5 months ago        486MB</span><br></pre></td></tr></table></figure>
<h3 id="显示容器"><a href="#显示容器" class="headerlink" title="显示容器"></a>显示容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                       PORTS               NAMES</span><br><span class="line">d1cb816cdc88        10dce532716f        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                          myMongo</span><br><span class="line">f88e287867ce        f336949ce7a1        "/docker-entrypoint.…"   2 months ago        Exited (143) 7 minutes ago                       myZooKeeper</span><br><span class="line">58cfffc74b1b        5acf0e8da90b        "/docker-entrypoint.…"   2 months ago        Exited (143) 2 months ago                        myES</span><br><span class="line">57d2aa554d9e        d69a5113ceae        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                          myRabbitMQ</span><br><span class="line">fd0392de1d53        redis:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                          myRedis</span><br><span class="line">5757e7f9c83d        mysql:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                          mysql01</span><br></pre></td></tr></table></figure>
<h3 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                       PORTS               NAMES</span><br><span class="line">d1cb816cdc88        10dce532716f        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                          myMongo</span><br><span class="line">f88e287867ce        f336949ce7a1        "/docker-entrypoint.…"   2 months ago        Exited (143) 7 minutes ago                       myZooKeeper</span><br><span class="line">58cfffc74b1b        5acf0e8da90b        "/docker-entrypoint.…"   2 months ago        Exited (143) 2 months ago                        myES</span><br><span class="line">57d2aa554d9e        d69a5113ceae        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                          myRabbitMQ</span><br><span class="line">fd0392de1d53        redis:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                          myRedis</span><br><span class="line">5757e7f9c83d        mysql:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                          mysql01</span><br><span class="line">[root@localhost ~]# docker start 5757e7f9c83d</span><br><span class="line">5757e7f9c83d</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                       PORTS                               NAMES</span><br><span class="line">d1cb816cdc88        10dce532716f        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                          myMongo</span><br><span class="line">f88e287867ce        f336949ce7a1        "/docker-entrypoint.…"   2 months ago        Exited (143) 9 minutes ago                                       myZooKeeper</span><br><span class="line">58cfffc74b1b        5acf0e8da90b        "/docker-entrypoint.…"   2 months ago        Exited (143) 2 months ago                                        myES</span><br><span class="line">57d2aa554d9e        d69a5113ceae        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                          myRabbitMQ</span><br><span class="line">fd0392de1d53        redis:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                          myRedis</span><br><span class="line">5757e7f9c83d        mysql:latest        "docker-entrypoint.s…"   2 months ago        Up 4 seconds                 0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   mysql01</span><br></pre></td></tr></table></figure>
<h3 id="停止容器"><a href="#停止容器" class="headerlink" title="停止容器"></a>停止容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS                               NAMES</span><br><span class="line">d1cb816cdc88        10dce532716f        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                           myMongo</span><br><span class="line">f88e287867ce        f336949ce7a1        "/docker-entrypoint.…"   2 months ago        Exited (143) 10 minutes ago                                       myZooKeeper</span><br><span class="line">58cfffc74b1b        5acf0e8da90b        "/docker-entrypoint.…"   2 months ago        Exited (143) 2 months ago                                         myES</span><br><span class="line">57d2aa554d9e        d69a5113ceae        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                           myRabbitMQ</span><br><span class="line">fd0392de1d53        redis:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                           myRedis</span><br><span class="line">5757e7f9c83d        mysql:latest        "docker-entrypoint.s…"   2 months ago        Up About a minute             0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   mysql01</span><br><span class="line">[root@localhost ~]# docker stop 5757e7f9c83d</span><br><span class="line">5757e7f9c83d</span><br><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS               NAMES</span><br><span class="line">d1cb816cdc88        10dce532716f        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                           myMongo</span><br><span class="line">f88e287867ce        f336949ce7a1        "/docker-entrypoint.…"   2 months ago        Exited (143) 11 minutes ago                       myZooKeeper</span><br><span class="line">58cfffc74b1b        5acf0e8da90b        "/docker-entrypoint.…"   2 months ago        Exited (143) 2 months ago                         myES</span><br><span class="line">57d2aa554d9e        d69a5113ceae        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                           myRabbitMQ</span><br><span class="line">fd0392de1d53        redis:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                           myRedis</span><br><span class="line">5757e7f9c83d        mysql:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 seconds ago                          mysql01</span><br></pre></td></tr></table></figure>
<h3 id="以交互式命令进入容器"><a href="#以交互式命令进入容器" class="headerlink" title="以交互式命令进入容器"></a>以交互式命令进入容器</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                        PORTS                               NAMES</span><br><span class="line">d1cb816cdc88        10dce532716f        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                           myMongo</span><br><span class="line">f88e287867ce        f336949ce7a1        "/docker-entrypoint.…"   2 months ago        Exited (143) 13 minutes ago                                       myZooKeeper</span><br><span class="line">58cfffc74b1b        5acf0e8da90b        "/docker-entrypoint.…"   2 months ago        Exited (143) 2 months ago                                         myES</span><br><span class="line">57d2aa554d9e        d69a5113ceae        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                           myRabbitMQ</span><br><span class="line">fd0392de1d53        redis:latest        "docker-entrypoint.s…"   2 months ago        Exited (0) 2 months ago                                           myRedis</span><br><span class="line">5757e7f9c83d        mysql:latest        "docker-entrypoint.s…"   2 months ago        Up 5 seconds                  0.0.0.0:3306-&gt;3306/tcp, 33060/tcp   mysql01</span><br><span class="line">[root@localhost ~]# docker exec -it 5757e7f9c83d /bin/bash</span><br><span class="line">root@5757e7f9c83d:/# ls</span><br><span class="line">bin  boot  dev  docker-entrypoint-initdb.d  entrypoint.sh  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br></pre></td></tr></table></figure>
<h3 id="容器日志"><a href="#容器日志" class="headerlink" title="容器日志"></a>容器日志</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker logs 5757e7f9c83d</span><br><span class="line">Initializing database</span><br><span class="line">2019-03-04T04:25:12.905282Z 0 [Warning] [MY-011070] [Server] 'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it' is deprecate</span><br><span class="line">d and will be removed in a future release.</span><br><span class="line">2019-03-04T04:25:12.905383Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.13) starting as process 1</span><br><span class="line">2019-03-04T04:25:13.505452Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.</span><br><span class="line">2019-03-04T04:25:13.508712Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a differe</span><br><span class="line">nt directory.</span><br><span class="line">2019-03-04T04:25:13.517670Z 0 [Warning] [MY-010315] [Server] 'user' entry 'mysql.infoschema@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.517718Z 0 [Warning] [MY-010315] [Server] 'user' entry 'mysql.session@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.517816Z 0 [Warning] [MY-010315] [Server] 'user' entry 'mysql.sys@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.517844Z 0 [Warning] [MY-010315] [Server] 'user' entry 'root@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.517907Z 0 [Warning] [MY-010323] [Server] 'db' entry 'performance_schema mysql.session@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.517925Z 0 [Warning] [MY-010323] [Server] 'db' entry 'sys mysql.sys@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.518133Z 0 [Warning] [MY-010311] [Server] 'proxies_priv' entry '@ root@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.530263Z 0 [Warning] [MY-010330] [Server] 'tables_priv' entry 'user mysql.session@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.530294Z 0 [Warning] [MY-010330] [Server] 'tables_priv' entry 'sys_config mysql.sys@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:25:13.535349Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: '8.0.13'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server - G</span><br><span class="line">PL.</span><br><span class="line">2019-03-04T04:25:13.594737Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Socket: '/var/run/mysqld/mysqlx.sock' bind-address: '::' port: 33060</span><br><span class="line">2019-03-04T04:27:05.418852Z 0 [System] [MY-010910] [Server] /usr/sbin/mysqld: Shutdown complete (mysqld 8.0.13)  MySQL Community Server - GPL.</span><br><span class="line">2019-03-04T04:29:28.981838Z 0 [Warning] [MY-011070] [Server] 'Disabling symbolic links using --skip-symbolic-links (or equivalent) is the default. Consider not using this option as it' is deprecate</span><br><span class="line">d and will be removed in a future release.</span><br><span class="line">2019-03-04T04:29:28.981969Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.13) starting as process 1</span><br><span class="line">2019-03-04T04:29:29.334515Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed.</span><br><span class="line">2019-03-04T04:29:29.336641Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a differe</span><br><span class="line">nt directory.</span><br><span class="line">2019-03-04T04:29:29.344550Z 0 [Warning] [MY-010315] [Server] 'user' entry 'mysql.infoschema@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.344601Z 0 [Warning] [MY-010315] [Server] 'user' entry 'mysql.session@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.344616Z 0 [Warning] [MY-010315] [Server] 'user' entry 'mysql.sys@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.344626Z 0 [Warning] [MY-010315] [Server] 'user' entry 'root@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.344666Z 0 [Warning] [MY-010323] [Server] 'db' entry 'performance_schema mysql.session@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.344677Z 0 [Warning] [MY-010323] [Server] 'db' entry 'sys mysql.sys@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.344693Z 0 [Warning] [MY-010311] [Server] 'proxies_priv' entry '@ root@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.353585Z 0 [Warning] [MY-010330] [Server] 'tables_priv' entry 'user mysql.session@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.353626Z 0 [Warning] [MY-010330] [Server] 'tables_priv' entry 'sys_config mysql.sys@localhost' ignored in --skip-name-resolve mode.</span><br><span class="line">2019-03-04T04:29:29.359218Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: '8.0.13'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server - G</span><br><span class="line">PL.</span><br><span class="line">2019-03-04T04:29:29.499821Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Socket: '/var/run/mysqld/mysqlx.sock' bind-address: '::' port: 33060</span><br></pre></td></tr></table></figure>
<h2 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull命令下载镜像都是从国外的服务器下载，以下方法可以加速下载</span><br><span class="line">docker pull [registry.docker-cn.com/library]/(redis,mysql,...)</span><br></pre></td></tr></table></figure>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><p>删除所有未使用的数据</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system prune</span><br></pre></td></tr></table></figure>
<p>删除所有未使用的volumes</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume prune</span><br></pre></td></tr></table></figure>
<p>更好的学习当然是看文档介绍啦~~~</p>
</div><div class="post-copyright"><div class="post-copyright-author"><span class="post-copyright-meta">本文作者: </span><span class="post-copyright-info"><a href="mailto:undefined">YoungDream</a></span></div><div class="post-copyright-type"><span class="post-copyright-meta">本文链接: </span><span class="post-copyright-info"><a href="http://qq994300880.github.io/2019/03/30/Docker的使用/">http://qq994300880.github.io/2019/03/30/Docker的使用/</a></span></div><div class="post-copyright-notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://qq994300880.github.io">YD Blog</a>！</span></div></div></article><div id="pagination"><div class="prev-post pull-left"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2019/03/30/Lombok常用注解/"><i class="fas fa-angle-left">&nbsp;</i><span>Lombok常用注解</span></a></div><div class="next-post pull-right"><span class="line line-top"></span><span class="line line-right"></span><span class="line line-bottom"></span><span class="line line-left"></span><a href="/2019/03/30/Git基础/"><span>Git基础</span><span>&nbsp;</span><i class="fas fa-angle-right"></i></a></div></div><!--div!= paginator()--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script><div id="gitalk-container"></div><script src="/js/gitalk.js"></script></div></div><div class="button-hover" id="return-top"><i class="fas fa-arrow-up" aria-hidden="true"></i></div><footer><div id="footer"><div class="button-hover" id="side-button"><i class="fas fa-arrow-right"></i></div><div class="right-content"><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fas fa-file-o"></i></span><span id="busuanzi_value_page_pv"></span><span></span></div><div class="copyright">&copy;2019 By YoungDream</div></div></div></footer></div><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery-3.3.1.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/velocity.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/thirdparty/jquery.mCustomScrollbar.concat.min.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/fan.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/canvas_bg.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/utils.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/scroll.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/sidebar.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/copy.js"></script><!--script(src=url)--><!--js(src=url_for(url) + '?version=' + version())--><script src="/js/clicklove.js"></script><!--script(src=url)--><div class="search-dialog"><div id="algolia-search-title">Algolia</div><div class="search-close-button"><i class="fa fa-times"></i></div><!--div#current-refined-values--><!--div#clear-all--><div id="search-box"></div><!--div#refinement-list--><hr><div id="hits"></div><div id="algolia-pagination"></div></div><div class="search-mask"></div><script src="/js/search/algolia.js"></script></body></html>